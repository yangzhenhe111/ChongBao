Index: app/src/main/java/com/example/pet/forum/ForumFragment.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.pet.forum;\r\nimport android.content.Intent;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.BitmapFactory;\r\nimport android.media.Image;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.os.Message;\r\nimport android.text.TextPaint;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.ListView;\r\nimport android.widget.PopupWindow;\r\nimport android.widget.RelativeLayout;\r\nimport android.widget.Switch;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.pet.R;\r\nimport com.example.pet.other.Cache;\r\nimport com.example.pet.other.entity.Tips;\r\nimport com.youth.banner.Banner;\r\nimport com.youth.banner.BannerConfig;\r\nimport com.youth.banner.listener.OnBannerListener;\r\n\r\nimport org.json.JSONArray;\r\nimport org.json.JSONException;\r\nimport org.json.JSONObject;\r\n\r\nimport java.io.BufferedReader;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.io.InputStreamReader;\r\nimport java.net.HttpURLConnection;\r\nimport java.net.MalformedURLException;\r\nimport java.net.ProtocolException;\r\nimport java.net.URL;\r\nimport java.net.URLConnection;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\nimport java.util.Map;\r\nimport java.util.concurrent.CountDownLatch;\r\n\r\npublic class ForumFragment extends Fragment {\r\n\r\n    private EditText et_search;\r\n    private Button btn_search;\r\n    private Button btn_publish;\r\n    private RelativeLayout forum_food;\r\n    private RelativeLayout forum_articles;\r\n    private RelativeLayout forum_daily;\r\n    private RelativeLayout forum_cosmetology;\r\n    private RelativeLayout forum_train;\r\n    private RelativeLayout forum_deworming;\r\n    private RelativeLayout forum_disease;\r\n    private RelativeLayout forum_randomtalk;\r\n    private RelativeLayout forum_question;\r\n    private RelativeLayout forum_sharephotos;\r\n    private TextView tv_food;\r\n    private TextView tv_articles;\r\n    private TextView tv_daily;\r\n    private TextView tv_cosmetology;\r\n    private TextView tv_train;\r\n    private TextView tv_deworming;\r\n    private TextView tv_disease;\r\n    private TextView tv_randomtalk;\r\n    private TextView tv_question;\r\n    private TextView tv_sharephotos;\r\n    private TextView tv_newest;\r\n    private TextView tv_hot;\r\n    private TextView tv_essence;\r\n    private ListView lv_tips;\r\n    private Banner banner;\r\n    private ArrayList<Tips> arrayList = new ArrayList<>();\r\n    private ArrayList<Tips> tipsArrayList;\r\n\r\n    private Handler handler = new Handler(){\r\n        @Override\r\n        public void handleMessage(@NonNull Message message) {\r\n            switch (message.what){\r\n                case 1:\r\n                    Log.e(\"handler\", \"gethere----------------------\");\r\n                    init((ArrayList) message.obj);\r\n                    break;\r\n            }\r\n        }\r\n    };\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull final LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.fragment_forum,container,false);\r\n        getAllTips();\r\n        et_search = view.findViewById(R.id.et_main_search);\r\n        btn_search = view.findViewById(R.id.btn_main_search);\r\n        btn_search.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n            }\r\n        });\r\n        btn_publish = view.findViewById(R.id.btn_publish_articles);\r\n        btn_publish.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent();\r\n                intent.setClass(getContext(),PublishActivity.class);\r\n                startActivity(intent);\r\n                getActivity().finish();\r\n            }\r\n        });\r\n        tv_food = view.findViewById(R.id.tv_food);\r\n        tv_articles = view.findViewById(R.id.tv_articles);\r\n        tv_daily = view.findViewById(R.id.tv_daily);\r\n        tv_cosmetology = view.findViewById(R.id.tv_cosmetology);\r\n        tv_train = view.findViewById(R.id.tv_train);\r\n        tv_deworming = view.findViewById(R.id.tv_deworming);\r\n        tv_disease = view.findViewById(R.id.tv_disease);\r\n        tv_randomtalk = view.findViewById(R.id.tv_randomtalk);\r\n        tv_question = view.findViewById(R.id.tv_question);\r\n        tv_sharephotos = view.findViewById(R.id.tv_sharephotos);\r\n        final String food = tv_food.getText().toString();\r\n        final String articles = tv_articles.getText().toString();\r\n        final String daily = tv_daily.getText().toString();\r\n        final String cosmetology = tv_cosmetology.getText().toString();\r\n        final String train = tv_train.getText().toString();\r\n        final String deworming = tv_deworming.getText().toString();\r\n        final String disease = tv_disease.getText().toString();\r\n        final String randomtalk = tv_randomtalk.getText().toString();\r\n        final String question = tv_question.getText().toString();\r\n        final String sharephotos = tv_sharephotos.getText().toString();\r\n        forum_food = view.findViewById(R.id.forum_food);\r\n        forum_food.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent();\r\n                intent.setClass(getContext(),ClassifiedForumActivity.class);\r\n                intent.putExtra(\"classified\",food);\r\n                getContext().startActivity(intent);\r\n            }\r\n        });\r\n        forum_articles = view.findViewById(R.id.forum_articles);\r\n        forum_articles.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent();\r\n                intent.setClass(getContext(),ClassifiedForumActivity.class);\r\n                intent.putExtra(\"classified\",articles);\r\n                getContext().startActivity(intent);\r\n            }\r\n        });\r\n        forum_daily = view.findViewById(R.id.forum_daily);\r\n        forum_daily.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent();\r\n                intent.setClass(getContext(),ClassifiedForumActivity.class);\r\n                intent.putExtra(\"classified\",daily);\r\n                getContext().startActivity(intent);\r\n            }\r\n        });\r\n        forum_cosmetology = view.findViewById(R.id.forum_cosmetology);\r\n        forum_cosmetology.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent();\r\n                intent.setClass(getContext(),ClassifiedForumActivity.class);\r\n                intent.putExtra(\"classified\",cosmetology);\r\n                getContext().startActivity(intent);\r\n            }\r\n        });\r\n        forum_train = view.findViewById(R.id.forum_train);\r\n        forum_train.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent();\r\n                intent.setClass(getContext(),ClassifiedForumActivity.class);\r\n                intent.putExtra(\"classified\",train);\r\n                getContext().startActivity(intent);\r\n            }\r\n        });\r\n        forum_deworming = view.findViewById(R.id.forum_deworming);\r\n        forum_deworming.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent();\r\n                intent.setClass(getContext(),ClassifiedForumActivity.class);\r\n                intent.putExtra(\"classified\",deworming);\r\n                getContext().startActivity(intent);\r\n            }\r\n        });\r\n        forum_disease = view.findViewById(R.id.forum_disease);\r\n        forum_disease.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent();\r\n                intent.setClass(getContext(),ClassifiedForumActivity.class);\r\n                intent.putExtra(\"classified\",disease);\r\n                getContext().startActivity(intent);\r\n            }\r\n        });\r\n        forum_randomtalk = view.findViewById(R.id.forum_randomtalk);\r\n        forum_randomtalk.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent();\r\n                intent.setClass(getContext(),ClassifiedForumActivity.class);\r\n                intent.putExtra(\"classified\",randomtalk);\r\n                getContext().startActivity(intent);\r\n            }\r\n        });\r\n        forum_question = view.findViewById(R.id.forum_question);\r\n        forum_question.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent();\r\n                intent.setClass(getContext(),ClassifiedForumActivity.class);\r\n                intent.putExtra(\"classified\",question);\r\n                getContext().startActivity(intent);\r\n            }\r\n        });\r\n        forum_sharephotos = view.findViewById(R.id.forum_sharephotos);\r\n        forum_sharephotos.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent();\r\n                intent.setClass(getContext(),ClassifiedForumActivity.class);\r\n                intent.putExtra(\"classified\",sharephotos);\r\n                getContext().startActivity(intent);\r\n            }\r\n        });\r\n        tv_newest = view.findViewById(R.id.forum_newest);\r\n        TextPaint base = tv_newest.getPaint();\r\n        base.setFakeBoldText(true);\r\n        tv_hot = view.findViewById(R.id.forum_hot);\r\n        tv_essence = view.findViewById(R.id.forum_essence);\r\n        tv_newest.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                tv_newest.setBackgroundColor(getResources().getColor(R.color.Blue));\r\n                tv_hot.setBackgroundColor(getResources().getColor(R.color.White));\r\n                tv_essence.setBackgroundColor(getResources().getColor(R.color.White));\r\n                TextPaint newest = tv_newest.getPaint();\r\n                newest.setFakeBoldText(true);\r\n                TextPaint hot = tv_hot.getPaint();\r\n                hot.setFakeBoldText(false);\r\n                TextPaint essence = tv_essence.getPaint();\r\n                essence.setFakeBoldText(false);\r\n            }\r\n        });\r\n        tv_hot.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                tv_newest.setBackgroundColor(getResources().getColor(R.color.White));\r\n                tv_hot.setBackgroundColor(getResources().getColor(R.color.Orange));\r\n                tv_essence.setBackgroundColor(getResources().getColor(R.color.White));\r\n                TextPaint newest = tv_newest.getPaint();\r\n                newest.setFakeBoldText(false);\r\n                TextPaint hot = tv_hot.getPaint();\r\n                hot.setFakeBoldText(true);\r\n                TextPaint essence = tv_essence.getPaint();\r\n                essence.setFakeBoldText(false);\r\n            }\r\n        });\r\n        tv_essence.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                tv_newest.setBackgroundColor(getResources().getColor(R.color.White));\r\n                tv_hot.setBackgroundColor(getResources().getColor(R.color.White));\r\n                tv_essence.setBackgroundColor(getResources().getColor(R.color.Purple));\r\n                TextPaint newest = tv_newest.getPaint();\r\n                newest.setFakeBoldText(false);\r\n                TextPaint hot = tv_hot.getPaint();\r\n                hot.setFakeBoldText(false);\r\n                TextPaint essence = tv_essence.getPaint();\r\n                essence.setFakeBoldText(true);\r\n            }\r\n        });\r\n\r\n        ArrayList<Integer> images = new ArrayList<>();\r\n        ArrayList<String> title = new ArrayList<>();\r\n        title.add(\"新手推荐文章1\");\r\n        title.add(\"新手推荐文章2\");\r\n        title.add(\"新手推荐文章3\");\r\n        title.add(\"新手推荐文章4\");\r\n        title.add(\"新手推荐文章5\");\r\n        images.add(R.drawable.recommend1);\r\n        images.add(R.drawable.recommend2);\r\n        images.add(R.drawable.recommend3);\r\n        images.add(R.drawable.recommend4);\r\n        images.add(R.drawable.recommend5);\r\n\r\n        banner = view.findViewById(R.id.banner);\r\n        banner.setBannerStyle(BannerConfig.CIRCLE_INDICATOR_TITLE_INSIDE);\r\n        banner.setBannerTitles(title);\r\n        banner.setImageLoader(new GlideImageLoader());\r\n        banner.setImages(images);\r\n        banner.start();\r\n\r\n        banner.setOnBannerListener(new OnBannerListener() {\r\n            @Override\r\n            public void OnBannerClick(int position) {\r\n                Intent intent;\r\n                switch (position){\r\n                    case 0:\r\n                        intent = new Intent(getContext(),TipsActivity.class);\r\n                        startActivity(intent);\r\n                        break;\r\n                    case 1:\r\n                        intent = new Intent(getContext(),TipsActivity.class);\r\n                        startActivity(intent);\r\n                        break;\r\n                    case 2:\r\n                        intent = new Intent(getContext(),TipsActivity.class);\r\n                        startActivity(intent);\r\n                        break;\r\n                }\r\n                Log.e(\"点击了第几张轮播图:\",position+\"\");\r\n            }\r\n        });\r\n\r\n        lv_tips = view.findViewById(R.id.lv_tips);\r\n        return view;\r\n    }\r\n\r\n    public void init(ArrayList arrayList){\r\n        Log.e(\"init方法\", \"----------------------------\");\r\n        getImages(arrayList);\r\n        getHeadImages(arrayList);\r\n    }\r\n\r\n    public void getImages(final ArrayList<Tips> arrayList) {\r\n        final CountDownLatch latch = new CountDownLatch(arrayList.size());\r\n\r\n        for (int i = 0; i < arrayList.size(); i ++ ) {\r\n            final Tips tips = arrayList.get(i);\r\n            new Thread(){\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        String path = tips.getImagepath();\r\n                        URL url = new URL(Cache.MY_URL + \"GetImageByPath?path=\" + path);\r\n                        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();\r\n                        InputStream in = urlConnection.getInputStream();\r\n                        Bitmap bitmap = BitmapFactory.decodeStream(in);\r\n                        tips.setThumbnail(bitmap);\r\n                        in.close();\r\n                        latch.countDown();\r\n                    } catch (MalformedURLException e) {\r\n                        e.printStackTrace();\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n\r\n                }\r\n            }.start();\r\n        }\r\n        try {\r\n            latch.await();\r\n            initAdapter();\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    public void getHeadImages(final ArrayList<Tips> arrayList) {\r\n        final CountDownLatch latch = new CountDownLatch(arrayList.size());\r\n\r\n        for (int i = 0; i < arrayList.size(); i ++ ) {\r\n            final Tips tips = arrayList.get(i);\r\n            new Thread(){\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        String path = tips.getHeadImagepath();\r\n                        URL url = new URL(Cache.MY_URL + \"GetImageByPath?path=\" + path);\r\n                        HttpURLConnection urlConnection = (HttpURLConnection) url.openConnection();\r\n                        InputStream in = urlConnection.getInputStream();\r\n                        Bitmap bitmap = BitmapFactory.decodeStream(in);\r\n                        tips.setUserHead(bitmap);\r\n                        in.close();\r\n                        latch.countDown();\r\n                    } catch (MalformedURLException e) {\r\n                        e.printStackTrace();\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n\r\n                }\r\n            }.start();\r\n        }\r\n        try {\r\n            latch.await();\r\n            initAdapter();\r\n        } catch (InterruptedException e) {\r\n            e.printStackTrace();\r\n        }\r\n\r\n    }\r\n\r\n    public void initAdapter() {\r\n        Log.e(\"initAdapter方法\", \"-------------------------\");\r\n        MainForumTipsAdapter mainForumTipsAdapter = new MainForumTipsAdapter(getContext(),arrayList,R.layout.forum_tips_item);\r\n        lv_tips.setAdapter(mainForumTipsAdapter);\r\n    }\r\n\r\n    public void getAllTips(){\r\n        new Thread(){\r\n            @Override\r\n            public void run() {\r\n                try {\r\n                    URL url = new URL(Cache.MY_URL + \"GetAllPostServlet\");\r\n                    HttpURLConnection connection = (HttpURLConnection) url.openConnection();\r\n                    connection.setRequestMethod(\"GET\");\r\n                    InputStream input = connection.getInputStream();\r\n                    BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(input));\r\n                    StringBuffer stringBuffer = new StringBuffer();\r\n                    String line;\r\n                    while ((line=bufferedReader.readLine())!=null){\r\n                        stringBuffer.append(line);\r\n                    }\r\n                    JSONArray jsonArray = new JSONArray(stringBuffer.toString());\r\n                    System.out.println(jsonArray);\r\n                    for (int i=0;i<jsonArray.length();i++){\r\n                        JSONObject jsonObject = jsonArray.getJSONObject(i);\r\n                        int post_id = jsonObject.getInt(\"post_id\");\r\n                        String post_title = jsonObject.getString(\"post_title\");\r\n                        String post_time = jsonObject.getString(\"post_time\");\r\n                        String post_text = jsonObject.getString(\"post_text\");\r\n                        String topic = jsonObject.getString(\"post_topic\");\r\n                        String user_name = jsonObject.getString(\"user_name\");\r\n                        int count_likes = jsonObject.getInt(\"likes\");\r\n                        int count_comments = jsonObject.getInt(\"comments\");\r\n                        int count_forwards = jsonObject.getInt(\"forwards\");\r\n                        String img_path = jsonObject.getString(\"picture_path\");\r\n                        String head_img_path = jsonObject.getString(\"user_picture_path\");\r\n                        Tips tips = new Tips();\r\n                        tips.setId(post_id);\r\n                        tips.setTitle(post_title);\r\n                        tips.setText(post_text);\r\n                        tips.setTime(post_time);\r\n                        tips.setUserName(user_name);\r\n                        tips.setTopic(topic);\r\n                        tips.setLikes(count_likes);\r\n                        tips.setComments(count_comments);\r\n                        tips.setForwards(count_forwards);\r\n                        tips.setImagepath(img_path);\r\n                        tips.setHeadImagepath(head_img_path);\r\n                        arrayList.add(tips);\r\n\r\n                        Log.e(\"post_id\", i + \"\");\r\n\r\n                    }\r\n                    Log.e(\"pppppppppppppppppppppp\", \"------------------\");\r\n                    Message message = handler.obtainMessage();\r\n                    message.what = 1;\r\n                    message.obj = arrayList;\r\n                    handler.sendMessage(message);\r\n                } catch (MalformedURLException e) {\r\n                    e.printStackTrace();\r\n                } catch (ProtocolException e) {\r\n                    e.printStackTrace();\r\n                } catch (IOException e) {\r\n                    e.printStackTrace();\r\n                } catch (JSONException e) {\r\n                    e.printStackTrace();\r\n                }\r\n            }\r\n        }.start();\r\n    }\r\n\r\n    public void search(){\r\n        new Thread(){\r\n            @Override\r\n            public void run() {\r\n                String search = et_search.getText().toString();\r\n            }\r\n        };\r\n    }\r\n\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/pet/forum/ForumFragment.java	(revision 29610c26ecd19152f25749af58dc7f11ca559eb9)
+++ app/src/main/java/com/example/pet/forum/ForumFragment.java	(date 1607073157706)
@@ -82,7 +82,7 @@
     private ListView lv_tips;
     private Banner banner;
     private ArrayList<Tips> arrayList = new ArrayList<>();
-    private ArrayList<Tips> tipsArrayList;
+    private int fenlei;
 
     private Handler handler = new Handler(){
         @Override
@@ -256,6 +256,7 @@
                 hot.setFakeBoldText(false);
                 TextPaint essence = tv_essence.getPaint();
                 essence.setFakeBoldText(false);
+                fenlei = 1;
             }
         });
         tv_hot.setOnClickListener(new View.OnClickListener() {
@@ -270,6 +271,7 @@
                 hot.setFakeBoldText(true);
                 TextPaint essence = tv_essence.getPaint();
                 essence.setFakeBoldText(false);
+                fenlei = 2;
             }
         });
         tv_essence.setOnClickListener(new View.OnClickListener() {
@@ -284,6 +286,7 @@
                 hot.setFakeBoldText(false);
                 TextPaint essence = tv_essence.getPaint();
                 essence.setFakeBoldText(true);
+                fenlei = 3;
             }
         });
 
@@ -420,7 +423,7 @@
             @Override
             public void run() {
                 try {
-                    URL url = new URL(Cache.MY_URL + "GetAllPostServlet");
+                    URL url = new URL(Cache.MY_URL + "GetAllPostServlet?fenlei="+fenlei);
                     HttpURLConnection connection = (HttpURLConnection) url.openConnection();
                     connection.setRequestMethod("GET");
                     InputStream input = connection.getInputStream();
Index: app/src/main/java/com/example/pet/forum/MainForumTipsAdapter.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.pet.forum;\r\n\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.os.Build;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.BaseAdapter;\r\nimport android.widget.Button;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.pet.R;\r\nimport com.example.pet.other.entity.Tips;\r\n\r\nimport java.util.ArrayList;\r\n\r\npublic class MainForumTipsAdapter extends BaseAdapter {\r\n\r\n    private Context context;\r\n    private ArrayList<Tips> tipsArrayList = new ArrayList<>();\r\n    private int tipslayout;\r\n\r\n    public MainForumTipsAdapter(Context context, ArrayList<Tips> tipsArrayList, int tipslayout) {\r\n        this.context = context;\r\n        this.tipsArrayList = tipsArrayList;\r\n        this.tipslayout = tipslayout;\r\n    }\r\n\r\n    public Context getContext(){\r\n        return context;\r\n    }\r\n\r\n    @Override\r\n    public int getCount() {\r\n        if (tipsArrayList == null){\r\n            return 0;\r\n        }\r\n        return tipsArrayList.size();\r\n    }\r\n\r\n    @Override\r\n    public Object getItem(int position) {\r\n        if (tipsArrayList == null){\r\n            return null;\r\n        }\r\n        return tipsArrayList.get(position);\r\n    }\r\n\r\n    @Override\r\n    public long getItemId(int position) {\r\n        return position;\r\n    }\r\n\r\n    @Override\r\n    public View getView(final int position, View convertView, ViewGroup parent) {\r\n        if (convertView == null){\r\n            convertView = LayoutInflater.from(context).inflate(tipslayout,null);\r\n        }\r\n        ImageView landlordhead = convertView.findViewById(R.id.iv_tips_landlordhead);\r\n        landlordhead.setImageBitmap(tipsArrayList.get(position).getUserHead());\r\n        landlordhead.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent();\r\n                intent.setClass(getContext(),LandlordActivity.class);\r\n                getContext().startActivity(intent);\r\n\r\n            }\r\n        });\r\n        TextView landlordname = convertView.findViewById(R.id.tv_tips_landlordname);\r\n        landlordname.setText(tipsArrayList.get(position).getUserName());\r\n        TextView tipstime = convertView.findViewById(R.id.tv_tips_tipstime);\r\n        tipstime.setText(tipsArrayList.get(position).getTime());\r\n        Button tipstopic = convertView.findViewById(R.id.btn_tips_topic);\r\n        tipstopic.setText(tipsArrayList.get(position).getTopic());\r\n        TextView tipstitle = convertView.findViewById(R.id.tv_tips_tipstitle);\r\n        tipstitle.setText(tipsArrayList.get(position).getTitle());\r\n        ImageView tipsthumbnail = convertView.findViewById(R.id.iv_tips_thumbnail);\r\n        tipsthumbnail.setImageBitmap(tipsArrayList.get(position).getThumbnail());\r\n        TextView tipstext = convertView.findViewById(R.id.tv_tips_text);\r\n        String str = tipsArrayList.get(position).getText();\r\n        int i = 40;\r\n        str = str.substring(0,i) + \"...\";\r\n        tipstext.setText(str);\r\n        TextView tipslikes = convertView.findViewById(R.id.tv_tips_like);\r\n        tipslikes.setText(\"\"+tipsArrayList.get(position).getLikes());\r\n        TextView tipscomments = convertView.findViewById(R.id.tv_tips_comment);\r\n        tipscomments.setText(\"\"+tipsArrayList.get(position).getComments());\r\n        TextView tipsforwards = convertView.findViewById(R.id.tv_tips_forward);\r\n        tipsforwards.setText(\"\"+tipsArrayList.get(position).getForwards());\r\n        LinearLayout totips = convertView.findViewById(R.id.btn_tips_totips);\r\n        totips.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent();\r\n                intent.setClass(getContext(),TipsActivity.class);\r\n                int i = tipsArrayList.get(position).getId();\r\n                String id = Integer.toString(i);\r\n                Log.e(\"St id\", id);\r\n                intent.putExtra(\"tipsid\",id);\r\n                context.startActivity(intent);\r\n            }\r\n        });\r\n        LinearLayout tipslike = convertView.findViewById(R.id.tips_like);\r\n        final ImageView iv_like = convertView.findViewById(R.id.iv_tips_like);\r\n        tipslike.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {\r\n                    if (iv_like.getDrawable().getConstantState().equals(getContext().getDrawable(R.drawable.like1).getConstantState())){\r\n                        iv_like.setImageResource(R.drawable.like2);\r\n                    }else{\r\n                        Toast toast = Toast.makeText(context,\"您已经点赞过了\"\r\n                                , Toast.LENGTH_SHORT);\r\n                        toast.show();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        LinearLayout tipscomment = convertView.findViewById(R.id.tips_comment);\r\n        tipscomment.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent();\r\n                intent.setClass(getContext(),TipsActivity.class);\r\n                intent.putExtra(\"tipsid\",tipsArrayList.get(position).getId());\r\n                context.startActivity(intent);\r\n            }\r\n        });\r\n        LinearLayout tipsforward = convertView.findViewById(R.id.tips_forward);\r\n        final ImageView iv_forward = convertView.findViewById(R.id.iv_tips_forward);\r\n        tipsforward.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                if (Build.VERSION.SDK_INT >= Build.VERSION_CODES.LOLLIPOP) {\r\n                    if (iv_forward.getDrawable().getConstantState().equals(getContext().getDrawable(R.drawable.forward1).getConstantState())){\r\n                        iv_forward.setImageResource(R.drawable.forward2);\r\n                    }else{\r\n                        Toast toast = Toast.makeText(context,\"您已经转发过了\"\r\n                                , Toast.LENGTH_SHORT);\r\n                        toast.show();\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        return convertView;\r\n    }\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/pet/forum/MainForumTipsAdapter.java	(revision 29610c26ecd19152f25749af58dc7f11ca559eb9)
+++ app/src/main/java/com/example/pet/forum/MainForumTipsAdapter.java	(date 1607061008433)
@@ -18,6 +18,7 @@
 import com.example.pet.other.entity.Tips;
 
 import java.util.ArrayList;
+import java.util.concurrent.TimeUnit;
 
 public class MainForumTipsAdapter extends BaseAdapter {
 
