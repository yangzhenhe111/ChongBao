Index: app/src/main/AndroidManifest.xml
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.pet\"\r\n    android:versionCode=\"3\"\r\n    android:versionName=\"1.0.0\">\r\n\r\n    <permission\r\n        android:name=\"com.example.pet.permission.JPUSH_MESSAGE\"\r\n        android:protectionLevel=\"signature\" />\r\n\r\n    <uses-permission android:name=\"android.permission.EXPAND_STATUS_BAR\" />\r\n    <uses-permission android:name=\"android.permission.RECEIVE_USER_PRESENT\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"android.permission.WAKE_LOCK\" />\r\n    <uses-permission android:name=\"android.permission.READ_PHONE_STATE\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.VIBRATE\" />\r\n    <uses-permission\r\n        android:name=\"android.permission.MOUNT_UNMOUNT_FILESYSTEMS\"\r\n        tools:ignore=\"ProtectedPermissions\" />\r\n    <uses-permission\r\n        android:name=\"android.permission.WRITE_SETTINGS\"\r\n        tools:ignore=\"ProtectedPermissions\" /> <!-- Optional. Required for location feature -->\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.CHANGE_NETWORK_STATE\" />\r\n    <uses-permission android:name=\"android.permission.GET_TASKS\" /> <!-- Required -->\r\n    <!-- Optional. Required for location feature -->\r\n    <uses-permission android:name=\"android.permission.SYSTEM_ALERT_WINDOW\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_LOCATION_EXTRA_COMMANDS\" />\r\n    <uses-permission android:name=\"com.example.liaotian.permission.JPUSH_MESSAGE\" /> <!-- Required for jmrtc -->\r\n    <uses-permission android:name=\"android.permission.RECORD_AUDIO\" />\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n    <uses-permission android:name=\"android.permission.MODIFY_AUDIO_SETTINGS\" />\r\n    <uses-permission android:name=\"com.android.launcher.permission.READ_SETTINGS\" />\r\n    <uses-permission android:name=\"${applicationId}.permission.JPUSH_MESSAGE\" />\r\n    <uses-permission android:name=\"android.permission.CHANGE_WIFI_STATE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_WIFI_STATE\" />\r\n    <uses-permission android:name=\"android.permission.FOREGROUND_SERVICE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" />\r\n\r\n    <application\r\n        android:name=\".chat.BaseApplication\"\r\n        android:allowBackup=\"true\"\r\n        android:label=\"@string/app_name\"\r\n        android:largeHeap=\"true\"\r\n        android:networkSecurityConfig=\"@xml/network_security_config\"\r\n        android:roundIcon=\"@drawable/lastlogo\"\r\n        android:sharedUserId=\"android.uid.system\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/AppTheme\"\r\n        android:usesCleartextTraffic=\"true\">\r\n\r\n        <activity\r\n            android:name=\".my.editinfo.EditInfo\"\r\n            tools:ignore=\"MissingClass\" />\r\n        <activity android:name=\".chat.Friends\" />\r\n        <activity android:name=\".chat.MyFollowActivity\" />\r\n        <activity android:name=\".my.NewPet\" />\r\n        <activity android:name=\".LoadingActivity\" />\r\n        <activity android:name=\".my.editinfo.AddAddress\" />\r\n        <activity android:name=\".my.editinfo.EditAddress\" />\r\n        <activity android:name=\".my.AddressManage\" />\r\n        <activity android:name=\".my.AcountSecurity\" />\r\n        <activity android:name=\".my.ConnectUs\" />\r\n        <activity android:name=\".my.order.MyOrderActivity\" />\r\n        <activity android:name=\".my.OrderComplete\" />\r\n        <activity android:name=\".my.FunIntroduction\" />\r\n        <activity android:name=\".my.AboutUsLaw\" />\r\n        <activity android:name=\".my.Agreement\" />\r\n        <activity android:name=\".my.Order2\" />\r\n        <activity android:name=\".my.Register\" />\r\n        <activity android:name=\".my.Update\" />\r\n        <activity android:name=\".my.Check\" />\r\n        <activity android:name=\".my.Login\" />\r\n        <activity android:name=\".my.PetActivity\" />\r\n        <activity android:name=\".my.History\" />\r\n        <activity android:name=\".my.AboutUs\" />\r\n        <activity android:name=\".my.Setting\" />\r\n        <activity android:name=\".my.Post\" />\r\n        <activity android:name=\".forum.LandlordActivity\" />\r\n        <activity android:name=\".forum.TipsActivity\" />\r\n        <activity android:name=\".forum.TopicActivity\" />\r\n        <activity android:name=\".chat.Booking\" />\r\n        <activity android:name=\".chat.ChatMsgActivity\" />\r\n        <activity android:name=\".chat.AddFriendMsgActivity\" />\r\n        <activity android:name=\".chat.BaseActivity\" />\r\n        <activity android:name=\".chat.MsgVideoActivity\" />\r\n        <activity android:name=\".chat.UserActivty\" />\r\n        <activity android:name=\".chat.UserInfoActivity\" />\r\n        <activity android:name=\".chat.UserInfoOptionsActivity\" />\r\n        <activity android:name=\".forum.PublishActivity\" />\r\n        <activity android:name=\".nursing.CancelActivity\" />\r\n        <activity android:name=\".nursing.JiedanActivity\" />\r\n        <activity android:name=\".nursing.ChoiceActivity\" />\r\n        <activity android:name=\".nursing.XuzhiActivity\" />\r\n        <activity android:name=\".nursing.Choice2Activity\" />\r\n        <activity android:name=\".nursing.ChangehisActivity\" />\r\n        <activity android:name=\".nursing.EndActivity\" />\r\n        <activity android:name=\".nursing.StartActivity\" />\r\n        <activity android:name=\".nursing.NeworderActivity\" />\r\n        <activity android:name=\".nursing.CostActivity\" />\r\n        <activity android:name=\".forum.SearchResult\" />\r\n        <activity android:name=\".forum.New_post_detail\" />\r\n        <activity android:name=\".my.AcountManage\" />\r\n        <activity android:name=\".MainActivity\" />\r\n\r\n        <meta-data\r\n            android:name=\"com.baidu.lbsapi.API_KEY\"\r\n            android:value=\"Gy6t4iVa5bjCYSlblHYFLNKNCFmABmH3\" />\r\n\r\n        <service\r\n            android:name=\"com.baidu.location.f\"\r\n            android:enabled=\"true\"\r\n            android:process=\":remote\">\r\n            <intent-filter>\r\n                <action android:name=\"com.baidu.location.service_v5.0.0\" />\r\n            </intent-filter>\r\n        </service>\r\n\r\n        <provider\r\n            android:name=\"androidx.core.content.FileProvider\"\r\n            android:authorities=\"com.example.pet.fileProvider\"\r\n            android:exported=\"false\"\r\n            android:grantUriPermissions=\"true\">\r\n            <meta-data\r\n                android:name=\"android.support.FILE_PROVIDER_PATHS\"\r\n                android:resource=\"@xml/provider_paths\" />\r\n        </provider>\r\n        <provider\r\n            android:name=\"cn.jpush.im.android.helpers.ipc.IMProvider\"\r\n            android:authorities=\"com.example.pet.jpushim.IMProvider\"\r\n            android:exported=\"false\" />\r\n\r\n        <activity\r\n            android:name=\".Start1Activity\"\r\n            android:windowSoftInputMode=\"adjustPan\">\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n                <category android:name=\"android.intent.category.LAUNCHER\" />\r\n            </intent-filter>\r\n        </activity>\r\n        <activity\r\n            android:name=\"cn.jpush.android.ui.PushActivity\"\r\n            android:configChanges=\"orientation|keyboardHidden\"\r\n            android:exported=\"false\"\r\n            android:theme=\"@android:style/Theme.NoTitleBar\">\r\n            <intent-filter>\r\n                <action android:name=\"cn.jpush.android.ui.PushActivity\" />\r\n\r\n                <category android:name=\"android.intent.category.DEFAULT\" />\r\n                <category android:name=\"${applicationId}\" />\r\n            </intent-filter>\r\n        </activity> <!-- Required SDK 核心功能 -->\r\n        <provider\r\n            android:name=\"cn.jpush.android.service.DataProvider\"\r\n            android:authorities=\"${applicationId}.DataProvider\"\r\n            android:exported=\"false\"\r\n            android:process=\":pushcore\" /> <!-- Required SDK核心功能 -->\r\n        <service android:name=\".my.MyUserService\" />\r\n\r\n        <receiver\r\n            android:name=\"cn.jpush.android.service.PushReceiver\"\r\n            android:enabled=\"true\">\r\n            <intent-filter android:priority=\"1000\">\r\n                <action android:name=\"cn.jpush.android.intent.NOTIFICATION_RECEIVED_PROXY\" /> <!-- Required  显示通知栏 -->\r\n                <category android:name=\"${applicationId}\" />\r\n            </intent-filter>\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.USER_PRESENT\" />\r\n                <action android:name=\"android.net.conn.CONNECTIVITY_CHANGE\" />\r\n            </intent-filter>\r\n            <!-- Optional -->\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.PACKAGE_ADDED\" />\r\n                <action android:name=\"android.intent.action.PACKAGE_REMOVED\" />\r\n\r\n                <data android:scheme=\"package\" />\r\n            </intent-filter>\r\n        </receiver> <!-- Required SDK核心功能 -->\r\n        <receiver\r\n            android:name=\"cn.jpush.android.service.AlarmReceiver\"\r\n            android:exported=\"false\" /> <!-- User defined.  For test only  用户自定义接收消息器,3.0.7开始支持,目前新tag/alias接口设置结果会在该广播接收器对应的方法中回调 -->\r\n        <!-- since 3.3.0 接收JPush相关事件 -->\r\n        <receiver\r\n            android:name=\".other.JpushReceiver\"\r\n            android:enabled=\"true\"\r\n            android:exported=\"false\">\r\n            <intent-filter>\r\n                <action android:name=\"cn.jpush.android.intent.RECEIVE_MESSAGE\" />\r\n\r\n                <category android:name=\"${applicationId}\" />\r\n            </intent-filter>\r\n        </receiver> <!-- since 3.3.0 Required SDK核心功能 -->\r\n        <activity\r\n            android:name=\"cn.jpush.android.service.JNotifyActivity\"\r\n            android:exported=\"false\"\r\n            android:taskAffinity=\"jpush.custom\"\r\n            android:theme=\"@android:style/Theme.Translucent.NoTitleBar\">\r\n            <intent-filter>\r\n                <action android:name=\"cn.jpush.android.intent.JNotifyActivity\" />\r\n\r\n                <category android:name=\"${applicationId}\" />\r\n            </intent-filter>\r\n        </activity> <!-- since 3.3.0 Required SDK 核心功能 -->\r\n        <!-- 可配置android:process参数将PushService放在其他进程中 -->\r\n        <!-- User defined.  For test only 继承自cn.jpush.android.service.JCommonService -->\r\n        <service\r\n            android:name=\".other.JpushService\"\r\n            android:enabled=\"true\"\r\n            android:exported=\"false\"\r\n            android:process=\":pushcore\">\r\n            <intent-filter>\r\n                <action android:name=\"cn.jiguang.user.service.action\" />\r\n            </intent-filter>\r\n        </service>\r\n\r\n        <receiver\r\n            android:name=\"cn.jpush.im.android.helpers.IMReceiver\"\r\n            android:enabled=\"true\"\r\n            android:exported=\"false\" />\r\n\r\n        <service android:name=\".my.MyDataService\" /> <!-- Required SDK 核心功能 -->\r\n        <!-- 可配置android:process参数将PushService放在其他进程中 -->\r\n        <meta-data\r\n            android:name=\"JPUSH_CHANNEL\"\r\n            android:value=\"developer-default\" />\r\n        <meta-data\r\n            android:name=\"JPUSH_APPKEY\"\r\n            android:value=\"7153b7916be94ab289793e76\" />\r\n    </application>\r\n\r\n</manifest>
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/AndroidManifest.xml	(revision 4b04f5bd4079bf12e67873d0392acd36473bc843)
+++ app/src/main/AndroidManifest.xml	(date 1608104904542)
@@ -42,6 +42,7 @@
     <uses-permission android:name="android.permission.ACCESS_NETWORK_STATE" />
 
     <application
+
         android:name=".chat.BaseApplication"
         android:allowBackup="true"
         android:label="@string/app_name"
Index: app/src/main/java/com/example/pet/my/editinfo/EditAddress.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.pet.my.editinfo;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.widget.EditText;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.pet.R;\r\nimport com.example.pet.nursing.HisAddress;\r\nimport com.example.pet.other.Cache;\r\nimport com.example.pet.other.entity.Address;\r\nimport com.google.gson.Gson;\r\n\r\nimport java.io.IOException;\r\n\r\nimport okhttp3.Call;\r\nimport okhttp3.Callback;\r\nimport okhttp3.MediaType;\r\nimport okhttp3.OkHttpClient;\r\nimport okhttp3.Request;\r\nimport okhttp3.RequestBody;\r\nimport okhttp3.Response;\r\n\r\npublic class EditAddress extends AppCompatActivity {\r\n    private HisAddress hisAddress;\r\n    private EditText etName;\r\n    private EditText etCity;\r\n    private EditText etDetail;\r\n    private EditText etPhone;\r\n    private TextView tvSave;\r\n    private int isPost;\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_edit_address);\r\n        Intent intent = getIntent();\r\n        hisAddress = (HisAddress) intent.getSerializableExtra(\"index\");\r\n        setViewContent();\r\n    }\r\n\r\n    private void setViewContent() {\r\n        Toolbar toolbar = findViewById(R.id.edit_toolbar);\r\n        toolbar.setNavigationOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                EditAddress.this.finish();\r\n            }\r\n        });\r\n        etName= findViewById(R.id.address_name);\r\n        etCity = findViewById(R.id.address_city);\r\n        etDetail = findViewById(R.id.address_detail);\r\n        etPhone = findViewById(R.id.address_phone);\r\n        tvSave = findViewById(R.id.address_save);\r\n        etName.setText(hisAddress.getName());\r\n        String str = hisAddress.getAdd();\r\n        int index = str.indexOf(\"市\");\r\n        etCity.setText(str.substring(0, index + 1));\r\n        etDetail.setText(str.substring(index + 1));\r\n        etPhone.setText(hisAddress.getTel());\r\n    }\r\n\r\n    public void onClicked(View view) {\r\n        switch (view.getId()) {\r\n            case R.id.address_delete:\r\n                DeleteAddress();\r\n                break;\r\n            case R.id.address_save:\r\n                if (etName.getText().toString() != null\r\n                        && etCity.getText().toString() != null\r\n                        && etDetail.getText().toString() != null\r\n                        && etPhone.getText().toString() != null) {\r\n                    UpAddress();\r\n                } else {\r\n                    Toast.makeText(EditAddress.this, \"所填信息不全\", Toast.LENGTH_LONG).show();\r\n                }\r\n                break;\r\n        }\r\n    }\r\n\r\n    private void UpAddress() {\r\n        Address address = new Address();\r\n        address.setId(hisAddress.getId());\r\n        address.setAddress(etCity.getText().toString() + etDetail.getText().toString());\r\n        address.setPeople(etName.getText().toString());\r\n        address.setTel(etPhone.getText().toString());\r\n        OkHttpClient okHttpClient = new OkHttpClient();\r\n        RequestBody requestBody = RequestBody.create(MediaType.parse(\"text/plain;charset=utf-8\"), new Gson().toJson(address));\r\n        Request request = new Request.Builder().post(requestBody).url(Cache.MY_URL + \"UpdateAddress\").build();\r\n        Call call = okHttpClient.newCall(request);\r\n        call.enqueue(new Callback() {\r\n            @Override\r\n            public void onFailure(Call call, IOException e) {\r\n\r\n                Log.e(\"StartActivity\", \"上传地址失败\");\r\n            }\r\n\r\n            @Override\r\n            public void onResponse(Call call, Response response) throws IOException {\r\n                Log.e(\"StartActivity\", \"上传地址成功\");\r\n            }\r\n        });\r\n\r\n    }\r\n\r\n    private void DeleteAddress() {\r\n        OkHttpClient okHttpClient = new OkHttpClient();\r\n        Request request = new Request.Builder().url(Cache.MY_URL + \"DeleteAddress?id=\" + hisAddress.getId()).build();\r\n        Call call = okHttpClient.newCall(request);\r\n        call.enqueue(new Callback() {\r\n            @Override\r\n            public void onFailure(Call call, IOException e) {\r\n\r\n            }\r\n            @Override\r\n            public void onResponse(Call call, Response response) throws IOException {\r\n                Log.e(\"EditActivity\", \"修改成功\");\r\n            }\r\n        });\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/pet/my/editinfo/EditAddress.java	(revision 4b04f5bd4079bf12e67873d0392acd36473bc843)
+++ app/src/main/java/com/example/pet/my/editinfo/EditAddress.java	(date 1608105839704)
@@ -1,5 +1,6 @@
 package com.example.pet.my.editinfo;
 
+import androidx.appcompat.app.AlertDialog;
 import androidx.appcompat.app.AppCompatActivity;
 import androidx.appcompat.widget.Toolbar;
 
@@ -19,6 +20,7 @@
 
 import java.io.IOException;
 
+import cn.pedant.SweetAlert.SweetAlertDialog;
 import okhttp3.Call;
 import okhttp3.Callback;
 import okhttp3.MediaType;
@@ -69,7 +71,10 @@
     public void onClicked(View view) {
         switch (view.getId()) {
             case R.id.address_delete:
-                DeleteAddress();
+
+                                DeleteAddress();
+
+
                 break;
             case R.id.address_save:
                 if (etName.getText().toString() != null
Index: app/src/main/java/com/example/pet/my/Setting.java
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>package com.example.pet.my;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ListView;\r\n\r\nimport com.example.pet.R;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class Setting extends AppCompatActivity {\r\n    private Toolbar toolbar;\r\n    private List<My> myList1 = new ArrayList<>();\r\n    private List<My> myList2 = new ArrayList<>();\r\n    private List<My> myList3 = new ArrayList<>();\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_setting);\r\n        //获得控件\r\n        setView();\r\n        //生成数据\r\n        initData();\r\n    }\r\n\r\n    private void initData() {\r\n        My my1 = new My(R.drawable.acount, \"账号管理\", R.drawable.next);\r\n        myList1.add(my1);\r\n        My my4 = new My(R.drawable.updatepassword, \"修改密码\", R.drawable.next);\r\n        myList1.add(my4);\r\n        My my2 = new My(R.drawable.address, \"地址管理\", R.drawable.next);\r\n        myList2.add(my2);\r\n        My my3 = new My(R.drawable.pay, \"支付设置\", R.drawable.next);\r\n        myList3.add(my3);\r\n    }\r\n\r\n    private void setView() {\r\n        toolbar = findViewById(R.id.setting_toolbar);\r\n        toolbar.setNavigationOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Setting.this.finish();\r\n            }\r\n        });\r\n        //适配第一个listView\r\n        MyAdapter myAdapter1 = new MyAdapter(this, R.layout.my_listview, myList1);\r\n        ListView listView1 = (ListView) findViewById(R.id.setting_listview1);\r\n        listView1.setAdapter(myAdapter1);\r\n        //适配第二个listView\r\n        MyAdapter myAdapter2 = new MyAdapter(this, R.layout.my_listview, myList2);\r\n        ListView listView2 = (ListView) findViewById(R.id.setting_listview2);\r\n        listView2.setAdapter(myAdapter2);\r\n        listView2.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                Intent intent = new Intent(Setting.this,AddressManage.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        //适配第三个listView\r\n        MyAdapter myAdapter3 = new MyAdapter(this, R.layout.my_listview, myList3);\r\n        ListView listView3 = (ListView) findViewById(R.id.setting_listview3);\r\n        listView3.setAdapter(myAdapter3);\r\n        listView1.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                switch (position){\r\n                    case 0:\r\n                        Intent intent = new Intent(Setting.this,AcountManage.class);\r\n                        startActivity(intent);\r\n                        break;\r\n                    case 1:\r\n                        Intent intent1 = new Intent(Setting.this,Update.class);\r\n                        intent1.putExtra(\"title\",\"修改密码\");\r\n                        startActivity(intent1);\r\n                        break;\r\n                }\r\n            }\r\n        });\r\n\r\n    }\r\n}
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/src/main/java/com/example/pet/my/Setting.java	(revision 4b04f5bd4079bf12e67873d0392acd36473bc843)
+++ app/src/main/java/com/example/pet/my/Setting.java	(date 1608103096079)
@@ -18,7 +18,7 @@
     private Toolbar toolbar;
     private List<My> myList1 = new ArrayList<>();
     private List<My> myList2 = new ArrayList<>();
-    private List<My> myList3 = new ArrayList<>();
+   // private List<My> myList3 = new ArrayList<>();
 
     @Override
     protected void onCreate(Bundle savedInstanceState) {
@@ -38,7 +38,7 @@
         My my2 = new My(R.drawable.address, "地址管理", R.drawable.next);
         myList2.add(my2);
         My my3 = new My(R.drawable.pay, "支付设置", R.drawable.next);
-        myList3.add(my3);
+       // myList3.add(my3);
     }
 
     private void setView() {
@@ -65,25 +65,25 @@
             }
         });
         //适配第三个listView
-        MyAdapter myAdapter3 = new MyAdapter(this, R.layout.my_listview, myList3);
-        ListView listView3 = (ListView) findViewById(R.id.setting_listview3);
-        listView3.setAdapter(myAdapter3);
-        listView1.setOnItemClickListener(new AdapterView.OnItemClickListener() {
-            @Override
-            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
-                switch (position){
-                    case 0:
-                        Intent intent = new Intent(Setting.this,AcountManage.class);
-                        startActivity(intent);
-                        break;
-                    case 1:
-                        Intent intent1 = new Intent(Setting.this,Update.class);
-                        intent1.putExtra("title","修改密码");
-                        startActivity(intent1);
-                        break;
-                }
-            }
-        });
+//        MyAdapter myAdapter3 = new MyAdapter(this, R.layout.my_listview, myList3);
+//        ListView listView3 = (ListView) findViewById(R.id.setting_listview3);
+//        listView3.setAdapter(myAdapter3);
+//        listView1.setOnItemClickListener(new AdapterView.OnItemClickListener() {
+//            @Override
+//            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
+//                switch (position){
+//                    case 0:
+//                        Intent intent = new Intent(Setting.this,AcountManage.class);
+//                        startActivity(intent);
+//                        break;
+//                    case 1:
+//                        Intent intent1 = new Intent(Setting.this,Update.class);
+//                        intent1.putExtra("title","修改密码");
+//                        startActivity(intent1);
+//                        break;
+//                }
+//            }
+//        });
 
     }
 }
\ No newline at end of file
Index: build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>// Top-level build file where you can add configuration options common to all sub-projects/modules.\r\n\r\nbuildscript {\r\n    repositories {\r\n        maven { url 'https://jitpack.io' }\r\n\r\n        google()\r\n        jcenter()\r\n        \r\n    }\r\n    dependencies {\r\n        classpath 'com.android.tools.build:gradle:4.1.1'\r\n        classpath \"com.mob.sdk:MobSDK:2018.0319.1724\"\r\n        // NOTE: Do not place your application dependencies here; they belong\r\n        // in the individual module build.gradle files\r\n    }\r\n}\r\n\r\nallprojects {\r\n    repositories {\r\n        maven { url 'https://jitpack.io' }\r\n\r\n        google()\r\n        jcenter()\r\n        \r\n    }\r\n}\r\n\r\ntask clean(type: Delete) {\r\n    delete rootProject.buildDir\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- build.gradle	(revision 4b04f5bd4079bf12e67873d0392acd36473bc843)
+++ build.gradle	(date 1608104163627)
@@ -3,7 +3,7 @@
 buildscript {
     repositories {
         maven { url 'https://jitpack.io' }
-
+        mavenCentral()
         google()
         jcenter()
         
Index: app/build.gradle
IDEA additional info:
Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
<+>apply plugin: 'com.android.application'\r\napply plugin: 'com.mob.sdk'\r\nMobSDK {\r\n    appKey \"31a0f08bbf072\"\r\n    appSecret \"a79d0868be86ae529a738c482cad4829\"\r\n    SMSSDK {}\r\n//    fp true //严格模式\r\n}\r\nandroid {\r\n    sourceSets {\r\n        main {\r\n            jniLibs.srcDirs = ['libs']\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility 1.8\r\n        targetCompatibility 1.8\r\n    }\r\n    compileSdkVersion 30\r\n    buildToolsVersion \"30.0.2\"\r\n    defaultConfig {\r\n        applicationId \"com.example.pet\"\r\n        minSdkVersion 19\r\n        targetSdkVersion 30\r\n        versionCode 1\r\n        manifestPlaceholders = [\r\n                JPUSH_PKGNAME: applicationId,\r\n                JPUSH_APPKEY : \"7153b7916be94ab289793e76\",\r\n                JPUSH_CHANNEL: \"developer-default\",\r\n        ]\r\n        versionName \"1.0\"\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n        multiDexEnabled true\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility JavaVersion.VERSION_1_8\r\n        targetCompatibility JavaVersion.VERSION_1_8\r\n    }\r\n}\r\n\r\ndependencies {\r\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\r\n    testImplementation 'junit:junit:4.12'\r\n//swipeLayout\r\n    implementation \"com.daimajia.swipelayout:library:1.2.0@aar\"\r\n\r\n    implementation 'com.daimajia.easing:library:1.0.0@aar'\r\n    implementation 'com.daimajia.androidanimations:library:1.1.2@aar'\r\n    implementation 'com.nineoldandroids:library:2.4.0'\r\n    implementation 'com.github.Blincheng:AddressSelector:v1.0.4'\r\n    implementation 'com.github.Blincheng:AddressSelector:Tag'\r\n    //TabHost相关\r\n    implementation 'com.android.support:multidex:1.0.3'\r\n    implementation 'com.google.android.material:material:1.2.1'\r\n    implementation 'androidx.appcompat:appcompat:1.2.0'\r\n    implementation 'com.bigkoo:svprogresshud:1.0.6'\r\n    implementation 'com.rohit.recycleritemclicksupport:recycleritemclicksupport:1.0.1'\r\n    //noinspection GradleCompatible\r\n    implementation 'com.android.support:design:26.1.0'\r\n    implementation 'com.astuetz:pagerslidingtabstrip:1.0.1'\r\n    implementation 'pl.droidsonroids.gif:android-gif-drawable:1.2.3'\r\n    implementation 'com.scwang.smartrefresh:SmartRefreshLayout:1.1.0-alpha-12'\r\n    implementation 'org.greenrobot:eventbus:3.1.1'\r\n    implementation 'com.contrarywind:Android-PickerView:4.1.9'\r\n    implementation 'com.github.LuckSiege.PictureSelector:picture_library:v2.6.0'\r\n    implementation 'com.google.code.gson:gson:2.8.5'\r\n    implementation 'com.squareup.okhttp3:okhttp:3.10.0'\r\n    implementation 'com.github.zcweng:switch-button:0.0.3@aar'\r\n    implementation 'com.zhy:percent-support-extends:1.1.1'\r\n    implementation 'com.youth.banner:banner:1.4.10'\r\n    implementation 'com.github.bumptech.glide:glide:4.11.0'\r\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\r\n    implementation 'androidx.cardview:cardview:1.0.0'\r\n    implementation 'androidx.viewpager:viewpager:1.0.0'\r\n    implementation files('libs\\\\jsms_android-1.2.2.jar')\r\n    implementation files('libs\\\\janalytics-android-1.2.2.jar')\r\n    annotationProcessor 'com.github.bumptech.glide:compiler:4.11.0'\r\n    implementation 'de.hdodenhof:circleimageview:3.1.0'\r\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\r\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\r\n    testImplementation 'junit:junit:4.12'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.1'\r\n    implementation files('libs\\\\BaiduLBS_Android.jar')\r\n    implementation files('libs\\\\jcore-android-2.4.0.jar')\r\n    implementation files('libs\\\\jpush-android-3.6.8.jar')\r\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\r\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\r\n    implementation 'cn.jiguang.imui:messagelist:0.4.3'\r\n    implementation 'cn.jiguang.imui:chatinput:0.10.0'\r\n    implementation 'org.greenrobot:greendao:3.2.0'\r\n    implementation 'com.github.yuweiguocn:GreenDaoUpgradeHelper:v1.4.0'\r\n    implementation 'com.jakewharton:butterknife:10.2.1'\r\n    annotationProcessor 'com.jakewharton:butterknife-compiler:10.2.1'\r\n    implementation 'com.nineoldandroids:library:2.4.0'\r\n    implementation 'com.flyco.tablayout:FlycoTabLayout_Lib:2.0.0@aar'\r\n    implementation 'com.bartoszlipinski:recyclerviewheader2:2.0.1'\r\n    implementation 'in.srain.cube:ultra-ptr:1.0.11'\r\n    implementation 'com.squareup.picasso:picasso:2.5.2'\r\n    implementation 'com.kyleduo.switchbutton:library:1.4.6'\r\n    implementation 'com.airbnb.android:lottie:2.2.0'\r\n    implementation 'com.squareup.retrofit2:retrofit:2.3.0'\r\n    implementation 'com.squareup.retrofit2:converter-gson:2.3.0'\r\n    implementation 'com.github.w446108264:XhsEmoticonsKeyboard:2.0.4'\r\n    implementation 'com.blankj:utilcode:1.13.4'\r\n    implementation 'com.github.CymChad:BaseRecyclerViewAdapterHelper:2.9.44'\r\n    implementation 'jp.wasabeef:glide-transformations:3.0.1'\r\n    implementation 'com.github.w446108264:AndroidEmoji:1.3'\r\n}\r\n
Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
<+>UTF-8
===================================================================
--- app/build.gradle	(revision 4b04f5bd4079bf12e67873d0392acd36473bc843)
+++ app/build.gradle	(date 1608105839713)
@@ -39,6 +39,7 @@
 }
 
 dependencies {
+
     implementation fileTree(dir: 'libs', include: ['*.jar'])
     testImplementation 'junit:junit:4.12'
 //swipeLayout
Index: .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_9_8_06__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_9_8_06__Default_Changelist_.xml	(revision 4b04f5bd4079bf12e67873d0392acd36473bc843)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_9_8_06__Default_Changelist_.xml	(revision 4b04f5bd4079bf12e67873d0392acd36473bc843)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_2020_12_9_8_06_[Default_Changelist]" date="1607472516995" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_2020_12_9_8_06_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 2020/12/9 8:06 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_9_14_39__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_9_14_39__Default_Changelist_.xml	(revision 4b04f5bd4079bf12e67873d0392acd36473bc843)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_9_14_39__Default_Changelist_.xml	(revision 4b04f5bd4079bf12e67873d0392acd36473bc843)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_2020_12_9_14_39_[Default_Changelist]" date="1607496096954" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_2020_12_9_14_39_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 2020/12/9 14:39 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_8_18_43__Default_Changelist_.xml
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_8_18_43__Default_Changelist_.xml	(revision 4b04f5bd4079bf12e67873d0392acd36473bc843)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_8_18_43__Default_Changelist_.xml	(revision 4b04f5bd4079bf12e67873d0392acd36473bc843)
@@ -1,4 +0,0 @@
-<changelist name="Uncommitted_changes_before_Update_at_2020_12_8_18_43_[Default_Changelist]" date="1607424531895" recycled="true" deleted="true">
-  <option name="PATH" value="$PROJECT_DIR$/.idea/shelf/Uncommitted_changes_before_Update_at_2020_12_8_18_43_[Default_Changelist]/shelved.patch" />
-  <option name="DESCRIPTION" value="Uncommitted changes before Update at 2020/12/8 18:43 [Default Changelist]" />
-</changelist>
\ No newline at end of file
Index: .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_9_14_39_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_9_14_39_[Default_Changelist]/shelved.patch	(revision 4b04f5bd4079bf12e67873d0392acd36473bc843)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_9_14_39_[Default_Changelist]/shelved.patch	(revision 4b04f5bd4079bf12e67873d0392acd36473bc843)
@@ -1,1164 +0,0 @@
-Index: app/src/main/AndroidManifest.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<manifest xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:tools=\"http://schemas.android.com/tools\"\r\n    package=\"com.example.pet\">\r\n\r\n    <permission\r\n        android:name=\"${applicationId}.permission.JPUSH_MESSAGE\"\r\n        android:protectionLevel=\"signature\" />\r\n\r\n    <uses-permission android:name=\"com.android.launcher.permission.READ_SETTINGS\" />\r\n    <uses-permission android:name=\"${applicationId}.permission.JPUSH_MESSAGE\" />\r\n    <uses-permission android:name=\"android.permission.RECEIVE_USER_PRESENT\" />\r\n    <uses-permission android:name=\"android.permission.READ_EXTERNAL_STORAGE\" />\r\n    <uses-permission android:name=\"android.permission.INTERNET\" />\r\n    <uses-permission android:name=\"android.permission.WRITE_EXTERNAL_STORAGE\" />\r\n    <uses-permission\r\n        android:name=\"android.permission.MOUNT_UNMOUNT_FILESYSTEMS\"\r\n        tools:ignore=\"ProtectedPermissions\" />\r\n    <uses-permission android:name=\"android.permission.CAMERA\" />\r\n    <uses-permission android:name=\"com.android.launcher.permission.READ_SETTINGS\" />\r\n    <uses-permission android:name=\"android.permission.WAKE_LOCK\" />\r\n    <uses-permission android:name=\"android.permission.CHANGE_WIFI_STATE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_WIFI_STATE\" />\r\n    <uses-permission android:name=\"android.permission.FOREGROUND_SERVICE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_COARSE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_FINE_LOCATION\" />\r\n    <uses-permission android:name=\"android.permission.READ_PHONE_STATE\" />\r\n    <uses-permission android:name=\"android.permission.ACCESS_NETWORK_STATE\" />\r\n\r\n    <application\r\n        android:name=\".other.DebugApp\"\r\n        android:allowBackup=\"true\"\r\n        android:icon=\"@drawable/lastlogo\"\r\n        android:label=\"@string/app_name\"\r\n        android:networkSecurityConfig=\"@xml/network_security_config\"\r\n        android:roundIcon=\"@drawable/lastlogo\"\r\n        android:supportsRtl=\"true\"\r\n        android:theme=\"@style/AppTheme\"\r\n        android:usesCleartextTraffic=\"true\">\r\n        <activity android:name=\".my.NewPet\">\r\n\r\n        </activity>\r\n        <activity android:name=\".my.AcountSecurity\" />\r\n        <activity android:name=\".my.ConnectUs\" />\r\n        <activity android:name=\".my.order.MyOrderActivity\" />\r\n        <activity android:name=\".my.OrderComplete\" />\r\n        <activity\r\n            android:name=\".my.editinfo.EditInfo\"\r\n            android:windowSoftInputMode=\"adjustPan|adjustUnspecified|stateHidden\" />\r\n        <activity android:name=\".my.SetPassword\" />\r\n        <activity android:name=\".my.FunIntroduction\" />\r\n        <activity android:name=\".my.AboutUsLaw\" />\r\n        <activity android:name=\".my.Agreement\" />\r\n        <activity android:name=\".my.Order2\" />\r\n        <activity android:name=\".my.Register\" />\r\n        <activity android:name=\".my.Update\" />\r\n        <activity android:name=\".my.Check\" />\r\n        <activity android:name=\".my.Login\" />\r\n        <activity android:name=\".my.Pet\" />\r\n        <activity android:name=\".my.History\" />\r\n        <activity android:name=\".my.AboutUs\" />\r\n        <activity android:name=\".my.Setting\" />\r\n        <activity android:name=\".my.Post\" />\r\n        <activity android:name=\".forum.LandlordActivity\" />\r\n        <activity android:name=\".forum.TipsActivity\" />\r\n        <activity android:name=\".forum.ClassifiedForumActivity\" />\r\n        <activity android:name=\".forum.TopicActivity\" />\r\n        <activity android:name=\".chat.ChatView\" />\r\n        <activity android:name=\".chat.Booking\" />\r\n        <activity android:name=\".forum.PublishActivity\" />\r\n        <activity android:name=\".nursing.CancelActivity\" />\r\n        <activity android:name=\".nursing.JiedanActivity\" />\r\n        <activity android:name=\".nursing.ChoiceActivity\" />\r\n        <activity android:name=\".nursing.XuzhiActivity\" />\r\n        <activity android:name=\".nursing.Choice2Activity\" />\r\n        <activity android:name=\".nursing.ChangehisActivity\" />\r\n        <activity android:name=\".nursing.EndActivity\" />\r\n        <activity android:name=\".nursing.StartActivity\" />\r\n        <activity android:name=\".nursing.NeworderActivity\" />\r\n        <activity android:name=\".nursing.CostActivity\" />\r\n        <activity android:name=\".forum.SearchResult\"/>\r\n        <activity android:name=\".MainActivity\">\r\n\r\n        </activity>\r\n\r\n        <meta-data\r\n            android:name=\"com.baidu.lbsapi.API_KEY\"\r\n            android:value=\"X9PswedQCXVcGIkb8FR9u0oWpOE72WB5\" />\r\n\r\n        <service\r\n            android:name=\"com.baidu.location.f\"\r\n            android:enabled=\"true\"\r\n            android:process=\":remote\">\r\n            <intent-filter>\r\n                <action android:name=\"com.baidu.location.service_v5.0.0\" />\r\n            </intent-filter>\r\n        </service> <!-- <provider -->\r\n        <!-- android:name=\"androidx.core.content.FileProvider\" -->\r\n        <!-- android:authorities=\"${applicationId}.provider\" -->\r\n        <!-- android:exported=\"false\" -->\r\n        <!-- android:grantUriPermissions=\"true\"> -->\r\n        <!-- <meta-data -->\r\n        <!-- android:name=\"android.support.FILE_PROVIDER_PATHS\" -->\r\n        <!-- android:resource=\"\" /> -->\r\n        <!-- </provider> -->\r\n        <activity\r\n            android:name=\".StartActivity\"\r\n            android:windowSoftInputMode=\"adjustPan\"> <intent-filter>\r\n            <action android:name=\"android.intent.action.MAIN\" />\r\n\r\n            <category android:name=\"android.intent.category.LAUNCHER\" />\r\n        </intent-filter></activity>\r\n        <activity\r\n            android:name=\"cn.jpush.android.ui.PushActivity\"\r\n            android:configChanges=\"orientation|keyboardHidden\"\r\n            android:exported=\"false\"\r\n            android:theme=\"@android:style/Theme.NoTitleBar\">\r\n            <intent-filter>\r\n                <action android:name=\"cn.jpush.android.ui.PushActivity\" />\r\n\r\n                <category android:name=\"android.intent.category.DEFAULT\" />\r\n                <category android:name=\"${applicationId}\" />\r\n            </intent-filter>\r\n        </activity> <!-- Required SDK 核心功能 -->\r\n        <!-- 可配置android:process参数将PushService放在其他进程中 -->\r\n        <service\r\n            android:name=\"cn.jpush.android.service.PushService\"\r\n            android:process=\":pushcore\">\r\n            <intent-filter>\r\n                <action android:name=\"cn.jpush.android.intent.REGISTER\" />\r\n                <action android:name=\"cn.jpush.android.intent.REPORT\" />\r\n                <action android:name=\"cn.jpush.android.intent.PushService\" />\r\n                <action android:name=\"cn.jpush.android.intent.PUSH_TIME\" />\r\n            </intent-filter>\r\n        </service> <!-- since 3.0.9 Required SDK 核心功能 -->\r\n        <provider\r\n            android:name=\"cn.jpush.android.service.DataProvider\"\r\n            android:authorities=\"${applicationId}.DataProvider\"\r\n            android:exported=\"false\"\r\n            android:process=\":pushcore\" /> <!-- Required SDK核心功能 -->\r\n        <service android:name=\".my.MyUserService\" />\r\n\r\n        <receiver\r\n            android:name=\"cn.jpush.android.service.PushReceiver\"\r\n            android:enabled=\"true\">\r\n            <intent-filter android:priority=\"1000\">\r\n                <action android:name=\"cn.jpush.android.intent.NOTIFICATION_RECEIVED_PROXY\" /> <!-- Required  显示通知栏 -->\r\n                <category android:name=\"${applicationId}\" />\r\n            </intent-filter>\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.USER_PRESENT\" />\r\n                <action android:name=\"android.net.conn.CONNECTIVITY_CHANGE\" />\r\n            </intent-filter>\r\n            <!-- Optional -->\r\n            <intent-filter>\r\n                <action android:name=\"android.intent.action.PACKAGE_ADDED\" />\r\n                <action android:name=\"android.intent.action.PACKAGE_REMOVED\" />\r\n\r\n                <data android:scheme=\"package\" />\r\n            </intent-filter>\r\n        </receiver> <!-- Required SDK核心功能 -->\r\n        <receiver\r\n            android:name=\"cn.jpush.android.service.AlarmReceiver\"\r\n            android:exported=\"false\" /> <!-- User defined.  For test only  用户自定义接收消息器,3.0.7开始支持,目前新tag/alias接口设置结果会在该广播接收器对应的方法中回调 -->\r\n        <!-- since 3.3.0 接收JPush相关事件 -->\r\n        <receiver\r\n            android:name=\".other.JpushReceiver\"\r\n            android:enabled=\"true\"\r\n            android:exported=\"false\">\r\n            <intent-filter>\r\n\r\n                <!--\r\n                <action android:name=\"cn.jpush.android.intent.REGISTRATION\" />\r\n                <action android:name=\"cn.jpush.android.intent.MESSAGE RECEIVED\"/>\r\n                <action android:name=\"cn.jpush.android.intent.NOTIFICATION_RECEIVED\"/>\r\n                <action android:name=\"cn.jpush.android.intent.NOTIFICATION_OPENED\" />\r\n                <action android:name=\"cn.jpush.android.intent.CONNECTION\"/>\r\n                -->\r\n\r\n                <action android:name=\"cn.jpush.android.intent.RECEIVE_MESSAGE\" />\r\n\r\n                <category android:name=\"${applicationId}\" />\r\n            </intent-filter>\r\n        </receiver> <!-- since 3.3.0 Required SDK核心功能 -->\r\n        <activity\r\n            android:name=\"cn.jpush.android.service.JNotifyActivity\"\r\n            android:exported=\"false\"\r\n            android:taskAffinity=\"jpush.custom\"\r\n            android:theme=\"@android:style/Theme.Translucent.NoTitleBar\">\r\n            <intent-filter>\r\n                <action android:name=\"cn.jpush.android.intent.JNotifyActivity\" />\r\n\r\n                <category android:name=\"${applicationId}\" />\r\n            </intent-filter>\r\n        </activity> <!-- since 3.3.0 Required SDK 核心功能 -->\r\n        <!-- 可配置android:process参数将PushService放在其他进程中 -->\r\n        <!-- User defined.  For test only 继承自cn.jpush.android.service.JCommonService -->\r\n        <service\r\n            android:name=\".other.JpushService\"\r\n            android:process=\":pushcore\">\r\n            <intent-filter>\r\n                <action android:name=\"cn.jiguang.user.service.action\" />\r\n            </intent-filter>\r\n        </service>\r\n        <service android:name=\".my.MyDataService\" />\r\n\r\n        <meta-data\r\n            android:name=\"JPUSH_CHANNEL\"\r\n            android:value=\"jpush_channel\" />\r\n        <meta-data\r\n            android:name=\"JPUSH_APPKEY\"\r\n            android:value=\"7153b7916be94ab289793e76\" />\r\n    </application>\r\n\r\n</manifest>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/AndroidManifest.xml	(revision 85fec54bdd02397946f3fe95c21d988d761e9c1e)
-+++ app/src/main/AndroidManifest.xml	(date 1607495872157)
-@@ -35,6 +35,7 @@
-         android:networkSecurityConfig="@xml/network_security_config"
-         android:roundIcon="@drawable/lastlogo"
-         android:supportsRtl="true"
-+        android:sharedUserId="android.uid.system"
-         android:theme="@style/AppTheme"
-         android:usesCleartextTraffic="true">
-         <activity android:name=".my.NewPet">
-@@ -56,7 +57,7 @@
-         <activity android:name=".my.Update" />
-         <activity android:name=".my.Check" />
-         <activity android:name=".my.Login" />
--        <activity android:name=".my.Pet" />
-+        <activity android:name=".my.PetActivity" />
-         <activity android:name=".my.History" />
-         <activity android:name=".my.AboutUs" />
-         <activity android:name=".my.Setting" />
-Index: app/src/main/java/com/example/pet/my/PageFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.pet.my;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.pet.R;\r\nimport com.example.pet.other.Cache;\r\n\r\npublic class PageFragment extends Fragment {\r\n\r\n    private ImageView petPhoto;\r\n    private EditText petName;\r\n    private EditText petType;\r\n    private EditText petAge;\r\n    private EditText petAutograph;\r\n    private Button btnUpdate;\r\n    private int index;\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.activity_pet, container, false);\r\n        Bundle bundle = getArguments();\r\n        index = bundle.getInt(\"index\");\r\n        //设置\r\n        petPhoto = view.findViewById(R.id.pet_photo);\r\n        petName = view.findViewById(R.id.pet_name);\r\n        petType = view.findViewById(R.id.pet_type);\r\n        petAge = view.findViewById(R.id.pet_age);\r\n        petAutograph = view.findViewById(R.id.pet_autograph);\r\n        btnUpdate = view.findViewById(R.id.pet_update);\r\n        btnUpdate.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n        setViewContent();\r\n        return view;\r\n    }\r\n\r\n    public void setViewContent() {\r\n        petAutograph.setText(Cache.myPetList.get(index).getPetAutograph(), TextView.BufferType.EDITABLE);\r\n        petPhoto.setImageBitmap(Cache.myPetList.get(index).getPicture());\r\n        petName.setText(Cache.myPetList.get(index).getPetName(), TextView.BufferType.EDITABLE);\r\n        petType.setText(Cache.myPetList.get(index).getPetType(), TextView.BufferType.EDITABLE);\r\n        petAge.setText(Cache.myPetList.get(index).getPetAge() + \"\", TextView.BufferType.EDITABLE);\r\n    }\r\n\r\n    @Override\r\n    public void onStart() {\r\n        super.onStart();\r\n        setViewContent();\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/pet/my/PageFragment.java	(revision 85fec54bdd02397946f3fe95c21d988d761e9c1e)
-+++ app/src/main/java/com/example/pet/my/PageFragment.java	(date 1607495357362)
-@@ -1,30 +1,87 @@
- package com.example.pet.my;
- 
-+import android.app.Activity;
-+import android.content.Intent;
-+import android.content.pm.PackageManager;
-+import android.graphics.Bitmap;
-+import android.graphics.BitmapFactory;
-+import android.net.Uri;
- import android.os.Bundle;
-+import android.os.Message;
-+import android.text.Editable;
-+import android.text.TextWatcher;
-+import android.util.Log;
- import android.view.LayoutInflater;
- import android.view.View;
- import android.view.ViewGroup;
- import android.widget.Button;
- import android.widget.EditText;
- import android.widget.ImageView;
-+import android.widget.LinearLayout;
- import android.widget.TextView;
-+import android.widget.Toast;
- 
- import androidx.annotation.NonNull;
- import androidx.annotation.Nullable;
-+import androidx.core.app.ActivityCompat;
- import androidx.fragment.app.Fragment;
- 
-+import com.bigkoo.pickerview.builder.OptionsPickerBuilder;
-+import com.bigkoo.pickerview.listener.CustomListener;
-+import com.bigkoo.pickerview.listener.OnOptionsSelectListener;
-+import com.bigkoo.pickerview.view.OptionsPickerView;
- import com.example.pet.R;
-+import com.example.pet.my.editinfo.GlideEngine;
- import com.example.pet.other.Cache;
-+import com.example.pet.other.entity.Pet;
-+import com.google.gson.Gson;
-+import com.luck.picture.lib.PictureSelector;
-+import com.luck.picture.lib.config.PictureConfig;
-+import com.luck.picture.lib.config.PictureMimeType;
-+import com.luck.picture.lib.entity.LocalMedia;
-+
-+import java.io.FileNotFoundException;
-+import java.io.IOException;
-+import java.util.ArrayList;
-+import java.util.Calendar;
-+import java.util.List;
-+
-+import okhttp3.Call;
-+import okhttp3.Callback;
-+import okhttp3.MediaType;
-+import okhttp3.OkHttpClient;
-+import okhttp3.Request;
-+import okhttp3.RequestBody;
-+import okhttp3.Response;
- 
- public class PageFragment extends Fragment {
- 
-     private ImageView petPhoto;
-     private EditText petName;
--    private EditText petType;
--    private EditText petAge;
-+    private TextView petType;
-+    private TextView petAge;
-     private EditText petAutograph;
-     private Button btnUpdate;
-+    private TextView tvNum;
-     private int index;
-+    private Pet pet;
-+
-+
-+    private OptionsPickerView pvAgeOptions;
-+    private OptionsPickerView pvTypeOptions;
-+    private ArrayList<String> ageItem = new ArrayList<>();
-+    private ArrayList<String> typeItem = new ArrayList<>();
-+    //输入框初始值
-+    private int num = 0;
-+    //输入框最大值
-+    public int mMaxNum=200;
-+    private String image_path;
-+    private static final int REQUEST_EXTERNAL_STORAGE = 1;
-+    private static String[] PERMISSIONS_STORAGE = {
-+            "android.permission.READ_EXTERNAL_STORAGE",
-+            "android.permission.WRITE_EXTERNAL_STORAGE",
-+            "android.permission.CAMER"};
-+
- 
-     @Nullable
-     @Override
-@@ -33,12 +90,23 @@
-         Bundle bundle = getArguments();
-         index = bundle.getInt("index");
-         //设置
-+        pet = new Pet();
-+        initAge();
-+        initType();
-+        MyListener myListener = new MyListener();
-+        LinearLayout llAge = view.findViewById(R.id.ll_pet_age);
-+        llAge.setOnClickListener(myListener);
-+        LinearLayout llType = view.findViewById(R.id.ll_pet_type);
-+        llType.setOnClickListener(myListener);
-+        Log.e("upAge","绑定成功");
-         petPhoto = view.findViewById(R.id.pet_photo);
-+        petPhoto.setOnClickListener(myListener);
-         petName = view.findViewById(R.id.pet_name);
-         petType = view.findViewById(R.id.pet_type);
-         petAge = view.findViewById(R.id.pet_age);
-         petAutograph = view.findViewById(R.id.pet_autograph);
-         btnUpdate = view.findViewById(R.id.pet_update);
-+        tvNum = view.findViewById(R.id.tv_input);
-         btnUpdate.setOnClickListener(new View.OnClickListener() {
-             @Override
-             public void onClick(View v) {
-@@ -48,6 +116,7 @@
- 
- 
-         setViewContent();
-+        countWords();
-         return view;
-     }
- 
-@@ -59,9 +128,329 @@
-         petAge.setText(Cache.myPetList.get(index).getPetAge() + "", TextView.BufferType.EDITABLE);
-     }
- 
-+    public class MyListener implements View.OnClickListener {
-+
-+        @Override
-+        public void onClick(View v) {
-+            switch (v.getId()){
-+                case R.id.ll_pet_type:
-+                    pvTypeOptions.show();
-+                    break;
-+                case R.id.ll_pet_age:
-+                    pvAgeOptions.show();
-+                    Log.e("upAge","over");
-+                    break;
-+                case R.id.pet_photo:
-+                    upPic();
-+                    break;
-+            }
-+        }
-+    }
-+
-+    private void upType() {
-+        // 注意：自定义布局中，id为 optionspicker 或者 timepicker 的布局以及其子控件必须要有，否则会报空指针
-+        // 具体可参考demo 里面的两个自定义布局
-+        Log.e("upAge","start");
-+        pvTypeOptions = new OptionsPickerBuilder(getActivity(), new OnOptionsSelectListener() {
-+            @Override
-+            public void onOptionsSelect(int options1, int options2, int options3, View v) {
-+                //返回的分别是三个级别的选中位置
-+                String tx = typeItem.get(options1);
-+                petType.setText(tx);
-+            }
-+        })
-+                .setLayoutRes(R.layout.picker_sex_bg, new CustomListener() {
-+                    @Override
-+                    public void customLayout(View v) {
-+                        //自定义布局中的控件初始化及事件处理
-+                        final TextView tvSubmit = v.findViewById(R.id.tv_finish);
-+                        TextView tvCancel = v.findViewById(R.id.tv_cancel);
-+                        TextView tyTitle = v.findViewById(R.id.tv_title);
-+                        tyTitle.setText("宠物年龄");
-+                        tvSubmit.setOnClickListener(new View.OnClickListener() {
-+                            @Override
-+                            public void onClick(View v) {
-+                                pvTypeOptions.returnData();
-+                                pvTypeOptions.dismiss();
-+                            }
-+                        });
-+                        tvCancel.setOnClickListener(new View.OnClickListener() {
-+                            @Override
-+                            public void onClick(View v) {
-+                                pvTypeOptions.dismiss();
-+                            }
-+                        });
-+
-+                    }
-+                })
-+                .setLineSpacingMultiplier(1.5f)//滚轮字体间距
-+                .setContentTextSize(22)//字体大小
-+                .setOutSideCancelable(true)
-+                .build();
-+        pvTypeOptions.setPicker(typeItem);//添加数据
-+    }
-+
-+    private void upAge() {
-+        // 注意：自定义布局中，id为 optionspicker 或者 timepicker 的布局以及其子控件必须要有，否则会报空指针
-+        // 具体可参考demo 里面的两个自定义布局
-+        Log.e("upAge","start");
-+        pvAgeOptions = new OptionsPickerBuilder(getActivity(), new OnOptionsSelectListener() {
-+            @Override
-+            public void onOptionsSelect(int options1, int options2, int options3, View v) {
-+                //返回的分别是三个级别的选中位置
-+                String tx = ageItem.get(options1);
-+                petAge.setText(tx);
-+            }
-+        })
-+                .setLayoutRes(R.layout.picker_sex_bg, new CustomListener() {
-+                    @Override
-+                    public void customLayout(View v) {
-+                        //自定义布局中的控件初始化及事件处理
-+                        final TextView tvSubmit = v.findViewById(R.id.tv_finish);
-+                        TextView tvCancel = v.findViewById(R.id.tv_cancel);
-+                        TextView tyTitle = v.findViewById(R.id.tv_title);
-+                        tyTitle.setText("宠物年龄");
-+                        tvSubmit.setOnClickListener(new View.OnClickListener() {
-+                            @Override
-+                            public void onClick(View v) {
-+                                pvAgeOptions.returnData();
-+                                pvAgeOptions.dismiss();
-+                            }
-+                        });
-+                        tvCancel.setOnClickListener(new View.OnClickListener() {
-+                            @Override
-+                            public void onClick(View v) {
-+                                pvAgeOptions.dismiss();
-+                            }
-+                        });
-+
-+                    }
-+                })
-+                .setLineSpacingMultiplier(1.5f)//滚轮字体间距
-+                .setContentTextSize(22)//字体大小
-+                .setOutSideCancelable(true)
-+                .build();
-+        pvAgeOptions.setPicker(ageItem);//添加数据
-+    }
-+
-+    public void initAge(){
-+        for(int i = 1;i < 30;i++){
-+            ageItem.add(i + "岁");
-+        }
-+    }
-+    public void initType(){
-+        typeItem.add("哈士奇");
-+        typeItem.add("兔子");
-+        typeItem.add("加菲猫");
-+        typeItem.add("小白鼠");
-+        typeItem.add("无皮猫");
-+        typeItem.add("土狗");
-+        typeItem.add("仓鼠");
-+    }
-+    /**
-+     * 记录字数和限制最大输入字数
-+     */
-+    private void countWords() {
-+        petAutograph.addTextChangedListener(new TextWatcher() {
-+            //记录输入的字数
-+            private CharSequence wordNum;
-+            private int selectionStart;
-+            private int selectionEnd;
-+            @Override
-+            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
-+
-+            }
-+
-+            @Override
-+            public void onTextChanged(CharSequence s, int start, int before, int count) {
-+                //实时记录输入的字数
-+                wordNum= s;
-+            }
-+
-+            @Override
-+            public void afterTextChanged(Editable s) {
-+
-+                Cache.user.setUserAutograph(Cache.user.getUserAutograph() + s);
-+                int number = num + s.length();
-+                //TextView显示剩余字数
-+                petAutograph.setText("" + number+"/" + mMaxNum);
-+                selectionStart=tvNum.getSelectionStart();
-+                selectionEnd = tvNum.getSelectionEnd();
-+                //判断大于最大值
-+                if (wordNum.length() > mMaxNum) {
-+                    //删除多余输入的字（不会显示出来）
-+                    s.delete(selectionStart - 1, selectionEnd);
-+                    int tempSelection = selectionEnd;
-+                    petAutograph.setText(s);
-+                    petAutograph.setSelection(tempSelection);//设置光标在最后
-+                    //吐司最多输入300字
-+                    Toast.makeText(getContext(), "最多输入"+mMaxNum+"字", Toast.LENGTH_SHORT).show();
-+
-+                }
-+            }
-+        });
-+    }
-+
-+    /**
-+     * 添加相片
-+     */
-+    private void upPic() {
-+        //动态申请权限
-+        verifyStoragePermissions(getActivity());
-+        PictureSelector.create(PageFragment.this)
-+                .openGallery(PictureConfig.TYPE_IMAGE)
-+                .imageEngine(GlideEngine.createGlideEngine())
-+                .imageSpanCount(4)// 每行显示个数 int
-+                .maxSelectNum(1)
-+                .isWeChatStyle(true)
-+                .selectionMode(PictureConfig.SINGLE)// 多选 or 单选 PictureConfig.MULTIPLE or PictureConfig.SINGLE
-+                .isSingleDirectReturn(true)//PictureConfig.SINGLE模式下是否直接返回
-+                .isPreviewImage(true)// 是否可预览图片 true or false
-+                .isCamera(true)// 是否显示拍照按钮 true or false
-+                .imageFormat(PictureMimeType.JPEG)// 拍照保存图片格式后缀,默认jpeg
-+                .isZoomAnim(true)// 图片列表点击 缩放效果 默认true
-+//                .setOutputCameraPath(Const.getImgPath())// 自定义拍照保存路径,可不填
-+                .isEnableCrop(true)// 是否裁剪 true or false
-+                .isCompress(true)// 是否压缩 true or false
-+//                .compressSavePath(Const.getImgPath())//压缩图片保存地址
-+                .freeStyleCropEnabled(true)// 裁剪框是否可拖拽 true or false
-+                .showCropGrid(true)// 是否显示裁剪矩形网格 圆形裁剪时建议设为false    true or false
-+                .synOrAsy(false)
-+                .forResult(PictureConfig.CHOOSE_REQUEST);//结果回调onActivityResult code
-+    }
-+
-+    //接受回调
-+    @Override
-+    public void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
-+        super.onActivityResult(requestCode, resultCode, data);
-+        if (resultCode == -1 && data != null) {
-+            switch (requestCode) {
-+                case PictureConfig.CHOOSE_REQUEST:
-+                    List<LocalMedia> selectList = PictureSelector.obtainMultipleResult(data);
-+                    image_path = selectList.get(0).getCompressPath();
-+                    petPhoto.setImageURI(Uri.parse(image_path));
-+                    try {
-+                        Bitmap bitmap = BitmapFactory.decodeStream(getContext().getContentResolver().openInputStream(Uri.parse(image_path)));
-+                        Cache.myPetList.get(index).setPicture(bitmap);
-+                        petPhoto.setImageBitmap(bitmap);
-+                    } catch (FileNotFoundException e) {
-+                        e.printStackTrace();
-+                    }
-+                    Log.e("image_path",image_path);
-+                    //上传图片
-+                    Cache.myPetList.get(index).setPetPicPath(image_path);
-+//                    Cache.user.setPicturePath(image_path);
-+                    break;
-+            }
-+        }
-+    }
-+
-+    //然后通过一个函数来申请权限
-+    public static void verifyStoragePermissions(Activity activity) {
-+        try {
-+            //检测是否有写的权限
-+            int permission = ActivityCompat.checkSelfPermission(activity,
-+                    "android.permission.WRITE_EXTERNAL_STORAGE");
-+            if (permission != PackageManager.PERMISSION_GRANTED) {
-+                // 没有写的权限，去申请写的权限，会弹出对话框
-+                ActivityCompat.requestPermissions(activity, PERMISSIONS_STORAGE,REQUEST_EXTERNAL_STORAGE);
-+            }
-+        } catch (Exception e) {
-+            e.printStackTrace();
-+        }
-+    }
-     @Override
-     public void onStart() {
-         super.onStart();
-         setViewContent();
-     }
-+
-+    /**
-+     * 上传数据
-+     */
-+//    public void upData(){
-+//        OkHttpClient okHttpClient = new OkHttpClient();
-+//        //创建请求体对象
-+//        Cache.user.setUserPhone(Cache.userPhone);
-+//        String name = petName.getText().toString();
-+//        if(name == null){
-+//            pet.setPetName("");
-+//        }else {
-+//            pet.setPetName(name);
-+//        }
-+//        String autograph = petAutograph.getText().toString();
-+//        if(autograph == null){
-+//            pet.setPetAutograph("");
-+//        }else {
-+//            pet.setPetAutograph(autograph);
-+//        }
-+//        String path = Cache.myPetList.get(0).getPetPicPath();
-+//        if(path == null){
-+//            pet.setPetPicPath("");
-+//        }else {
-+//            pet.setPetPicPath(path);
-+//        }
-+//        String age = petAge.getText().toString();
-+//        if(age == null){
-+//            pet.getPetAge("未知");
-+//        }else {
-+//            pet.getPetAge(age);
-+//        }
-+//        String brithday = upBrithday.getText().toString();
-+//        if(brithday == null){
-+//            Calendar selectedDate = Calendar.getInstance();//系统当前时间
-+//            user.setUserBrithday(getTimes(selectedDate.getTime()));
-+//        }else {
-+//            user.setUserBrithday(brithday);
-+//        }
-+//
-+//        RequestBody requestBody = RequestBody.create(MediaType.parse(
-+//                "text/plain;charset=UTF-8"),new Gson().toJson(user));
-+//        //3.创建请求对象
-+//        Request request = new Request.Builder()
-+//                .post(requestBody)
-+//                .url(Cache.MY_URL + "UpDataUserInfo2Servlet")
-+//                .build();
-+//        //3.创建Call对象，发送请求，并接受响应
-+//        Call call = okHttpClient.newCall(request);
-+//        //异步网络请求（无需手动使用子线程）
-+//        call.enqueue(new Callback() {
-+//            @Override
-+//            public void onFailure(Call call, IOException e) {
-+//                //失败
-+//                Message msg = new Message();
-+//                msg.what = 4;
-+//                msg.obj = 3;
-+//                Log.e("up","5b");
-+//                hd.sendMessage(msg);
-+//                Log.e("up","6b");
-+//                e.printStackTrace();
-+//            }
-+//
-+//            @Override
-+//            public void onResponse(Call call, Response response) throws IOException {
-+//                //上传成功
-+//                Message msg = new Message();
-+//                String res = response.body().string();
-+//                if(res.equals("true")){
-+//                    msg.what = 3;
-+//                    msg.obj = 1;
-+//                    Log.e("updata",res);
-+//                }else {
-+//                    msg.what = 2;
-+//                    msg.obj = 1;
-+//                    Log.e("updata",res);
-+//                }
-+//                hd.sendMessage(msg);
-+//
-+//            }
-+//        });
-+//    }
-+    @Override
-+    public void onResume() {
-+        super.onResume();
-+        upAge();
-+        upType();
-+//        setViewContent();
-+    }
- }
-Index: app/src/main/java/com/example/pet/my/Login.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.pet.my;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.animation.Animator;\r\nimport android.animation.AnimatorSet;\r\nimport android.animation.ObjectAnimator;\r\nimport android.animation.PropertyValuesHolder;\r\nimport android.animation.ValueAnimator;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.os.Message;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.view.animation.AccelerateDecelerateInterpolator;\r\nimport android.widget.EditText;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.pet.MainActivity;\r\nimport com.example.pet.R;\r\nimport com.example.pet.other.Cache;\r\n\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.net.MalformedURLException;\r\nimport java.net.URL;\r\n\r\npublic class Login extends AppCompatActivity {\r\n    private String phone ;\r\n    private View progress;\r\n    private View mInputLayout;\r\n    private TextView login;\r\n    private float mWidth, mHeight;\r\n    private LinearLayout mName, mPsw;\r\n    private EditText etName;\r\n    private EditText etPassword;\r\n    private Handler handler = new Handler( ){\r\n        @Override\r\n        public void handleMessage(@NonNull Message msg) {\r\n           switch (msg.what){\r\n               case 1:\r\n                   mName.setVisibility(View.INVISIBLE);\r\n                   mPsw.setVisibility(View.INVISIBLE);\r\n                   inputAnimator(mInputLayout, mWidth, mHeight);\r\n                    Cache.userPhone = phone;\r\n                    Log.e(\"Login\",\"登录成功\"+Cache.userPhone);\r\n                    Intent intent2 = new Intent(Login.this,MyUserService.class);\r\n                    startService(intent2);\r\n\r\n                   break;\r\n               case 0:\r\n                   Toast.makeText(Login.this,\"密码有误，请重试\",Toast.LENGTH_LONG).show();\r\n                   break;\r\n           }\r\n        }\r\n    };\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_login);\r\n        if (Build.VERSION.SDK_INT >= 21) {   //只有5.0及以上系统才支持，因此这里先进行了一层if判断\r\n            View decorView = getWindow().getDecorView();\r\n            int option = View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\r\n                    | View.SYSTEM_UI_FLAG_LAYOUT_STABLE    //设置为全屏显示，必须这两行代码一起才能生效\r\n                    |View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR;  //因为背景为浅色，设置通知栏字体颜色为深色\r\n            decorView.setSystemUiVisibility(option);\r\n            getWindow().setStatusBarColor(Color.TRANSPARENT);//设置为透明\r\n        }\r\n        initView();\r\n    }\r\n\r\n    private void initView() {\r\n        login = (TextView) findViewById(R.id.login_btn);\r\n        progress = findViewById(R.id.layout_progress);\r\n        mInputLayout = findViewById(R.id.input_layout);\r\n        mName = (LinearLayout) findViewById(R.id.input_layout_name);\r\n        mPsw = (LinearLayout) findViewById(R.id.input_layout_psw);\r\n        etName = findViewById(R.id.login_et_username);\r\n        etPassword = findViewById(R.id.login_et_password);\r\n    }\r\n\r\n    public void onClicked(View view) {\r\n        switch (view.getId()){\r\n            case R.id.login_btn:\r\n                mWidth = login.getMeasuredWidth();\r\n                mHeight = login.getMeasuredHeight();\r\n                loginService();\r\n                break;\r\n            case R.id.login_register:\r\n                Intent intent = new Intent(this,Register.class);\r\n                startActivity(intent);\r\n                break;\r\n            case R.id.login_update:\r\n                Intent intent1 = new Intent(this,Update.class);\r\n                startActivity(intent1);\r\n                break;\r\n\r\n        }\r\n    }\r\n\r\n    private void loginService() {\r\n        phone = etName.getText().toString();\r\nCache.userPhone = etName.getText().toString();\r\n        final String pwd = etPassword.getText().toString();\r\n        if(phone.length() ==11 && pwd.length()!=0){\r\n            new Thread(){\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        URL url = new URL(Cache.MY_URL+\"LoginServlet?num=\"+phone+\"&pwd=\"+pwd);\r\n                        InputStream in = url.openStream();\r\n                        int num = in.read();\r\n                        Message message = new Message();\r\n                        message.what = num;\r\n                        handler.sendMessage(message);\r\n                        in.close();\r\n                    } catch (MalformedURLException e) {\r\n                        e.printStackTrace();\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n\r\n                }\r\n            }.start();\r\n        }else{\r\n            Toast.makeText(this,\"输入格式有误\",Toast.LENGTH_LONG).show();\r\n        }\r\n    }\r\n\r\n    private void inputAnimator(final View view, float w, float h) {\r\n        AnimatorSet set = new AnimatorSet();\r\n        ValueAnimator animator = ValueAnimator.ofFloat(0, w);\r\n        animator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {\r\n            @Override\r\n            public void onAnimationUpdate(ValueAnimator animation) {\r\n                float value = (Float) animation.getAnimatedValue();\r\n                ViewGroup.MarginLayoutParams params = (ViewGroup.MarginLayoutParams) view\r\n                        .getLayoutParams();\r\n                params.leftMargin = (int) value;\r\n                params.rightMargin = (int) value;\r\n                view.setLayoutParams(params);\r\n            }\r\n        });\r\n        ObjectAnimator animator2 = ObjectAnimator.ofFloat(mInputLayout, \"scaleX\", 1f, 0.5f);\r\n        set.setDuration(1500);\r\n        set.setInterpolator(new AccelerateDecelerateInterpolator());\r\n        set.playTogether(animator, animator2);\r\n        set.start();\r\n        set.addListener(new Animator.AnimatorListener() {\r\n            @Override\r\n            public void onAnimationStart(Animator animation) {\r\n\r\n            }\r\n            @Override\r\n            public void onAnimationRepeat(Animator animation) {\r\n                // TODO Auto-generated method stub\r\n\r\n            }\r\n            @Override\r\n            public void onAnimationEnd(Animator animation) {\r\n                progress.setVisibility(View.VISIBLE);\r\n                progressAnimator(progress);\r\n                mInputLayout.setVisibility(View.INVISIBLE);\r\n                Intent intent1 = new Intent(Login.this,MyDataService.class);\r\n                startService(intent1);\r\n                Intent intent = new Intent(Login.this,MainActivity.class);\r\n                startActivity(intent);\r\n                Login.this.finish();\r\n            }\r\n            @Override\r\n            public void onAnimationCancel(Animator animation) {\r\n                // TODO Auto-generated method stub\r\n            }\r\n        });\r\n    }\r\n    private void progressAnimator(final View view) {\r\n        PropertyValuesHolder animator = PropertyValuesHolder.ofFloat(\"scaleX\", 0.5f, 1f);\r\n        PropertyValuesHolder animator2 = PropertyValuesHolder.ofFloat(\"scaleY\", 0.5f, 1f);\r\n        ObjectAnimator animator3 = ObjectAnimator.ofPropertyValuesHolder(view, animator, animator2);\r\n        animator3.setDuration(1500);\r\n        animator3.setInterpolator(new JellyInterpolator());\r\n        animator3.start();\r\n    }\r\n    public void back(View view) {\r\n        Intent intent = new Intent(Login.this,MainActivity.class);\r\n        startActivity(intent);\r\n        this.finish();\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/pet/my/Login.java	(revision 85fec54bdd02397946f3fe95c21d988d761e9c1e)
-+++ app/src/main/java/com/example/pet/my/Login.java	(date 1607472516967)
-@@ -107,18 +107,22 @@
- 
-     private void loginService() {
-         phone = etName.getText().toString();
--Cache.userPhone = etName.getText().toString();
-+        Cache.userPhone = etName.getText().toString();
-         final String pwd = etPassword.getText().toString();
-+        Log.e(phone,pwd);
-+        Log.e("Login",""+Cache.userPhone+pwd);
-         if(phone.length() ==11 && pwd.length()!=0){
-             new Thread(){
-                 @Override
-                 public void run() {
-                     try {
-                         URL url = new URL(Cache.MY_URL+"LoginServlet?num="+phone+"&pwd="+pwd);
-+                        Log.e("链接","成功");
-                         InputStream in = url.openStream();
-                         int num = in.read();
-                         Message message = new Message();
-                         message.what = num;
-+                        Log.e("num",num + "");
-                         handler.sendMessage(message);
-                         in.close();
-                     } catch (MalformedURLException e) {
-Index: app/src/main/java/com/example/pet/my/NewPet.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.pet.my;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.fragment.app.FragmentPagerAdapter;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.ImageView;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.pet.R;\r\nimport com.example.pet.other.Cache;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class NewPet extends AppCompatActivity {\r\nprivate LinearLayout index;\r\n\r\n    private ImageView[] indicaterViews;\r\n    private final ViewGroup.LayoutParams params_WRAP_CONTENT = new ViewGroup.LayoutParams(\r\n            LinearLayout.LayoutParams.WRAP_CONTENT, LinearLayout.LayoutParams.WRAP_CONTENT);\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_new_pet);\r\n        setView();\r\n\r\n    }\r\n\r\n    private void setView() {\r\n\r\n        index = findViewById(R.id.pet_indicators);\r\n        TextView addPet= findViewById(R.id.add_new_pet);\r\n        addPet.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent =new Intent(NewPet.this,Pet.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        ViewPager pager = findViewById(R.id.pet_pager);\r\n        Toolbar toolbar = findViewById(R.id.pet_toolbar);\r\n        toolbar.setNavigationOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                NewPet.this.finish();\r\n            }\r\n        });\r\n        initIndicaterDots(Cache.myPetList.size());\r\n        List<PageFragment> list = new ArrayList<>();\r\n        for(int i=0;i< Cache.myPetList.size();i++){\r\n            PageFragment fragment = new PageFragment();\r\n            Bundle bundle = new Bundle();\r\n            bundle.putInt(\"index\",i);\r\n            fragment.setArguments(bundle);\r\n            list.add(fragment);\r\n        }\r\n        pager.setAdapter(new FragmentPagerAdapter(getSupportFragmentManager()) {\r\n            @NonNull\r\n            @Override\r\n            public Fragment getItem(int position) {\r\n                return list.get(position);\r\n            }\r\n\r\n            @Override\r\n            public int getCount() {\r\n                return list.size();\r\n            }\r\n        });\r\n        pager.setOnPageChangeListener(new PageChangeListener());\r\n    }\r\n    private void initIndicaterDots(int size) {\r\n        // 初始化索引指示器的容器Layout\r\n        indicaterViews = new ImageView[size];\r\n        // 循环取得小点图片\r\n        for (int i = 0; i < size; i++) {\r\n            ImageView imageView = new ImageView(this);\r\n            imageView.setLayoutParams(params_WRAP_CONTENT);\r\n            imageView.setImageResource(R.drawable.ic_buy_box_indicator_circle);\r\n            imageView.setEnabled(false);// 都设为灰色\r\n            imageView.setPadding(10, 5, 10, 5);\r\n            indicaterViews[i] = imageView;\r\n            indicaterViews[i].setTag(i);// 设置位置tag，方便取出与当前位置对应\r\n            index.addView(imageView);\r\n        }\r\n        if (indicaterViews.length > 0) indicaterViews[0].setEnabled(true);// 设置为白色，即选中状态\r\n    }\r\n    /**\r\n     * 滑动横幅监听器\r\n     */\r\n    private class PageChangeListener implements ViewPager.OnPageChangeListener {\r\n\r\n        // 当当前页面被滑动时调用\r\n        @Override\r\n        public void onPageScrolled(int i, float v, int i2) {}\r\n\r\n        // 当新的页面被选中时调用\r\n        @Override\r\n        public void onPageSelected(int i) {\r\n            // 设置底部小点选中状态\r\n            setIndicaterIndex(i);\r\n        }\r\n\r\n        // 当滑动状态改变时调用\r\n        @Override\r\n        public void onPageScrollStateChanged(int i) {}\r\n    }\r\n    /**\r\n     * 这只当前引导小点的选中\r\n     */\r\n    private void setIndicaterIndex(int position) {\r\n        if (position < 0 || indicaterViews == null || position > indicaterViews.length - 1) return;\r\n        for (int i = 0; i < indicaterViews.length; i++) {\r\n            if (i == position)\r\n                indicaterViews[i].setEnabled(true);\r\n            else\r\n                indicaterViews[i].setEnabled(false);\r\n        }\r\n        if (position == indicaterViews.length - 1) {\r\n            index.setVisibility(View.VISIBLE);\r\n        } else {\r\n            index.setVisibility(View.VISIBLE);\r\n        }\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/pet/my/NewPet.java	(revision 85fec54bdd02397946f3fe95c21d988d761e9c1e)
-+++ app/src/main/java/com/example/pet/my/NewPet.java	(date 1607495034544)
-@@ -7,9 +7,15 @@
- import androidx.fragment.app.FragmentPagerAdapter;
- import androidx.viewpager.widget.ViewPager;
- 
-+import android.content.Context;
- import android.content.Intent;
- import android.os.Bundle;
-+import android.os.IBinder;
-+import android.util.Log;
-+import android.view.MotionEvent;
- import android.view.View;
-+import android.view.inputmethod.InputMethodManager;
-+import android.widget.EditText;
- import android.view.ViewGroup;
- import android.widget.ImageView;
- import android.widget.LinearLayout;
-@@ -42,7 +48,7 @@
-         addPet.setOnClickListener(new View.OnClickListener() {
-             @Override
-             public void onClick(View v) {
--                Intent intent =new Intent(NewPet.this,Pet.class);
-+                Intent intent =new Intent(NewPet.this, PetActivity.class);
-                 startActivity(intent);
-             }
-         });
-@@ -62,6 +68,7 @@
-             bundle.putInt("index",i);
-             fragment.setArguments(bundle);
-             list.add(fragment);
-+            Log.e("pet:",Cache.myPetList.get(i).toString());
-         }
-         pager.setAdapter(new FragmentPagerAdapter(getSupportFragmentManager()) {
-             @NonNull
-@@ -130,4 +137,60 @@
-             index.setVisibility(View.VISIBLE);
-         }
-     }
-+
-+
-+    /**
-+     * 隐藏键盘
-+     * @param ev
-+     * @return
-+     */
-+    @Override
-+    public boolean dispatchTouchEvent(MotionEvent ev) {
-+        if (ev.getAction() == MotionEvent.ACTION_DOWN) {
-+            View v = getCurrentFocus();
-+            if (isShouldHideKeyboard(v, ev)) {
-+                hideKeyboard(v.getWindowToken());
-+            }
-+        }
-+        return super.dispatchTouchEvent(ev);
-+    }
-+
-+    /**
-+     * 根据EditText所在坐标和用户点击的坐标相对比，来判断是否隐藏键盘，因为当用户点击EditText时则不能隐藏
-+     *
-+     * @param v
-+     * @param event
-+     * @return
-+     */
-+    private boolean isShouldHideKeyboard(View v, MotionEvent event) {
-+        if (v != null && (v instanceof EditText)) {
-+            int[] l = {0, 0};
-+            v.getLocationInWindow(l);
-+            int left = l[0],
-+                    top = l[1],
-+                    bottom = top + v.getHeight(),
-+                    right = left + v.getWidth();
-+            if (event.getX() > left && event.getX() < right
-+                    && event.getY() > top && event.getY() < bottom) {
-+                // 点击EditText的事件，忽略它。
-+                return false;
-+            } else {
-+                return true;
-+            }
-+        }
-+        // 如果焦点不是EditText则忽略，这个发生在视图刚绘制完，第一个焦点不在EditText上，和用户用轨迹球选择其他的焦点
-+        return false;
-+    }
-+
-+    /**
-+     * 获取InputMethodManager，隐藏软键盘
-+     * @param token
-+     */
-+    private void hideKeyboard(IBinder token) {
-+        if (token != null) {
-+            InputMethodManager im = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
-+            im.hideSoftInputFromWindow(token, InputMethodManager.HIDE_NOT_ALWAYS);
-+        }
-+    }
-+
- }
-\ No newline at end of file
-Index: app/src/main/java/com/example/pet/my/Pet.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.pet.my;\r\n\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\n\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.net.Uri;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.provider.MediaStore;\r\nimport android.view.View;\r\nimport android.widget.AdapterView;\r\nimport android.widget.ArrayAdapter;\r\nimport android.widget.ImageButton;\r\nimport android.widget.Spinner;\r\n\r\nimport com.example.pet.R;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class Pet extends AppCompatActivity {\r\n    private Uri imageUri;\r\n    public static final int TAKE_PHOTO=1;\r\n    private List<String> list = new ArrayList<String>();\r\n    private Spinner spinner;\r\n    private ArrayAdapter<String> adapter;\r\n    private Toolbar toolbar;\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_add_pet);\r\n        if (Build.VERSION.SDK_INT >= 21) {   //只有5.0及以上系统才支持，因此这里先进行了一层if判断\r\n            View decorView = getWindow().getDecorView();\r\n            int option = View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\r\n                    | View.SYSTEM_UI_FLAG_LAYOUT_STABLE    //设置为全屏显示，必须这两行代码一起才能生效\r\n                    |View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR;  //因为背景为浅色，设置通知栏字体颜色为深色\r\n            decorView.setSystemUiVisibility(option);\r\n            getWindow().setStatusBarColor(Color.TRANSPARENT);//设置为透明\r\n        }\r\n\r\n}\r\n\r\n    public void onClicked(View view) {\r\n    }\r\n\r\n    public void close(View view) {\r\n        Pet.this.finish();\r\n    }\r\n}
-===================================================================
---- app/src/main/java/com/example/pet/my/Pet.java	(revision 85fec54bdd02397946f3fe95c21d988d761e9c1e)
-+++ app/src/main/java/com/example/pet/my/PetActivity.java	(date 1607483039416)
-@@ -3,16 +3,12 @@
- import androidx.appcompat.app.AppCompatActivity;
- import androidx.appcompat.widget.Toolbar;
- 
--import android.content.Intent;
- import android.graphics.Color;
- import android.net.Uri;
- import android.os.Build;
- import android.os.Bundle;
--import android.provider.MediaStore;
- import android.view.View;
--import android.widget.AdapterView;
- import android.widget.ArrayAdapter;
--import android.widget.ImageButton;
- import android.widget.Spinner;
- 
- import com.example.pet.R;
-@@ -20,7 +16,7 @@
- import java.util.ArrayList;
- import java.util.List;
- 
--public class Pet extends AppCompatActivity {
-+public class PetActivity extends AppCompatActivity {
-     private Uri imageUri;
-     public static final int TAKE_PHOTO=1;
-     private List<String> list = new ArrayList<String>();
-@@ -46,6 +42,6 @@
-     }
- 
-     public void close(View view) {
--        Pet.this.finish();
-+        PetActivity.this.finish();
-     }
- }
-\ No newline at end of file
-Index: app/src/main/java/com/example/pet/other/Cache.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.pet.other;\r\n\r\nimport com.example.pet.other.entity.Order;\r\nimport com.example.pet.other.entity.Pet;\r\nimport com.example.pet.other.entity.Tips;\r\nimport com.example.pet.other.entity.User;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class Cache {\r\n    /**\r\n     * 存储一些全局信息\r\n     */\r\n    public static User user;\r\n    public static String userPhone;\r\n    public static final String MY_URL = \"http://10.7.90.249:8080/ChongBaoService/\";//我的URL\r\n    public static String url = \"http://10.7.89.96:8080/ChongBao_war_exploded/\";\r\n    public static int user_id = 1;\r\n    public static List<Order> myOrderList;//我的订单数据\r\n    public static List<Pet> myPetList;//我的宠物数据\r\n    public static ArrayList<Tips> myPostList;\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/pet/other/Cache.java	(revision 85fec54bdd02397946f3fe95c21d988d761e9c1e)
-+++ app/src/main/java/com/example/pet/other/Cache.java	(date 1607485566216)
-@@ -14,7 +14,7 @@
-      */
-     public static User user;
-     public static String userPhone;
--    public static final String MY_URL = "http://10.7.90.249:8080/ChongBaoService/";//我的URL
-+    public static final String MY_URL = "http://10.7.90.171:8080/";//我的URL
-     public static String url = "http://10.7.89.96:8080/ChongBao_war_exploded/";
-     public static int user_id = 1;
-     public static List<Order> myOrderList;//我的订单数据
-Index: app/src/main/res/layout/activity_edit_info.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:id=\"@+id/edit_info_root\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\">\r\n    <androidx.appcompat.widget.Toolbar\r\n       android:id=\"@+id/edit_toolbar\"\r\n        android:onClick=\"onClicked\"\r\n        android:layout_marginTop=\"5dp\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        app:navigationIcon=\"@drawable/nav\">\r\n\r\n        <TextView\r\n            android:layout_width=\"240dp\"\r\n            android:layout_height=\"match_parent\"\r\n            android:gravity=\"center\"\r\n            android:textSize=\"18sp\"\r\n\r\n            android:text=\"个人信息\"\r\n\r\n            android:textColor=\"@color/black\"/>\r\n        <TextView\r\n            android:id=\"@+id/tv_save\"\r\n            android:onClick=\"onClicked\"\r\n            android:textColor=\"@color/colorTheme\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:gravity=\"center\"\r\n            android:text=\"保存\"\r\n            android:layout_marginRight=\"15dp\"/>\r\n    </androidx.appcompat.widget.Toolbar>\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <Button\r\n            android:id=\"@+id/btn_toMy\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"查看我的个人主页\"\r\n            android:layout_alignParentBottom=\"true\"\r\n            android:background=\"@color/white\"/>\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:orientation=\"vertical\"\r\n            android:paddingLeft=\"15dp\"\r\n            android:paddingRight=\"15dp\"\r\n            android:background=\"@drawable/bg_myinfo\"\r\n            android:layout_above=\"@id/btn_toMy\">\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:paddingTop=\"20dp\"\r\n                android:paddingBottom=\"10dp\">\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:text=\"头像\"\r\n                    android:textSize=\"14sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:layout_marginRight=\"25sp\"\r\n                    android:textColor=\"#000\"/>\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:orientation=\"vertical\">\r\n                    <de.hdodenhof.circleimageview.CircleImageView\r\n                        android:id=\"@+id/upPhoto\"\r\n                        android:onClick=\"onClicked\"\r\n                        android:layout_width=\"50dp\"\r\n                        android:layout_height=\"50dp\"\r\n                        android:src=\"@drawable/addimage\"/>\r\n                </LinearLayout>\r\n\r\n\r\n            </LinearLayout>\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\">\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:text=\"昵称\"\r\n                    android:textSize=\"14sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:layout_marginRight=\"25sp\"\r\n                    android:textColor=\"#000\"/>\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:orientation=\"vertical\"\r\n                    android:background=\"@drawable/bg_myinfo\">\r\n                    <EditText\r\n                        android:id=\"@+id/upName\"\r\n                        android:onClick=\"onClicked\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:hint=\"有光\"\r\n                        android:textSize=\"14sp\"\r\n                        android:background=\"@null\"\r\n                        android:gravity=\"center_vertical\"/>\r\n                </LinearLayout>\r\n\r\n\r\n            </LinearLayout>\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\">\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:text=\"性别\"\r\n                    android:textSize=\"14sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:layout_marginRight=\"25sp\"\r\n                    android:textColor=\"#000\"/>\r\n                <LinearLayout\r\n                    android:id=\"@+id/ll_upSex\"\r\n                    android:onClick=\"onClicked\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:orientation=\"vertical\"\r\n                    android:background=\"@drawable/bg_myinfo\">\r\n                    <TextView\r\n                        android:id=\"@+id/edit_info_sex\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:text=\"完善性别信息\"\r\n                        android:textSize=\"14sp\"\r\n                        android:gravity=\"center_vertical\"/>\r\n                </LinearLayout>\r\n\r\n\r\n            </LinearLayout>\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\">\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:text=\"生日\"\r\n                    android:textSize=\"14sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:layout_marginRight=\"25sp\"\r\n                    android:textColor=\"#000\"/>\r\n                <LinearLayout\r\n                    android:id=\"@+id/ll_upBrithday\"\r\n                    android:onClick=\"onClicked\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:orientation=\"vertical\"\r\n                    android:background=\"@drawable/bg_myinfo\">\r\n                    <TextView\r\n                        android:id=\"@+id/upBrithday\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:text=\"完善生日信息\"\r\n                        android:textSize=\"14sp\"\r\n                        android:gravity=\"center_vertical\"/>\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:background=\"@drawable/bg_myinfo\"\r\n                android:orientation=\"vertical\">\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"个人简介\"\r\n                    android:textSize=\"14sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:layout_marginTop=\"25sp\"\r\n                    android:textColor=\"#000\"\r\n                    android:layout_marginBottom=\"20dp\"/>\r\n\r\n                <RelativeLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"100dp\">\r\n                    <EditText\r\n                        android:id=\"@+id/et_input\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"100dp\"\r\n                        android:enabled=\"true\"\r\n                        android:gravity=\"start\"\r\n                        android:inputType=\"textMultiLine\"\r\n                        android:minLines=\"6\"\r\n                        android:maxLines=\"6\"\r\n                        android:scrollbars=\"vertical\"\r\n                        android:hint=\"还差一句简介，有趣的灵魂就会被发现呦~\"\r\n                        android:textSize=\"14sp\"\r\n                        android:background=\"@null\"\r\n                        />\r\n                    <TextView\r\n                        android:id=\"@+id/tv_input\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_alignParentBottom=\"true\"\r\n                        android:layout_alignParentRight=\"true\"\r\n                        android:layout_marginRight=\"10dp\"\r\n                        android:text=\"0/200\"/>\r\n                </RelativeLayout>\r\n\r\n\r\n            </LinearLayout>\r\n        </LinearLayout>\r\n    </RelativeLayout>\r\n\r\n\r\n</LinearLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_edit_info.xml	(revision 85fec54bdd02397946f3fe95c21d988d761e9c1e)
-+++ app/src/main/res/layout/activity_edit_info.xml	(date 1607472516842)
-@@ -130,7 +130,7 @@
-                         android:id="@+id/edit_info_sex"
-                         android:layout_width="match_parent"
-                         android:layout_height="match_parent"
--                        android:text="完善性别信息"
-+                        android:hint="完善性别信息"
-                         android:textSize="14sp"
-                         android:gravity="center_vertical"/>
-                 </LinearLayout>
-@@ -159,7 +159,7 @@
-                         android:id="@+id/upBrithday"
-                         android:layout_width="wrap_content"
-                         android:layout_height="match_parent"
--                        android:text="完善生日信息"
-+                        android:hint="完善生日信息"
-                         android:textSize="14sp"
-                         android:gravity="center_vertical"/>
-                 </LinearLayout>
-Index: app/src/main/java/com/example/pet/my/MyFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.pet.my;\r\n\r\nimport android.content.Intent;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.provider.MediaStore;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.AdapterView;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.ListView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.pet.R;\r\nimport com.example.pet.my.editinfo.EditInfo;\r\nimport com.example.pet.my.order.MyOrderActivity;\r\nimport com.example.pet.other.Cache;\r\n\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport cn.smssdk.ui.companent.CircleImageView;\r\n\r\npublic class MyFragment extends Fragment {\r\n    private View view;\r\n    private TextView login;\r\n    private TextView count;\r\n    private CircleImageView photo;\r\n    private List<My> myList1 = new ArrayList<>();\r\n    private List<My> myList2 = new ArrayList<>();\r\n    private List<My> myList3 = new ArrayList<>();\r\n\r\n    @Override\r\n    public View onCreateView(final LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        view = inflater.inflate(R.layout.fragment_my, container, false);\r\n        login = view.findViewById(R.id.fragment_login);\r\n        count = view.findViewById(R.id.fragment_count);\r\n        photo = view.findViewById(R.id.user_photo);\r\n        login.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getContext(), Login.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        photo.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                if(Cache.user !=null){\r\n                Intent intent = new Intent(getContext(),EditInfo.class);\r\n                startActivity(intent);}\r\n                else {\r\n                    showLoginToast();\r\n                }\r\n            }\r\n        });\r\n        //适配第一个listView\r\n        MyAdapter myAdapter1 = new MyAdapter(view.getContext(), R.layout.my_listview, myList1);\r\n        ListView listView1 = (ListView) view.findViewById(R.id.my_listview1);\r\n        listView1.setAdapter(myAdapter1);\r\n        //适配第二个listView\r\n        MyAdapter myAdapter2 = new MyAdapter(view.getContext(), R.layout.my_listview, myList2);\r\n        ListView listView2 = (ListView) view.findViewById(R.id.my_listview2);\r\n        listView2.setAdapter(myAdapter2);\r\n        //适配第三个listView\r\n        MyAdapter myAdapter3 = new MyAdapter(view.getContext(), R.layout.my_listview, myList3);\r\n        ListView listView3 = (ListView) view.findViewById(R.id.my_listview3);\r\n        listView3.setAdapter(myAdapter3);\r\n        listView1.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                /**\r\n                 * 暂时修改\r\n                 */\r\n                if (Cache.user != null) {\r\n                    switch (position) {\r\n                        case 0:\r\n                            Intent intent2 = new Intent(getContext(), EditInfo.class);\r\n                            startActivity(intent2);\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                } else {\r\n                    showLoginToast();\r\n                }\r\n            }\r\n        });\r\n        listView2.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                if (Cache.user != null) {\r\n                    switch (position) {\r\n                        case 0:\r\n                            Intent intent = new Intent(getContext(), Post.class);\r\n                            startActivity(intent);\r\n                            break;\r\n                        case 1:\r\n                            Intent intent1 = new Intent(getContext(), MyOrderActivity.class);\r\n                            startActivity(intent1);\r\n                            break;\r\n                        case 2:\r\n                            Intent intent3 = new Intent(getContext(), History.class);\r\n                            startActivity(intent3);\r\n                            break;\r\n                        case 3:\r\n                            Intent intent4 = new Intent(getContext(), NewPet.class);\r\n                            startActivity(intent4);\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                } else {\r\n                    showLoginToast();\r\n                }\r\n            }\r\n        });\r\n        listView3.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                switch (position) {\r\n                    case 0:\r\n                        if (Cache.user != null) {\r\n                            Intent intent = new Intent(getContext(), Setting.class);\r\n                            startActivity(intent);\r\n                        } else {\r\n                            showLoginToast();\r\n                        }\r\n                        break;\r\n                    case 1:\r\n                        Intent intent1 = new Intent(getContext(), AboutUs.class);\r\n                        startActivity(intent1);\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n        });\r\n        return view;\r\n    }\r\n\r\n    //初始化数据\r\n    private void init() {\r\n        My my1 = new My(R.drawable.bianji, \"修改信息\", R.drawable.next);\r\n        myList1.add(my1);\r\n        My my2 = new My(R.drawable.mytie, \"我的帖子\", R.drawable.next);\r\n        myList2.add(my2);\r\n        My my3 = new My(R.drawable.myorder, \"我的订单\", R.drawable.next);\r\n        myList2.add(my3);\r\n        My my4 = new My(R.drawable.liulan, \"浏览记录\", R.drawable.next);\r\n        myList2.add(my4);\r\n        My my5 = new My(R.drawable.petlogo, \"我的宠物\", R.drawable.next);\r\n        myList2.add(my5);\r\n        My my6 = new My(R.drawable.setting, \"个人设置\", R.drawable.next);\r\n        myList3.add(my6);\r\n        My my7 = new My(R.drawable.we, \"关于我们\", R.drawable.next);\r\n        myList3.add(my7);\r\n    }\r\n\r\n    //加载数据，根据生命周期\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        init();\r\n    }\r\n\r\n    //通过生命周期方法 获得当前用户数据\r\n    @Override\r\n    public void onStart() {\r\n        if (Cache.user != null) {\r\n            login.setText(Cache.user.getUserName());\r\n            count.setText(Cache.user.getUserPhone());\r\n            if(Cache.user.getPhoto()!=null){\r\n            photo.setImageBitmap(Cache.user.getPhoto());\r\n            }\r\n        }\r\n        super.onStart();\r\n    }\r\n\r\n    public void showLoginToast() {\r\n        Toast.makeText(getContext(), \"请先登录\", Toast.LENGTH_LONG).show();\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/pet/my/MyFragment.java	(revision 85fec54bdd02397946f3fe95c21d988d761e9c1e)
-+++ app/src/main/java/com/example/pet/my/MyFragment.java	(date 1607482232238)
-@@ -78,9 +78,7 @@
-         listView1.setOnItemClickListener(new AdapterView.OnItemClickListener() {
-             @Override
-             public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
--                /**
--                 * 暂时修改
--                 */
-+
-                 if (Cache.user != null) {
-                     switch (position) {
-                         case 0:
-Index: app/build.gradle
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>apply plugin: 'com.android.application'\r\napply plugin: 'com.mob.sdk'\r\nMobSDK {\r\n    appKey \"31a0f08bbf072\"\r\n    appSecret \"a79d0868be86ae529a738c482cad4829\"\r\n    SMSSDK {}\r\n    fp true //严格模式\r\n}\r\nandroid {\r\n    sourceSets {\r\n        main {\r\n            jniLibs.srcDirs = ['libs']\r\n        }\r\n    }\r\n    compileOptions {\r\n        sourceCompatibility 1.8\r\n        targetCompatibility 1.8\r\n    }\r\n    compileSdkVersion 30\r\n    buildToolsVersion \"30.0.2\"\r\n    defaultConfig {\r\n        applicationId \"com.example.pet\"\r\n        minSdkVersion 19\r\n        targetSdkVersion 30\r\n        versionCode 1\r\n        versionName \"1.0\"\r\n        testInstrumentationRunner \"androidx.test.runner.AndroidJUnitRunner\"\r\n        multiDexEnabled true\r\n    }\r\n}\r\n\r\ndependencies {\r\n    //TabHost相关\r\n    implementation 'com.google.android.material:material:1.2.1'\r\n    implementation 'androidx.appcompat:appcompat:1.2.0'\r\n\r\n    //noinspection GradleCompatible\r\n    implementation 'com.android.support:design:26.1.0'\r\n    implementation 'com.astuetz:pagerslidingtabstrip:1.0.1'\r\n    implementation 'pl.droidsonroids.gif:android-gif-drawable:1.2.3'\r\n    implementation 'com.scwang.smartrefresh:SmartRefreshLayout:1.1.0-alpha-12'\r\n    implementation 'pl.droidsonroids.gif:android-gif-drawable:1.2.3'\r\n\r\n    implementation 'org.greenrobot:eventbus:3.1.1'\r\n    //时间选择器\r\n    implementation 'com.contrarywind:Android-PickerView:4.1.9'\r\n    implementation 'com.android.support:multidex:1.0.3'\r\n    implementation 'com.github.LuckSiege.PictureSelector:picture_library:v2.6.0'\r\n    implementation 'com.google.code.gson:gson:2.8.5'\r\n    implementation 'com.squareup.okhttp3:okhttp:3.10.0'\r\n    implementation 'com.github.zcweng:switch-button:0.0.3@aar'\r\n    implementation 'com.zhy:percent-support-extends:1.1.1'\r\n    implementation 'com.youth.banner:banner:1.4.10'\r\n    implementation 'com.github.bumptech.glide:glide:4.11.0'\r\n    implementation 'androidx.recyclerview:recyclerview:1.1.0'\r\n    implementation 'androidx.cardview:cardview:1.0.0'\r\n    implementation 'androidx.viewpager:viewpager:1.0.0'\r\n    implementation 'com.google.android.material:material:1.1.0'\r\n    annotationProcessor 'com.github.bumptech.glide:compiler:4.11.0'\r\n    implementation 'de.hdodenhof:circleimageview:3.1.0'\r\n    implementation 'com.youth.banner:banner:1.4.10'\r\n    implementation fileTree(dir: 'libs', include: ['*.jar'])\r\n    implementation 'androidx.appcompat:appcompat:1.0.2'\r\n    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'\r\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\r\n    testImplementation 'junit:junit:4.12'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.0'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.1.1'\r\n    implementation files('libs\\\\BaiduLBS_Android.jar')\r\n    implementation files('libs\\\\jcore-android-2.4.0.jar')\r\n    implementation files('libs\\\\jpush-android-3.6.8.jar')\r\n    implementation fileTree(dir: \"libs\", include: [\"*.jar\"])\r\n    implementation 'androidx.appcompat:appcompat:1.2.0'\r\n    implementation 'androidx.constraintlayout:constraintlayout:2.0.4'\r\n    testImplementation 'junit:junit:4.12'\r\n    androidTestImplementation 'androidx.test.ext:junit:1.1.2'\r\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'\r\n\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/build.gradle	(revision 85fec54bdd02397946f3fe95c21d988d761e9c1e)
-+++ app/build.gradle	(date 1607477878156)
-@@ -46,6 +46,7 @@
-     implementation 'com.contrarywind:Android-PickerView:4.1.9'
-     implementation 'com.android.support:multidex:1.0.3'
-     implementation 'com.github.LuckSiege.PictureSelector:picture_library:v2.6.0'
-+//    implementation 'com.github.LuckSiege.PictureSelector:picture_library:v2.2.0'
-     implementation 'com.google.code.gson:gson:2.8.5'
-     implementation 'com.squareup.okhttp3:okhttp:3.10.0'
-     implementation 'com.github.zcweng:switch-button:0.0.3@aar'
-Index: app/src/main/java/com/example/pet/my/editinfo/EditInfo.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.pet.my.editinfo;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.core.app.ActivityCompat;\r\n\r\nimport android.app.Activity;\r\nimport android.content.ContentResolver;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.BitmapFactory;\r\nimport android.graphics.Rect;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.Environment;\r\nimport android.os.Handler;\r\nimport android.os.IBinder;\r\nimport android.os.Looper;\r\nimport android.os.Message;\r\nimport android.provider.MediaStore;\r\nimport android.text.Editable;\r\nimport android.text.TextWatcher;\r\nimport android.util.Log;\r\nimport android.view.Gravity;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\nimport android.view.inputmethod.InputMethodManager;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.PopupWindow;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.bigkoo.pickerview.builder.OptionsPickerBuilder;\r\nimport com.bigkoo.pickerview.builder.TimePickerBuilder;\r\nimport com.bigkoo.pickerview.listener.CustomListener;\r\nimport com.bigkoo.pickerview.listener.OnOptionsSelectListener;\r\nimport com.bigkoo.pickerview.listener.OnTimeSelectListener;\r\nimport com.bigkoo.pickerview.view.OptionsPickerView;\r\nimport com.bigkoo.pickerview.view.TimePickerView;\r\nimport com.example.pet.R;\r\nimport com.example.pet.my.SetPassword;\r\nimport com.example.pet.other.Cache;\r\nimport com.example.pet.other.entity.User;\r\nimport com.google.gson.Gson;\r\nimport com.luck.picture.lib.PictureSelector;\r\nimport com.luck.picture.lib.config.PictureConfig;\r\nimport com.luck.picture.lib.config.PictureMimeType;\r\nimport com.luck.picture.lib.entity.LocalMedia;\r\n\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\nimport java.util.List;\r\n\r\nimport cn.jiguang.net.HttpUtils;\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\nimport okhttp3.Call;\r\nimport okhttp3.Callback;\r\nimport okhttp3.MediaType;\r\nimport okhttp3.MultipartBody;\r\nimport okhttp3.OkHttpClient;\r\nimport okhttp3.Request;\r\nimport okhttp3.RequestBody;\r\nimport okhttp3.Response;\r\n\r\nimport static com.luck.picture.lib.config.PictureConfig.REQUEST_CAMERA;\r\n\r\npublic class EditInfo extends AppCompatActivity {\r\n    private User user = new User();\r\n    private TextView upSex;\r\n    private PopupWindow popupWindow;\r\n    private Toolbar toolbar;\r\n    private CircleImageView upPhoto;\r\n    private TextView upBrithday;\r\n    private EditText upName;\r\n    private TimePickerView pvTime;\r\n    private OptionsPickerView pvCustomOptions;\r\n    private ArrayList<String> cardItem = new ArrayList<>();\r\n    //输入框初始值\r\n    private int num = 0;\r\n    //输入框最大值\r\n    public int mMaxNum=200;\r\n    public EditText etInput;\r\n    private TextView tvInput;\r\n    private String image_path;\r\n    private static final int REQUEST_EXTERNAL_STORAGE = 1;\r\n    private static String[] PERMISSIONS_STORAGE = {\r\n            \"android.permission.READ_EXTERNAL_STORAGE\",\r\n            \"android.permission.WRITE_EXTERNAL_STORAGE\",\r\n            \"android.permission.CAMER\"};\r\n\r\n    Handler hd = new Handler() {\r\n        @Override\r\n        public void handleMessage(Message msg) {\r\n            if(msg.what == 1){\r\n                Toast.makeText(EditInfo.this,\"上传成功\",Toast.LENGTH_SHORT);\r\n                upData();\r\n            }else if(msg.what == 2){\r\n                Log.e(\"up\",\"6b\");\r\n                Toast.makeText(EditInfo.this,\"上传失败了\",Toast.LENGTH_SHORT);\r\n            }else if(msg.what == 3){\r\n                Toast.makeText(EditInfo.this,\"上传成功\",Toast.LENGTH_SHORT);\r\n                EditInfo.this.finish();\r\n            }else {\r\n                Log.e(\"up\",\"6b\");\r\n                Toast.makeText(EditInfo.this,\"上传失败了\",Toast.LENGTH_SHORT);\r\n            }\r\n        }\r\n    };\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_edit_info);\r\n//        if (Build.VERSION.SDK_INT >= 21) {   //只有5.0及以上系统才支持，因此这里先进行了一层if判断\r\n//            View decorView = getWindow().getDecorView();\r\n//            int option = View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\r\n//                    | View.SYSTEM_UI_FLAG_LAYOUT_STABLE    //设置为全屏显示，必须这两行代码一起才能生效\r\n//                    |View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR;  //因为背景为浅色，设置通知栏字体颜色为深色\r\n//            decorView.setSystemUiVisibility(option);\r\n//            getWindow().setStatusBarColor(Color.TRANSPARENT);//设置为透明\r\n//        }\r\n        //设置控件内容\r\n        setView();\r\n    }\r\n\r\n    public void onClicked(View view) {\r\n        switch(view.getId()){\r\n            case R.id.upPhoto:\r\n                //上传头像\r\n                upPic();\r\n                break;\r\n            case R.id.upName:\r\n                break;\r\n            case R.id.ll_upSex:\r\n                pvCustomOptions.show();\r\n                break;\r\n            case R.id.ll_upBrithday:\r\n                pvTime.show();\r\n                break;\r\n            case R.id.tv_save:\r\n                //保存信息\r\n                upPhoto(image_path);\r\n                break;\r\n        }\r\n    }\r\n\r\n    private void upSex() {\r\n        // 注意：自定义布局中，id为 optionspicker 或者 timepicker 的布局以及其子控件必须要有，否则会报空指针\r\n        // 具体可参考demo 里面的两个自定义布局\r\n        pvCustomOptions = new OptionsPickerBuilder(this, new OnOptionsSelectListener() {\r\n            @Override\r\n            public void onOptionsSelect(int options1, int options2, int options3, View v) {\r\n               //返回的分别是三个级别的选中位置\r\n                String tx = cardItem.get(options1);\r\n                upSex.setText(tx);\r\n                Cache.user.setUserSex(tx);\r\n                user.setUserSex(tx);\r\n            }\r\n        })\r\n                .setLayoutRes(R.layout.picker_sex_bg, new CustomListener() {\r\n                    @Override\r\n                    public void customLayout(View v) {\r\n                        //自定义布局中的控件初始化及事件处理\r\n                        final TextView tvSubmit = v.findViewById(R.id.tv_finish);\r\n                        TextView tvCancel = v.findViewById(R.id.tv_cancel);\r\n                        tvSubmit.setOnClickListener(new View.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(View v) {\r\n                                pvCustomOptions.returnData();\r\n                                pvCustomOptions.dismiss();\r\n                            }\r\n                        });\r\n                        tvCancel.setOnClickListener(new View.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(View v) {\r\n                                pvCustomOptions.dismiss();\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                })\r\n                .setOutSideCancelable(true)\r\n                .build();\r\n        pvCustomOptions.setPicker(cardItem);//添加数据\r\n    }\r\n\r\n    private void upBri() {\r\n        Calendar selectedDate = Calendar.getInstance();//系统当前时间\r\n        Calendar startDate = Calendar.getInstance();\r\n        startDate.set(1900, 1, 1);\r\n        Calendar endDate = Calendar.getInstance();\r\n        pvTime = new TimePickerBuilder(this, new OnTimeSelectListener() {\r\n            @Override\r\n            public void onTimeSelect(Date date, View v) {\r\n                upBrithday.setText(getTimes(date));\r\n                Cache.user.setUserBrithday(getTimes(date));\r\n                user.setUserBrithday(getTimes(date));\r\n            }\r\n        })\r\n                .setDate(selectedDate)\r\n                .setRangDate(startDate,endDate)\r\n                .setLayoutRes(R.layout.picker_time_bg, new CustomListener() {\r\n                    @Override\r\n                    public void customLayout(View v) {\r\n                        TextView tvSubmit = v.findViewById(R.id.tv_finish);\r\n                        TextView tvCannel = v.findViewById(R.id.tv_cancel);\r\n                        tvSubmit.setOnClickListener(new View.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(View v) {\r\n                                pvTime.returnData();\r\n                                pvTime.dismiss();\r\n                            }\r\n                        });\r\n                        tvCannel.setOnClickListener(new View.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(View v) {\r\n                                pvTime.dismiss();\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n                .setOutSideCancelable(true)\r\n                .setContentTextSize(18)\r\n                .setType(new boolean[]{true, true, true, false, false, false})\r\n                .setLabel(\"年\", \"月\", \"日\", \"时\", \"分\", \"秒\")\r\n                .setLineSpacingMultiplier(1.2f)\r\n                .setTextXOffset(0, 0, 0, 40, 0, -40)\r\n                .isCenterLabel(false) //是否只显示中间选中项的label文字，false则每项item全部都带有label。\r\n                .setDividerColor(0xFF24AD9D)\r\n                .build();\r\n    }\r\n\r\n    //格式化时间\r\n    private String getTimes(Date date) {\r\n        SimpleDateFormat format = new SimpleDateFormat(\"yyyy-MM-dd\");\r\n        return format.format(date);\r\n    }\r\n\r\n    @Override\r\n    public boolean dispatchTouchEvent(MotionEvent ev) {\r\n        if (ev.getAction() == MotionEvent.ACTION_DOWN) {\r\n            View v = getCurrentFocus();\r\n            if (isShouldHideKeyboard(v, ev)) {\r\n                hideKeyboard(v.getWindowToken());\r\n            }\r\n        }\r\n        return super.dispatchTouchEvent(ev);\r\n    }\r\n\r\n    /**\r\n     * 根据EditText所在坐标和用户点击的坐标相对比，来判断是否隐藏键盘，因为当用户点击EditText时则不能隐藏\r\n     *\r\n     * @param v\r\n     * @param event\r\n     * @return\r\n     */\r\n    private boolean isShouldHideKeyboard(View v, MotionEvent event) {\r\n        if (v != null && (v instanceof EditText)) {\r\n            int[] l = {0, 0};\r\n            v.getLocationInWindow(l);\r\n            int left = l[0],\r\n                    top = l[1],\r\n                    bottom = top + v.getHeight(),\r\n                    right = left + v.getWidth();\r\n            if (event.getX() > left && event.getX() < right\r\n                    && event.getY() > top && event.getY() < bottom) {\r\n                // 点击EditText的事件，忽略它。\r\n                return false;\r\n            } else {\r\n                return true;\r\n            }\r\n        }\r\n        // 如果焦点不是EditText则忽略，这个发生在视图刚绘制完，第一个焦点不在EditText上，和用户用轨迹球选择其他的焦点\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 获取InputMethodManager，隐藏软键盘\r\n     * @param token\r\n     */\r\n    private void hideKeyboard(IBinder token) {\r\n        if (token != null) {\r\n            InputMethodManager im = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\r\n            im.hideSoftInputFromWindow(token, InputMethodManager.HIDE_NOT_ALWAYS);\r\n        }\r\n    }\r\n\r\n    private void setView() {\r\n        upSex = findViewById(R.id.edit_info_sex);\r\n        toolbar = findViewById(R.id.edit_toolbar);\r\n        toolbar.setNavigationOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                EditInfo.this.finish();\r\n            }\r\n        });\r\n        upBrithday = findViewById(R.id.upBrithday);\r\n        upName = findViewById(R.id.upName);\r\n        upPhoto = findViewById(R.id.upPhoto);\r\n        etInput = findViewById(R.id.et_input);\r\n        tvInput = findViewById(R.id.tv_input);\r\n        cardItem.add(\"未知\");\r\n        cardItem.add(\"男\");\r\n        cardItem.add(\"女\");\r\n        //加载数据\r\n        upSex();\r\n        upBri();\r\n        countWords();\r\n\r\n\r\n\r\n    }\r\n\r\n    /**\r\n     * 记录字数和限制最大输入字数\r\n     */\r\n    private void countWords() {\r\n        etInput.addTextChangedListener(new TextWatcher() {\r\n            //记录输入的字数\r\n            private CharSequence wordNum;\r\n            private int selectionStart;\r\n            private int selectionEnd;\r\n            @Override\r\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n                //实时记录输入的字数\r\n                wordNum= s;\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable s) {\r\n\r\n                Cache.user.setUserAutograph(Cache.user.getUserAutograph() + s);\r\n                int number = num + s.length();\r\n                //TextView显示剩余字数\r\n                tvInput.setText(\"\" + number+\"/\" + mMaxNum);\r\n                selectionStart=etInput.getSelectionStart();\r\n                selectionEnd = etInput.getSelectionEnd();\r\n                //判断大于最大值\r\n                if (wordNum.length() > mMaxNum) {\r\n                    //删除多余输入的字（不会显示出来）\r\n                    s.delete(selectionStart - 1, selectionEnd);\r\n                    int tempSelection = selectionEnd;\r\n                    etInput.setText(s);\r\n                    etInput.setSelection(tempSelection);//设置光标在最后\r\n                    //吐司最多输入300字\r\n                    Toast.makeText(EditInfo.this, \"最多输入\"+mMaxNum+\"字\", Toast.LENGTH_SHORT).show();\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    private void upPic() {\r\n        //动态申请权限\r\n        verifyStoragePermissions(this);\r\n        PictureSelector.create(this)\r\n                .openGallery(PictureConfig.TYPE_IMAGE)\r\n                .imageEngine(GlideEngine.createGlideEngine())\r\n                .imageSpanCount(4)// 每行显示个数 int\r\n                .maxSelectNum(1)\r\n                .isWeChatStyle(true)\r\n                .selectionMode(PictureConfig.SINGLE)// 多选 or 单选 PictureConfig.MULTIPLE or PictureConfig.SINGLE\r\n                .isSingleDirectReturn(true)//PictureConfig.SINGLE模式下是否直接返回\r\n                .isPreviewImage(true)// 是否可预览图片 true or false\r\n                .isCamera(true)// 是否显示拍照按钮 true or false\r\n                .imageFormat(PictureMimeType.JPEG)// 拍照保存图片格式后缀,默认jpeg\r\n                .isZoomAnim(true)// 图片列表点击 缩放效果 默认true\r\n                .setOutputCameraPath(Const.getImgPath())// 自定义拍照保存路径,可不填\r\n                .isEnableCrop(true)// 是否裁剪 true or false\r\n                .isCompress(true)// 是否压缩 true or false\r\n                .compressSavePath(Const.getImgPath())//压缩图片保存地址\r\n                .freeStyleCropEnabled(true)// 裁剪框是否可拖拽 true or false\r\n                .showCropGrid(true)// 是否显示裁剪矩形网格 圆形裁剪时建议设为false    true or false\r\n                .forResult(PictureConfig.CHOOSE_REQUEST);//结果回调onActivityResult code\r\n    }\r\n\r\n    //接受回调\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (resultCode == -1 && data != null) {\r\n            switch (requestCode) {\r\n                case PictureConfig.CHOOSE_REQUEST:\r\n                    List<LocalMedia> selectList = PictureSelector.obtainMultipleResult(data);\r\n                    image_path = selectList.get(0).getCompressPath();\r\n                    upPhoto.setImageURI(Uri.parse(image_path));\r\n                    //上传图片\r\n                    Cache.user.setPicturePath(image_path);\r\n                    user.setPicturePath(image_path);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 上传图片\r\n     * 未测试\r\n     */\r\n    public void upPhoto(String path){\r\n        Cache.user.setUserName(upName.getText().toString());\r\n        Log.e(\"name\",upName.getText().toString());\r\n        Log.e(\"up\",\"1\");\r\n        File file = new File(path);\r\n        Log.e(\"up\",\"2\");\r\n        String url = Cache.MY_URL + \"UpdataUserInfoServlet\";\r\n        OkHttpClient okHttpClient = new OkHttpClient();\r\n        if(file != null && file.exists()){\r\n            RequestBody requestBody = new MultipartBody.Builder()\r\n                    .setType(MultipartBody.FORM)\r\n                    .addFormDataPart(\"file\",\r\n                            Cache.userPhone + \".jpg\",\r\n                            RequestBody.create(MediaType.parse(\"image/png\"),file))\r\n                    .addFormDataPart(\"phone\",Cache.userPhone)\r\n                    .build();\r\n            Request request = new Request.Builder()\r\n                    .url(url)\r\n                    .post(requestBody)\r\n                    .build();\r\n            Call call = okHttpClient.newCall(request);\r\n\r\n            Log.e(\"up\",\"3\");\r\n            call.enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Call call, IOException e) {\r\n                    //失败\r\n                    Log.e(\"up\",\"4b\");\r\n                    Message msg = new Message();\r\n                    msg.what = 2;\r\n                    msg.obj = 1;\r\n                    Log.e(\"up\",\"5b\");\r\n                    hd.sendMessage(msg);\r\n                    Log.e(\"up\",\"6b\");\r\n                    e.printStackTrace();\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Call call, Response response) throws IOException {\r\n                    //上传成功\r\n                    Log.e(\"up\",\"4a\");\r\n                    Message msg = new Message();\r\n                    String res = response.body().string();\r\n                    if(res.equals(\"true\")){\r\n                        msg.what = 1;\r\n                        msg.obj = 1;\r\n                        Log.e(\"updata\",res);\r\n                    }else {\r\n                        msg.what = 2;\r\n                        msg.obj = 1;\r\n                        Log.e(\"updata\",res);\r\n                    }\r\n                    hd.sendMessage(msg);\r\n\r\n                }\r\n            });\r\n\r\n        }else {\r\n            Toast.makeText(EditInfo.this,\"请添加头像\",Toast.LENGTH_SHORT);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 上传数据\r\n     */\r\n    public void upData(){\r\n        OkHttpClient okHttpClient = new OkHttpClient();\r\n        //创建请求体对象\r\n        user.setUserPhone(Cache.userPhone);\r\n        user.setUserName(upName.getText().toString());\r\n        user.setUserAutograph(etInput.getText().toString());\r\n        user.setPicturePath(Cache.userPhone + \".jpg\");\r\n        RequestBody requestBody = RequestBody.create(MediaType.parse(\r\n                \"text/plain;charset=UTF-8\"),new Gson().toJson(user));\r\n        //3.创建请求对象\r\n        Request request = new Request.Builder()\r\n                .post(requestBody)\r\n                .url(Cache.MY_URL + \"UpDataUserInfo2Servlet\")\r\n                .build();\r\n        //3.创建Call对象，发送请求，并接受响应\r\n        Call call = okHttpClient.newCall(request);\r\n        //异步网络请求（无需手动使用子线程）\r\n        call.enqueue(new Callback() {\r\n            @Override\r\n            public void onFailure(Call call, IOException e) {\r\n                //失败\r\n                Message msg = new Message();\r\n                msg.what = 4;\r\n                msg.obj = 3;\r\n                Log.e(\"up\",\"5b\");\r\n                hd.sendMessage(msg);\r\n                Log.e(\"up\",\"6b\");\r\n                e.printStackTrace();\r\n            }\r\n\r\n            @Override\r\n            public void onResponse(Call call, Response response) throws IOException {\r\n                //上传成功\r\n                Message msg = new Message();\r\n                String res = response.body().string();\r\n                if(res.equals(\"true\")){\r\n                    msg.what = 3;\r\n                    msg.obj = 1;\r\n                    Log.e(\"updata\",res);\r\n                }else {\r\n                    msg.what = 2;\r\n                    msg.obj = 1;\r\n                    Log.e(\"updata\",res);\r\n                }\r\n                hd.sendMessage(msg);\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    //然后通过一个函数来申请权限\r\n    public static void verifyStoragePermissions(Activity activity) {\r\n        try {\r\n            //检测是否有写的权限\r\n            int permission = ActivityCompat.checkSelfPermission(activity,\r\n                    \"android.permission.WRITE_EXTERNAL_STORAGE\");\r\n            if (permission != PackageManager.PERMISSION_GRANTED) {\r\n                // 没有写的权限，去申请写的权限，会弹出对话框\r\n                ActivityCompat.requestPermissions(activity, PERMISSIONS_STORAGE,REQUEST_EXTERNAL_STORAGE);\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/pet/my/editinfo/EditInfo.java	(revision 85fec54bdd02397946f3fe95c21d988d761e9c1e)
-+++ app/src/main/java/com/example/pet/my/editinfo/EditInfo.java	(date 1607477921933)
-@@ -56,6 +56,8 @@
- import java.io.File;
- import java.io.IOException;
- import java.io.InputStream;
-+import java.net.MalformedURLException;
-+import java.net.URL;
- import java.text.SimpleDateFormat;
- import java.util.ArrayList;
- import java.util.Calendar;
-@@ -131,6 +133,53 @@
- //        }
-         //设置控件内容
-         setView();
-+        initData();
-+        //加载数据
-+        upSex();
-+        upBri();
-+        countWords();
-+    }
-+
-+    private void initData() {
-+        cardItem.add("未知");
-+        cardItem.add("男");
-+        cardItem.add("女");
-+        Log.e("initData","start");
-+        if(Cache.user.getPicturePath() != null){
-+            upPhoto.setImageBitmap(Cache.user.getPhoto());
-+        }
-+        if(Cache.user.getUserName() != null){
-+            upName.setText(Cache.user.getUserName());
-+        }
-+        if(Cache.user.getUserSex() != null){
-+            upSex.setText(Cache.user.getUserSex());
-+        }
-+        if(Cache.user.getUserBrithday() != null){
-+            upBrithday.setText(Cache.user.getUserBrithday());
-+        }
-+        if(Cache.user.getUserAutograph() != null){
-+            etInput.setText(Cache.user.getUserAutograph());
-+        }
-+        Log.e("initData","over");
-+    }
-+
-+    private void setView() {
-+        upSex = findViewById(R.id.edit_info_sex);
-+        toolbar = findViewById(R.id.edit_toolbar);
-+        toolbar.setNavigationOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                EditInfo.this.finish();
-+            }
-+        });
-+        upBrithday = findViewById(R.id.upBrithday);
-+        upName = findViewById(R.id.upName);
-+        upPhoto = findViewById(R.id.upPhoto);
-+        etInput = findViewById(R.id.et_input);
-+        tvInput = findViewById(R.id.tv_input);
-+
-+
-+
-     }
- 
-     public void onClicked(View view) {
-@@ -149,7 +198,11 @@
-                 break;
-             case R.id.tv_save:
-                 //保存信息
--                upPhoto(image_path);
-+                if(image_path == null){
-+                    upData();
-+                }else {
-+                    upPhoto(image_path);
-+                }
-                 break;
-         }
-     }
-@@ -173,6 +226,8 @@
-                         //自定义布局中的控件初始化及事件处理
-                         final TextView tvSubmit = v.findViewById(R.id.tv_finish);
-                         TextView tvCancel = v.findViewById(R.id.tv_cancel);
-+                        TextView tyTitle = v.findViewById(R.id.tv_title);
-+                        tyTitle.setText("性别");
-                         tvSubmit.setOnClickListener(new View.OnClickListener() {
-                             @Override
-                             public void onClick(View v) {
-@@ -189,6 +244,8 @@
- 
-                     }
-                 })
-+                .setLineSpacingMultiplier(1.5f)//滚轮字体间距
-+                .setContentTextSize(22)//字体大小
-                 .setOutSideCancelable(true)
-                 .build();
-         pvCustomOptions.setPicker(cardItem);//添加数据
-@@ -229,11 +286,11 @@
-                         });
-                     }
-                 })
-+                .setContentTextSize(22)//字体大小
-                 .setOutSideCancelable(true)
--                .setContentTextSize(18)
-                 .setType(new boolean[]{true, true, true, false, false, false})
-                 .setLabel("年", "月", "日", "时", "分", "秒")
--                .setLineSpacingMultiplier(1.2f)
-+                .setLineSpacingMultiplier(1.5f)
-                 .setTextXOffset(0, 0, 0, 40, 0, -40)
-                 .isCenterLabel(false) //是否只显示中间选中项的label文字，false则每项item全部都带有label。
-                 .setDividerColor(0xFF24AD9D)
-@@ -246,6 +303,11 @@
-         return format.format(date);
-     }
- 
-+    /**
-+     * 隐藏键盘
-+     * @param ev
-+     * @return
-+     */
-     @Override
-     public boolean dispatchTouchEvent(MotionEvent ev) {
-         if (ev.getAction() == MotionEvent.ACTION_DOWN) {
-@@ -295,31 +357,7 @@
-         }
-     }
- 
--    private void setView() {
--        upSex = findViewById(R.id.edit_info_sex);
--        toolbar = findViewById(R.id.edit_toolbar);
--        toolbar.setNavigationOnClickListener(new View.OnClickListener() {
--            @Override
--            public void onClick(View v) {
--                EditInfo.this.finish();
--            }
--        });
--        upBrithday = findViewById(R.id.upBrithday);
--        upName = findViewById(R.id.upName);
--        upPhoto = findViewById(R.id.upPhoto);
--        etInput = findViewById(R.id.et_input);
--        tvInput = findViewById(R.id.tv_input);
--        cardItem.add("未知");
--        cardItem.add("男");
--        cardItem.add("女");
--        //加载数据
--        upSex();
--        upBri();
--        countWords();
--
- 
--
--    }
- 
-     /**
-      * 记录字数和限制最大输入字数
-@@ -481,9 +519,38 @@
-         OkHttpClient okHttpClient = new OkHttpClient();
-         //创建请求体对象
-         user.setUserPhone(Cache.userPhone);
--        user.setUserName(upName.getText().toString());
--        user.setUserAutograph(etInput.getText().toString());
--        user.setPicturePath(Cache.userPhone + ".jpg");
-+        String name = upName.getText().toString();
-+        if(name == null){
-+            user.setUserName("");
-+        }else {
-+            user.setUserName(name);
-+        }
-+        String autograph = etInput.getText().toString();
-+        if(autograph == null){
-+            user.setUserAutograph("");
-+        }else {
-+            user.setUserAutograph(autograph);
-+        }
-+        String path = Cache.user.getPicturePath();
-+        if(path == null){
-+            user.setPicturePath("");
-+        }else {
-+            user.setPicturePath(path);
-+        }
-+        String sex = upSex.getText().toString();
-+        if(sex == null){
-+            user.setUserSex("未知");
-+        }else {
-+            user.setUserSex(sex);
-+        }
-+        String brithday = upBrithday.getText().toString();
-+        if(brithday == null){
-+            Calendar selectedDate = Calendar.getInstance();//系统当前时间
-+            user.setUserBrithday(getTimes(selectedDate.getTime()));
-+        }else {
-+            user.setUserBrithday(brithday);
-+        }
-+
-         RequestBody requestBody = RequestBody.create(MediaType.parse(
-                 "text/plain;charset=UTF-8"),new Gson().toJson(user));
-         //3.创建请求对象
-@@ -541,7 +608,4 @@
-             e.printStackTrace();
-         }
-     }
--
--
--
- }
-\ No newline at end of file
-Index: app/src/main/res/layout/activity_pet.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\">\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\">\r\n    <!--顶栏-->\r\n    <LinearLayout\r\n\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginLeft=\"25dp\"\r\n        android:layout_marginRight=\"25dp\">\r\n\r\n        <LinearLayout\r\n\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/pet_photo\"\r\n                android:layout_width=\"200dp\"\r\n                android:layout_height=\"200dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_marginTop=\"21dp\"\r\n                android:background=\"@drawable/hashiqi\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\"\r\n                android:layout_marginTop=\"50dp\"\r\n               >\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginRight=\"25sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:text=\"爱称\"\r\n                    android:textColor=\"#000\"\r\n                    android:textSize=\"12sp\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:background=\"@drawable/bg_myinfo\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/pet_name\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:background=\"@null\"\r\n                        android:gravity=\"center_vertical\"\r\n                        android:onClick=\"onClicked\"\r\n                        android:text=\"有光\"\r\n                        android:textSize=\"12sp\" />\r\n                </LinearLayout>\r\n\r\n\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\"\r\n               >\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginRight=\"25sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:text=\"种类\"\r\n                    android:textColor=\"#000\"\r\n                    android:textSize=\"12sp\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:background=\"@drawable/bg_myinfo\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/pet_type\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:background=\"@null\"\r\n                        android:gravity=\"center_vertical\"\r\n                        android:onClick=\"onClicked\"\r\n                        android:text=\"哈士奇\"\r\n                        android:textColor=\"@color/black\"\r\n                        android:textSize=\"12sp\" />\r\n                </LinearLayout>\r\n\r\n\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\"\r\n               >\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginRight=\"25sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:text=\"年龄\"\r\n                    android:textColor=\"#000\"\r\n                    android:textSize=\"12sp\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:background=\"@drawable/bg_myinfo\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/pet_age\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:background=\"@null\"\r\n                        android:gravity=\"center_vertical\"\r\n                        android:onClick=\"onClicked\"\r\n                        android:text=\"4岁\"\r\n                        android:textColor=\"@color/black\"\r\n                        android:textSize=\"12sp\" />\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n\r\n                android:orientation=\"vertical\">\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"25sp\"\r\n                    android:layout_marginBottom=\"20dp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:text=\"宠物简介\"\r\n                    android:textColor=\"#000\"\r\n                    android:textSize=\"12sp\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_marginBottom=\"30dp\"\r\n                  android:background=\"@drawable/bg_myinfo\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"100dp\">\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/pet_autograph\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"100dp\"\r\n                        android:background=\"@null\"\r\n                        android:enabled=\"true\"\r\n                        android:gravity=\"start\"\r\n                        android:hint=\"阿巴阿巴阿巴\"\r\n                        android:inputType=\"textMultiLine\"\r\n                        android:maxLines=\"6\"\r\n                        android:minLines=\"6\"\r\n                        android:scrollbars=\"vertical\"\r\n                        android:textSize=\"12sp\" />\r\n                </LinearLayout>\r\n                <Button\r\n                    android:textColor=\"@color/red\"\r\n                    android:id=\"@+id/pet_update\"\r\n                    android:background=\"@drawable/edit\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"修改\" />\r\n            </LinearLayout>\r\n        </LinearLayout>\r\n    </LinearLayout>\r\n\r\n\r\n</LinearLayout>\r\n</ScrollView>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_pet.xml	(revision 85fec54bdd02397946f3fe95c21d988d761e9c1e)
-+++ app/src/main/res/layout/activity_pet.xml	(date 1607472408112)
-@@ -1,12 +1,13 @@
- <?xml version="1.0" encoding="utf-8"?>
--<ScrollView
--    xmlns:android="http://schemas.android.com/apk/res/android"
--    android:layout_width="match_parent"
--    android:layout_height="match_parent">
-+<!--<ScrollView-->
-+<!--    xmlns:android="http://schemas.android.com/apk/res/android"-->
-+<!--    android:layout_width="match_parent"-->
-+<!--    android:layout_height="match_parent">-->
- <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
--    android:orientation="vertical">
-+    android:orientation="vertical"
-+    android:background="#fff">
-     <!--顶栏-->
-     <LinearLayout
- 
-@@ -23,7 +24,7 @@
- 
-             <ImageView
-                 android:id="@+id/pet_photo"
--                android:layout_width="200dp"
-+                android:layout_width="250dp"
-                 android:layout_height="200dp"
-                 android:layout_gravity="center"
-                 android:layout_marginTop="21dp"
-@@ -33,6 +34,7 @@
-                 android:layout_width="match_parent"
-                 android:layout_height="50dp"
-                 android:layout_marginTop="50dp"
-+                android:background="#fff"
-                >
- 
-                 <TextView
-@@ -67,6 +69,7 @@
-             <LinearLayout
-                 android:layout_width="match_parent"
-                 android:layout_height="50dp"
-+                android:background="#fff"
-                >
- 
-                 <TextView
-@@ -79,18 +82,18 @@
-                     android:textSize="12sp" />
- 
-                 <LinearLayout
-+                    android:id="@+id/ll_pet_type"
-                     android:layout_width="match_parent"
-                     android:layout_height="match_parent"
-                     android:background="@drawable/bg_myinfo"
-                     android:orientation="vertical">
- 
--                    <EditText
-+                    <TextView
-                         android:id="@+id/pet_type"
-                         android:layout_width="wrap_content"
-                         android:layout_height="match_parent"
-                         android:background="@null"
-                         android:gravity="center_vertical"
--                        android:onClick="onClicked"
-                         android:text="哈士奇"
-                         android:textColor="@color/black"
-                         android:textSize="12sp" />
-@@ -102,6 +105,7 @@
-             <LinearLayout
-                 android:layout_width="match_parent"
-                 android:layout_height="50dp"
-+                android:background="#fff"
-                >
- 
-                 <TextView
-@@ -114,6 +118,7 @@
-                     android:textSize="12sp" />
- 
-                 <LinearLayout
-+                    android:id="@+id/ll_pet_age"
-                     android:layout_width="match_parent"
-                     android:layout_height="match_parent"
-                     android:background="@drawable/bg_myinfo"
-@@ -125,7 +130,6 @@
-                         android:layout_height="match_parent"
-                         android:background="@null"
-                         android:gravity="center_vertical"
--                        android:onClick="onClicked"
-                         android:text="4岁"
-                         android:textColor="@color/black"
-                         android:textSize="12sp" />
-@@ -136,7 +140,7 @@
- 
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
--
-+                android:background="@drawable/bg_myinfo"
-                 android:orientation="vertical">
- 
-                 <TextView
-@@ -149,7 +153,7 @@
-                     android:textColor="#000"
-                     android:textSize="12sp" />
- 
--                <LinearLayout
-+                <RelativeLayout
-                     android:layout_marginBottom="30dp"
-                   android:background="@drawable/bg_myinfo"
-                     android:layout_width="match_parent"
-@@ -168,7 +172,15 @@
-                         android:minLines="6"
-                         android:scrollbars="vertical"
-                         android:textSize="12sp" />
--                </LinearLayout>
-+                    <TextView
-+                        android:id="@+id/tv_input"
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:layout_alignParentBottom="true"
-+                        android:layout_alignParentRight="true"
-+                        android:layout_marginRight="10dp"
-+                        android:text="0/200"/>
-+                </RelativeLayout>
-                 <Button
-                     android:textColor="@color/red"
-                     android:id="@+id/pet_update"
-@@ -182,4 +194,4 @@
- 
- 
- </LinearLayout>
--</ScrollView>
-\ No newline at end of file
-+<!--</ScrollView>-->
-\ No newline at end of file
-Index: app/src/main/res/layout/picker_sex_bg.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"wrap_content\"\r\n    android:layout_height=\"wrap_content\"\r\n    android:orientation=\"vertical\"\r\n    android:background=\"@drawable/shape_picker_bg\">\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"50dp\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/tv_cancel\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_centerVertical=\"true\"\r\n            android:layout_marginLeft=\"17dp\"\r\n            android:padding=\"8dp\"\r\n            android:text=\"取消\"\r\n            android:textSize=\"18sp\"\r\n            android:textColor=\"@color/Blue\"/>\r\n        <TextView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_centerVertical=\"true\"\r\n            android:layout_centerHorizontal=\"true\"\r\n            android:text=\"性别\"\r\n            android:textSize=\"18sp\"/>\r\n\r\n        <TextView\r\n            android:id=\"@+id/tv_finish\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_alignParentRight=\"true\"\r\n            android:layout_centerVertical=\"true\"\r\n            android:layout_marginRight=\"17dp\"\r\n            android:padding=\"8dp\"\r\n            android:text=\"完成\"\r\n            android:textColor=\"@color/Blue\"\r\n            android:textSize=\"18sp\" />\r\n    </RelativeLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"1dp\"\r\n        android:background=\"#EEEEEE\"/>\r\n    <!--此部分需要完整复制过去，删减或者更改ID会导致初始化找不到内容而报空-->\r\n    <LinearLayout\r\n        android:id=\"@+id/optionspicker\"\r\n        android:layout_width=\"fill_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:minHeight=\"150dp\"\r\n        android:gravity=\"center\"\r\n        android:background=\"@android:color/white\"\r\n        android:orientation=\"horizontal\">\r\n\r\n        <com.contrarywind.view.WheelView\r\n            android:id=\"@+id/options1\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"match_parent\"\r\n            android:layout_weight=\"1\" />\r\n\r\n        <com.contrarywind.view.WheelView\r\n            android:id=\"@+id/options2\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"match_parent\"\r\n            android:layout_weight=\"1\" />\r\n\r\n        <com.contrarywind.view.WheelView\r\n            android:id=\"@+id/options3\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"match_parent\"\r\n            android:layout_weight=\"1\" />\r\n    </LinearLayout>\r\n</LinearLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/picker_sex_bg.xml	(revision 85fec54bdd02397946f3fe95c21d988d761e9c1e)
-+++ app/src/main/res/layout/picker_sex_bg.xml	(date 1607472516860)
-@@ -20,11 +20,11 @@
-             android:textSize="18sp"
-             android:textColor="@color/Blue"/>
-         <TextView
-+            android:id="@+id/tv_title"
-             android:layout_width="wrap_content"
-             android:layout_height="wrap_content"
-             android:layout_centerVertical="true"
-             android:layout_centerHorizontal="true"
--            android:text="性别"
-             android:textSize="18sp"/>
- 
-         <TextView
-Index: app/src/main/java/com/example/pet/other/entity/Pet.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.pet.other.entity;\r\n\r\nimport android.graphics.Bitmap;\r\n\r\nimport java.io.Serializable;\r\n\r\npublic class Pet implements Serializable {\r\n    private int  petId;\r\n    private Bitmap picture;\r\n    private String petName;\r\n    private String petType;\r\n    private int petAge;\r\n    private String petWeight;\r\n    private int userId;\r\n        private String petAutograph;\r\n\r\n    public String getPetAutograph() {\r\n        return petAutograph;\r\n    }\r\n\r\n    public void setPetAutograph(String petAutograph) {\r\n        this.petAutograph = petAutograph;\r\n    }\r\n\r\n    public Pet() {\r\n    }\r\n\r\n    public int getPetId() {\r\n        return petId;\r\n    }\r\n\r\n    public void setPetId(int petId) {\r\n        this.petId = petId;\r\n    }\r\n\r\n    public Bitmap getPicture() {\r\n        return picture;\r\n    }\r\n\r\n    public void setPicture(Bitmap picture) {\r\n        this.picture = picture;\r\n    }\r\n\r\n    public String getPetName() {\r\n        return petName;\r\n    }\r\n\r\n    public void setPetName(String petName) {\r\n        this.petName = petName;\r\n    }\r\n\r\n    public String getPetType() {\r\n        return petType;\r\n    }\r\n\r\n    public void setPetType(String petType) {\r\n        this.petType = petType;\r\n    }\r\n\r\n    public int getPetAge() {\r\n        return petAge;\r\n    }\r\n\r\n    public void setPetAge(int petAge) {\r\n        this.petAge = petAge;\r\n    }\r\n\r\n    public String getPetWeight() {\r\n        return petWeight;\r\n    }\r\n\r\n    public void setPetWeight(String petWeight) {\r\n        this.petWeight = petWeight;\r\n    }\r\n\r\n    public int getUserId() {\r\n        return userId;\r\n    }\r\n\r\n    public void setUserId(int userId) {\r\n        this.userId = userId;\r\n    }\r\n\r\n    @Override\r\n    public String toString() {\r\n        return \"Pet{\" +\r\n                \"petId=\" + petId +\r\n                \", picture=\" + picture +\r\n                \", petName='\" + petName + '\\'' +\r\n                \", petType='\" + petType + '\\'' +\r\n                \", petAge=\" + petAge +\r\n                \", petWeight='\" + petWeight + '\\'' +\r\n                \", userId=\" + userId +\r\n                \", petAutograph='\" + petAutograph + '\\'' +\r\n                '}';\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/pet/other/entity/Pet.java	(revision 85fec54bdd02397946f3fe95c21d988d761e9c1e)
-+++ app/src/main/java/com/example/pet/other/entity/Pet.java	(date 1607484099469)
-@@ -12,7 +12,25 @@
-     private int petAge;
-     private String petWeight;
-     private int userId;
--        private String petAutograph;
-+    private String petAutograph;
-+    private String petPicPath;
-+    private String phone;
-+
-+    public String getPhone() {
-+        return phone;
-+    }
-+
-+    public void setPhone(String phone) {
-+        this.phone = phone;
-+    }
-+
-+    public String getPetPicPath() {
-+        return petPicPath;
-+    }
-+
-+    public void setPetPicPath(String petPicPath) {
-+        this.petPicPath = petPicPath;
-+    }
- 
-     public String getPetAutograph() {
-         return petAutograph;
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_3_10_09__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_3_10_09__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_2_11_10__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_2_11_10__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_3_9_09__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_3_9_09__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_3_10_15__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_3_10_15__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_5_14_54__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_5_14_54__Default_Changelist_.xml
Index: .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_8_18_43_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_8_18_43_[Default_Changelist]/shelved.patch	(revision 4b04f5bd4079bf12e67873d0392acd36473bc843)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_8_18_43_[Default_Changelist]/shelved.patch	(revision 4b04f5bd4079bf12e67873d0392acd36473bc843)
@@ -1,215 +0,0 @@
-Index: app/src/main/java/com/example/pet/other/Cache.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.pet.other;\r\n\r\nimport com.example.pet.other.entity.Order;\r\nimport com.example.pet.other.entity.Pet;\r\nimport com.example.pet.other.entity.Tips;\r\nimport com.example.pet.other.entity.User;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class Cache {\r\n    /**\r\n     * 存储一些全局信息\r\n     */\r\npublic static User user;\r\npublic static String userPhone;\r\npublic static final String MY_URL=\"http://10.7.90.249:8080/ChongBaoService/\";//我的URL\r\npublic static String url = \"http://10.7.89.96:8080/ChongBao_war_exploded/\";\r\n\r\npublic static int user_id = 1;\r\n\r\npublic static List<Order> myOrderList ;//我的订单数据\r\npublic static List<Pet> myPetList;//我的宠物数据\r\n    public static ArrayList<Tips> myPostList ;\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/pet/other/Cache.java	(revision 9034b7c01a04f8670c0d59fde2797698ed6a38db)
-+++ app/src/main/java/com/example/pet/other/Cache.java	(date 1607347522731)
-@@ -14,7 +14,7 @@
-      */
- public static User user;
- public static String userPhone;
--public static final String MY_URL="http://10.7.90.249:8080/ChongBaoService/";//我的URL
-+public static final String MY_URL="http://10.222.189.151:8080/";//我的URL
- public static String url = "http://10.7.89.96:8080/ChongBao_war_exploded/";
- 
- public static int user_id = 1;
-Index: app/src/main/java/com/example/pet/my/Login.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.pet.my;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.animation.Animator;\r\nimport android.animation.AnimatorSet;\r\nimport android.animation.ObjectAnimator;\r\nimport android.animation.PropertyValuesHolder;\r\nimport android.animation.ValueAnimator;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.os.Message;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.view.animation.AccelerateDecelerateInterpolator;\r\nimport android.widget.EditText;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.pet.MainActivity;\r\nimport com.example.pet.R;\r\nimport com.example.pet.other.Cache;\r\n\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.net.MalformedURLException;\r\nimport java.net.URL;\r\n\r\npublic class Login extends AppCompatActivity {\r\n    private String phone ;\r\n    private View progress;\r\n    private View mInputLayout;\r\n    private TextView login;\r\n    private float mWidth, mHeight;\r\n    private LinearLayout mName, mPsw;\r\n    private EditText etName;\r\n    private EditText etPassword;\r\n    private Handler handler = new Handler( ){\r\n        @Override\r\n        public void handleMessage(@NonNull Message msg) {\r\n           switch (msg.what){\r\n               case 1:\r\n                   mName.setVisibility(View.INVISIBLE);\r\n                   mPsw.setVisibility(View.INVISIBLE);\r\n                   inputAnimator(mInputLayout, mWidth, mHeight);\r\n                    Cache.userPhone = phone;\r\n                    Log.e(\"Login\",\"登录成功\"+Cache.userPhone);\r\n                    Intent intent2 = new Intent(Login.this,MyUserService.class);\r\n                    startService(intent2);\r\n\r\n                   break;\r\n               case 0:\r\n                   Toast.makeText(Login.this,\"密码有误，请重试\",Toast.LENGTH_LONG).show();\r\n                   break;\r\n           }\r\n        }\r\n    };\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_login);\r\n        if (Build.VERSION.SDK_INT >= 21) {   //只有5.0及以上系统才支持，因此这里先进行了一层if判断\r\n            View decorView = getWindow().getDecorView();\r\n            int option = View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\r\n                    | View.SYSTEM_UI_FLAG_LAYOUT_STABLE    //设置为全屏显示，必须这两行代码一起才能生效\r\n                    |View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR;  //因为背景为浅色，设置通知栏字体颜色为深色\r\n            decorView.setSystemUiVisibility(option);\r\n            getWindow().setStatusBarColor(Color.TRANSPARENT);//设置为透明\r\n        }\r\n        initView();\r\n    }\r\n\r\n    private void initView() {\r\n        login = (TextView) findViewById(R.id.login_btn);\r\n        progress = findViewById(R.id.layout_progress);\r\n        mInputLayout = findViewById(R.id.input_layout);\r\n        mName = (LinearLayout) findViewById(R.id.input_layout_name);\r\n        mPsw = (LinearLayout) findViewById(R.id.input_layout_psw);\r\n        etName = findViewById(R.id.login_et_username);\r\n        etPassword = findViewById(R.id.login_et_password);\r\n    }\r\n\r\n    public void onClicked(View view) {\r\n        switch (view.getId()){\r\n            case R.id.login_btn:\r\n                mWidth = login.getMeasuredWidth();\r\n                mHeight = login.getMeasuredHeight();\r\n                loginService();\r\n                break;\r\n            case R.id.login_register:\r\n                Intent intent = new Intent(this,Register.class);\r\n                startActivity(intent);\r\n                break;\r\n            case R.id.login_update:\r\n                Intent intent1 = new Intent(this,Update.class);\r\n                startActivity(intent1);\r\n                break;\r\n\r\n        }\r\n    }\r\n\r\n    private void loginService() {\r\n        phone = etName.getText().toString();\r\nCache.userPhone = etName.getText().toString();\r\n        final String pwd = etPassword.getText().toString();\r\n        if(phone.length() ==11 && pwd.length()!=0){\r\n            new Thread(){\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        URL url = new URL(Cache.MY_URL+\"LoginServlet?num=\"+phone+\"&pwd=\"+pwd);\r\n                        InputStream in = url.openStream();\r\n                        int num = in.read();\r\n                        Message message = new Message();\r\n                        message.what = num;\r\n                        handler.sendMessage(message);\r\n                        in.close();\r\n                    } catch (MalformedURLException e) {\r\n                        e.printStackTrace();\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n\r\n                }\r\n            }.start();\r\n        }else{\r\n            Toast.makeText(this,\"输入格式有误\",Toast.LENGTH_LONG).show();\r\n        }\r\n    }\r\n\r\n    private void inputAnimator(final View view, float w, float h) {\r\n        AnimatorSet set = new AnimatorSet();\r\n        ValueAnimator animator = ValueAnimator.ofFloat(0, w);\r\n        animator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {\r\n            @Override\r\n            public void onAnimationUpdate(ValueAnimator animation) {\r\n                float value = (Float) animation.getAnimatedValue();\r\n                ViewGroup.MarginLayoutParams params = (ViewGroup.MarginLayoutParams) view\r\n                        .getLayoutParams();\r\n                params.leftMargin = (int) value;\r\n                params.rightMargin = (int) value;\r\n                view.setLayoutParams(params);\r\n            }\r\n        });\r\n        ObjectAnimator animator2 = ObjectAnimator.ofFloat(mInputLayout, \"scaleX\", 1f, 0.5f);\r\n        set.setDuration(1500);\r\n        set.setInterpolator(new AccelerateDecelerateInterpolator());\r\n        set.playTogether(animator, animator2);\r\n        set.start();\r\n        set.addListener(new Animator.AnimatorListener() {\r\n            @Override\r\n            public void onAnimationStart(Animator animation) {\r\n\r\n            }\r\n            @Override\r\n            public void onAnimationRepeat(Animator animation) {\r\n                // TODO Auto-generated method stub\r\n\r\n            }\r\n            @Override\r\n            public void onAnimationEnd(Animator animation) {\r\n                progress.setVisibility(View.VISIBLE);\r\n                progressAnimator(progress);\r\n                mInputLayout.setVisibility(View.INVISIBLE);\r\n                Intent intent1 = new Intent(Login.this,MyDataService.class);\r\n                startService(intent1);\r\n                Intent intent = new Intent(Login.this,MainActivity.class);\r\n                startActivity(intent);\r\n                Login.this.finish();\r\n            }\r\n            @Override\r\n            public void onAnimationCancel(Animator animation) {\r\n                // TODO Auto-generated method stub\r\n            }\r\n        });\r\n    }\r\n    private void progressAnimator(final View view) {\r\n        PropertyValuesHolder animator = PropertyValuesHolder.ofFloat(\"scaleX\", 0.5f, 1f);\r\n        PropertyValuesHolder animator2 = PropertyValuesHolder.ofFloat(\"scaleY\", 0.5f, 1f);\r\n        ObjectAnimator animator3 = ObjectAnimator.ofPropertyValuesHolder(view, animator, animator2);\r\n        animator3.setDuration(1500);\r\n        animator3.setInterpolator(new JellyInterpolator());\r\n        animator3.start();\r\n    }\r\n    public void back(View view) {\r\n        Intent intent = new Intent(Login.this,MainActivity.class);\r\n        startActivity(intent);\r\n        this.finish();\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/pet/my/Login.java	(revision 9034b7c01a04f8670c0d59fde2797698ed6a38db)
-+++ app/src/main/java/com/example/pet/my/Login.java	(date 1607351354184)
-@@ -107,18 +107,22 @@
- 
-     private void loginService() {
-         phone = etName.getText().toString();
--Cache.userPhone = etName.getText().toString();
-+        Cache.userPhone = etName.getText().toString();
-         final String pwd = etPassword.getText().toString();
-+        Log.e(phone,pwd);
-+        Log.e("Login",""+Cache.userPhone+pwd);
-         if(phone.length() ==11 && pwd.length()!=0){
-             new Thread(){
-                 @Override
-                 public void run() {
-                     try {
-                         URL url = new URL(Cache.MY_URL+"LoginServlet?num="+phone+"&pwd="+pwd);
-+                        Log.e("链接","成功");
-                         InputStream in = url.openStream();
-                         int num = in.read();
-                         Message message = new Message();
-                         message.what = num;
-+                        Log.e("num",num + "");
-                         handler.sendMessage(message);
-                         in.close();
-                     } catch (MalformedURLException e) {
-Index: app/src/main/java/com/example/pet/my/MyFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.pet.my;\r\n\r\nimport android.content.Intent;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.provider.MediaStore;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.AdapterView;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.ListView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.pet.R;\r\nimport com.example.pet.my.editinfo.EditInfo;\r\nimport com.example.pet.my.order.MyOrderActivity;\r\nimport com.example.pet.other.Cache;\r\n\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport cn.smssdk.ui.companent.CircleImageView;\r\n\r\npublic class MyFragment extends Fragment {\r\n    private View view;\r\n    private TextView login;\r\n    private TextView count;\r\n    private CircleImageView photo;\r\n    private List<My> myList1 = new ArrayList<>();\r\n    private List<My> myList2 = new ArrayList<>();\r\n    private List<My> myList3 = new ArrayList<>();\r\n\r\n    @Override\r\n    public View onCreateView(final LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        view = inflater.inflate(R.layout.fragment_my, container, false);\r\n        login = view.findViewById(R.id.fragment_login);\r\n        count = view.findViewById(R.id.fragment_count);\r\nphoto = view.findViewById(R.id.user_photo);\r\n        login.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getContext(), Login.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        //适配第一个listView\r\n        MyAdapter myAdapter1 = new MyAdapter(view.getContext(), R.layout.my_listview, myList1);\r\n        ListView listView1 = (ListView) view.findViewById(R.id.my_listview1);\r\n        listView1.setAdapter(myAdapter1);\r\n        //适配第二个listView\r\n        MyAdapter myAdapter2 = new MyAdapter(view.getContext(), R.layout.my_listview, myList2);\r\n        ListView listView2 = (ListView) view.findViewById(R.id.my_listview2);\r\n        listView2.setAdapter(myAdapter2);\r\n        //适配第三个listView\r\n        MyAdapter myAdapter3 = new MyAdapter(view.getContext(), R.layout.my_listview, myList3);\r\n        ListView listView3 = (ListView) view.findViewById(R.id.my_listview3);\r\n        listView3.setAdapter(myAdapter3);\r\n        listView1.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                /**\r\n                 * 暂时修改\r\n                 */\r\n                if (Cache.user != null) {\r\n                    switch (position) {\r\n                        case 0:\r\n                            Intent intent2 = new Intent(getContext(), EditInfo.class);\r\n                            startActivity(intent2);\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                } else {\r\n                    showLoginToast();\r\n                }\r\n            }\r\n        });\r\n        listView2.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                if (Cache.user != null) {\r\n                    switch (position) {\r\n                        case 0:\r\n                            Intent intent = new Intent(getContext(), Post.class);\r\n                            startActivity(intent);\r\n                            break;\r\n                        case 1:\r\n                            Intent intent1 = new Intent(getContext(), MyOrderActivity.class);\r\n                            startActivity(intent1);\r\n                            break;\r\n                        case 2:\r\n                            Intent intent3 = new Intent(getContext(), History.class);\r\n                            startActivity(intent3);\r\n                            break;\r\n                        case 3:\r\n                            Intent intent4 = new Intent(getContext(), NewPet.class);\r\n                            startActivity(intent4);\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                } else {\r\n                    showLoginToast();\r\n                }\r\n            }\r\n        });\r\n        listView3.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                switch (position) {\r\n                    case 0:\r\n                        if (Cache.user != null) {\r\n                            Intent intent = new Intent(getContext(), Setting.class);\r\n                            startActivity(intent);\r\n                        }else {\r\n                            showLoginToast();\r\n                        }\r\n                        break;\r\n                    case 1:\r\n                        Intent intent1 = new Intent(getContext(), AboutUs.class);\r\n                        startActivity(intent1);\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n            }\r\n        });\r\n        return view;\r\n    }\r\n\r\n    //初始化数据\r\n    private void init() {\r\n        My my1 = new My(R.drawable.bianji, \"修改信息\", R.drawable.next);\r\n        myList1.add(my1);\r\n        My my2 = new My(R.drawable.mytie, \"我的帖子\", R.drawable.next);\r\n        myList2.add(my2);\r\n        My my3 = new My(R.drawable.myorder, \"我的订单\", R.drawable.next);\r\n        myList2.add(my3);\r\n        My my4 = new My(R.drawable.liulan, \"浏览记录\", R.drawable.next);\r\n        myList2.add(my4);\r\n        My my5 = new My(R.drawable.petlogo, \"我的宠物\", R.drawable.next);\r\n        myList2.add(my5);\r\n        My my6 = new My(R.drawable.setting, \"个人设置\", R.drawable.next);\r\n        myList3.add(my6);\r\n        My my7 = new My(R.drawable.we, \"关于我们\", R.drawable.next);\r\n        myList3.add(my7);\r\n    }\r\n\r\n    //加载数据，根据生命周期\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        init();\r\n    }\r\n\r\n    //通过生命周期方法 获得当前用户数据\r\n    @Override\r\n    public void onStart() {\r\n        if (Cache.user != null) {\r\n            login.setText(Cache.user.getUserName());\r\n            count.setText(Cache.user.getUserPhone());\r\n            photo.setImageBitmap(Cache.user.getPhoto());\r\n        }\r\n        super.onStart();\r\n    }\r\n\r\n    public void showLoginToast() {\r\n        Toast.makeText(getContext(), \"请先登录\", Toast.LENGTH_LONG).show();\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/pet/my/MyFragment.java	(revision 9034b7c01a04f8670c0d59fde2797698ed6a38db)
-+++ app/src/main/java/com/example/pet/my/MyFragment.java	(date 1607351599112)
-@@ -67,9 +67,7 @@
-         listView1.setOnItemClickListener(new AdapterView.OnItemClickListener() {
-             @Override
-             public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
--                /**
--                 * 暂时修改
--                 */
-+
-                 if (Cache.user != null) {
-                     switch (position) {
-                         case 0:
-Index: app/src/main/res/layout/activity_pet.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\">\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\">\r\n    <!--顶栏-->\r\n    <LinearLayout\r\n\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginLeft=\"25dp\"\r\n        android:layout_marginRight=\"25dp\">\r\n\r\n        <LinearLayout\r\n\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/pet_photo\"\r\n                android:layout_width=\"200dp\"\r\n                android:layout_height=\"200dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_marginTop=\"21dp\"\r\n                android:background=\"@drawable/hashiqi\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\"\r\n                android:layout_marginTop=\"50dp\"\r\n               >\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginRight=\"25sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:text=\"爱称\"\r\n                    android:textColor=\"#000\"\r\n                    android:textSize=\"12sp\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:background=\"@drawable/bg_myinfo\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/pet_name\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:background=\"@null\"\r\n                        android:gravity=\"center_vertical\"\r\n                        android:onClick=\"onClicked\"\r\n                        android:text=\"有光\"\r\n                        android:textSize=\"12sp\" />\r\n                </LinearLayout>\r\n\r\n\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\"\r\n               >\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginRight=\"25sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:text=\"种类\"\r\n                    android:textColor=\"#000\"\r\n                    android:textSize=\"12sp\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:background=\"@drawable/bg_myinfo\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/pet_type\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:background=\"@null\"\r\n                        android:gravity=\"center_vertical\"\r\n                        android:onClick=\"onClicked\"\r\n                        android:text=\"哈士奇\"\r\n                        android:textColor=\"@color/black\"\r\n                        android:textSize=\"12sp\" />\r\n                </LinearLayout>\r\n\r\n\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\"\r\n               >\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginRight=\"25sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:text=\"年龄\"\r\n                    android:textColor=\"#000\"\r\n                    android:textSize=\"12sp\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:background=\"@drawable/bg_myinfo\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/pet_age\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:background=\"@null\"\r\n                        android:gravity=\"center_vertical\"\r\n                        android:onClick=\"onClicked\"\r\n                        android:text=\"4岁\"\r\n                        android:textColor=\"@color/black\"\r\n                        android:textSize=\"12sp\" />\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n\r\n                android:orientation=\"vertical\">\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"25sp\"\r\n                    android:layout_marginBottom=\"20dp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:text=\"宠物简介\"\r\n                    android:textColor=\"#000\"\r\n                    android:textSize=\"12sp\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_marginBottom=\"30dp\"\r\n                  android:background=\"@drawable/bg_myinfo\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"100dp\">\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/pet_autograph\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"100dp\"\r\n                        android:background=\"@null\"\r\n                        android:enabled=\"true\"\r\n                        android:gravity=\"start\"\r\n                        android:hint=\"阿巴阿巴阿巴\"\r\n                        android:inputType=\"textMultiLine\"\r\n                        android:maxLines=\"6\"\r\n                        android:minLines=\"6\"\r\n                        android:scrollbars=\"vertical\"\r\n                        android:textSize=\"12sp\" />\r\n                </LinearLayout>\r\n                <Button\r\n                    android:textColor=\"@color/red\"\r\n                    android:id=\"@+id/pet_update\"\r\n                    android:background=\"@drawable/edit\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"修改\" />\r\n            </LinearLayout>\r\n        </LinearLayout>\r\n    </LinearLayout>\r\n\r\n\r\n</LinearLayout>\r\n</ScrollView>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_pet.xml	(revision 9034b7c01a04f8670c0d59fde2797698ed6a38db)
-+++ app/src/main/res/layout/activity_pet.xml	(date 1607347522766)
-@@ -23,7 +23,7 @@
- 
-             <ImageView
-                 android:id="@+id/pet_photo"
--                android:layout_width="200dp"
-+                android:layout_width="250dp"
-                 android:layout_height="200dp"
-                 android:layout_gravity="center"
-                 android:layout_marginTop="21dp"
-Index: app/src/main/java/com/example/pet/my/editinfo/EditInfo.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.pet.my.editinfo;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.core.app.ActivityCompat;\r\n\r\nimport android.app.Activity;\r\nimport android.content.ContentResolver;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.BitmapFactory;\r\nimport android.graphics.Rect;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.Environment;\r\nimport android.os.Handler;\r\nimport android.os.IBinder;\r\nimport android.os.Looper;\r\nimport android.os.Message;\r\nimport android.provider.MediaStore;\r\nimport android.text.Editable;\r\nimport android.text.TextWatcher;\r\nimport android.util.Log;\r\nimport android.view.Gravity;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\nimport android.view.inputmethod.InputMethodManager;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.PopupWindow;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.bigkoo.pickerview.builder.OptionsPickerBuilder;\r\nimport com.bigkoo.pickerview.builder.TimePickerBuilder;\r\nimport com.bigkoo.pickerview.listener.CustomListener;\r\nimport com.bigkoo.pickerview.listener.OnOptionsSelectListener;\r\nimport com.bigkoo.pickerview.listener.OnTimeSelectListener;\r\nimport com.bigkoo.pickerview.view.OptionsPickerView;\r\nimport com.bigkoo.pickerview.view.TimePickerView;\r\nimport com.example.pet.R;\r\nimport com.example.pet.my.SetPassword;\r\nimport com.example.pet.other.Cache;\r\nimport com.example.pet.other.entity.User;\r\nimport com.google.gson.Gson;\r\nimport com.luck.picture.lib.PictureSelector;\r\nimport com.luck.picture.lib.config.PictureConfig;\r\nimport com.luck.picture.lib.config.PictureMimeType;\r\nimport com.luck.picture.lib.entity.LocalMedia;\r\n\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\nimport java.util.List;\r\n\r\nimport cn.jiguang.net.HttpUtils;\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\nimport okhttp3.Call;\r\nimport okhttp3.Callback;\r\nimport okhttp3.MediaType;\r\nimport okhttp3.MultipartBody;\r\nimport okhttp3.OkHttpClient;\r\nimport okhttp3.Request;\r\nimport okhttp3.RequestBody;\r\nimport okhttp3.Response;\r\n\r\nimport static com.luck.picture.lib.config.PictureConfig.REQUEST_CAMERA;\r\n\r\npublic class EditInfo extends AppCompatActivity {\r\n    private User user = new User();\r\n    private TextView upSex;\r\n    private PopupWindow popupWindow;\r\n    private Toolbar toolbar;\r\n    private CircleImageView upPhoto;\r\n    private TextView upBrithday;\r\n    private EditText upName;\r\n    private TimePickerView pvTime;\r\n    private OptionsPickerView pvCustomOptions;\r\n    private ArrayList<String> cardItem = new ArrayList<>();\r\n    //输入框初始值\r\n    private int num = 0;\r\n    //输入框最大值\r\n    public int mMaxNum=200;\r\n    public EditText etInput;\r\n    private TextView tvInput;\r\n    private String image_path;\r\n    private static final int REQUEST_EXTERNAL_STORAGE = 1;\r\n    private static String[] PERMISSIONS_STORAGE = {\r\n            \"android.permission.READ_EXTERNAL_STORAGE\",\r\n            \"android.permission.WRITE_EXTERNAL_STORAGE\",\r\n            \"android.permission.CAMER\"};\r\n\r\n    Handler hd = new Handler() {\r\n        @Override\r\n        public void handleMessage(Message msg) {\r\n            if(msg.what == 1){\r\n                Toast.makeText(EditInfo.this,\"上传成功\",Toast.LENGTH_SHORT);\r\n                upData();\r\n            }else if(msg.what == 2){\r\n                Log.e(\"up\",\"6b\");\r\n                Toast.makeText(EditInfo.this,\"上传失败了\",Toast.LENGTH_SHORT);\r\n            }else if(msg.what == 3){\r\n                Toast.makeText(EditInfo.this,\"上传成功\",Toast.LENGTH_SHORT);\r\n                EditInfo.this.finish();\r\n            }else {\r\n                Log.e(\"up\",\"6b\");\r\n                Toast.makeText(EditInfo.this,\"上传失败了\",Toast.LENGTH_SHORT);\r\n            }\r\n        }\r\n    };\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_edit_info);\r\n//        if (Build.VERSION.SDK_INT >= 21) {   //只有5.0及以上系统才支持，因此这里先进行了一层if判断\r\n//            View decorView = getWindow().getDecorView();\r\n//            int option = View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\r\n//                    | View.SYSTEM_UI_FLAG_LAYOUT_STABLE    //设置为全屏显示，必须这两行代码一起才能生效\r\n//                    |View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR;  //因为背景为浅色，设置通知栏字体颜色为深色\r\n//            decorView.setSystemUiVisibility(option);\r\n//            getWindow().setStatusBarColor(Color.TRANSPARENT);//设置为透明\r\n//        }\r\n        //设置控件内容\r\n        setView();\r\n    }\r\n\r\n    public void onClicked(View view) {\r\n        switch(view.getId()){\r\n            case R.id.upPhoto:\r\n                //上传头像\r\n                upPic();\r\n                break;\r\n            case R.id.upName:\r\n                break;\r\n            case R.id.ll_upSex:\r\n                pvCustomOptions.show();\r\n                break;\r\n            case R.id.ll_upBrithday:\r\n                pvTime.show();\r\n                break;\r\n            case R.id.tv_save:\r\n                //保存信息\r\n                upPhoto(image_path);\r\n                break;\r\n        }\r\n    }\r\n\r\n    private void upSex() {\r\n        // 注意：自定义布局中，id为 optionspicker 或者 timepicker 的布局以及其子控件必须要有，否则会报空指针\r\n        // 具体可参考demo 里面的两个自定义布局\r\n        pvCustomOptions = new OptionsPickerBuilder(this, new OnOptionsSelectListener() {\r\n            @Override\r\n            public void onOptionsSelect(int options1, int options2, int options3, View v) {\r\n               //返回的分别是三个级别的选中位置\r\n                String tx = cardItem.get(options1);\r\n                upSex.setText(tx);\r\n                Cache.user.setUserSex(tx);\r\n                user.setUserSex(tx);\r\n            }\r\n        })\r\n                .setLayoutRes(R.layout.picker_sex_bg, new CustomListener() {\r\n                    @Override\r\n                    public void customLayout(View v) {\r\n                        //自定义布局中的控件初始化及事件处理\r\n                        final TextView tvSubmit = v.findViewById(R.id.tv_finish);\r\n                        TextView tvCancel = v.findViewById(R.id.tv_cancel);\r\n                        tvSubmit.setOnClickListener(new View.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(View v) {\r\n                                pvCustomOptions.returnData();\r\n                                pvCustomOptions.dismiss();\r\n                            }\r\n                        });\r\n                        tvCancel.setOnClickListener(new View.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(View v) {\r\n                                pvCustomOptions.dismiss();\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                })\r\n                .setOutSideCancelable(true)\r\n                .build();\r\n        pvCustomOptions.setPicker(cardItem);//添加数据\r\n    }\r\n\r\n    private void upBri() {\r\n        Calendar selectedDate = Calendar.getInstance();//系统当前时间\r\n        Calendar startDate = Calendar.getInstance();\r\n        startDate.set(1900, 1, 1);\r\n        Calendar endDate = Calendar.getInstance();\r\n        pvTime = new TimePickerBuilder(this, new OnTimeSelectListener() {\r\n            @Override\r\n            public void onTimeSelect(Date date, View v) {\r\n                upBrithday.setText(getTimes(date));\r\n                Cache.user.setUserBrithday(getTimes(date));\r\n                user.setUserBrithday(getTimes(date));\r\n            }\r\n        })\r\n                .setDate(selectedDate)\r\n                .setRangDate(startDate,endDate)\r\n                .setLayoutRes(R.layout.picker_time_bg, new CustomListener() {\r\n                    @Override\r\n                    public void customLayout(View v) {\r\n                        TextView tvSubmit = v.findViewById(R.id.tv_finish);\r\n                        TextView tvCannel = v.findViewById(R.id.tv_cancel);\r\n                        tvSubmit.setOnClickListener(new View.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(View v) {\r\n                                pvTime.returnData();\r\n                                pvTime.dismiss();\r\n                            }\r\n                        });\r\n                        tvCannel.setOnClickListener(new View.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(View v) {\r\n                                pvTime.dismiss();\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n                .setOutSideCancelable(true)\r\n                .setContentTextSize(18)\r\n                .setType(new boolean[]{true, true, true, false, false, false})\r\n                .setLabel(\"年\", \"月\", \"日\", \"时\", \"分\", \"秒\")\r\n                .setLineSpacingMultiplier(1.2f)\r\n                .setTextXOffset(0, 0, 0, 40, 0, -40)\r\n                .isCenterLabel(false) //是否只显示中间选中项的label文字，false则每项item全部都带有label。\r\n                .setDividerColor(0xFF24AD9D)\r\n                .build();\r\n    }\r\n\r\n    //格式化时间\r\n    private String getTimes(Date date) {\r\n        SimpleDateFormat format = new SimpleDateFormat(\"yyyy-MM-dd\");\r\n        return format.format(date);\r\n    }\r\n\r\n    @Override\r\n    public boolean dispatchTouchEvent(MotionEvent ev) {\r\n        if (ev.getAction() == MotionEvent.ACTION_DOWN) {\r\n            View v = getCurrentFocus();\r\n            if (isShouldHideKeyboard(v, ev)) {\r\n                hideKeyboard(v.getWindowToken());\r\n            }\r\n        }\r\n        return super.dispatchTouchEvent(ev);\r\n    }\r\n\r\n    /**\r\n     * 根据EditText所在坐标和用户点击的坐标相对比，来判断是否隐藏键盘，因为当用户点击EditText时则不能隐藏\r\n     *\r\n     * @param v\r\n     * @param event\r\n     * @return\r\n     */\r\n    private boolean isShouldHideKeyboard(View v, MotionEvent event) {\r\n        if (v != null && (v instanceof EditText)) {\r\n            int[] l = {0, 0};\r\n            v.getLocationInWindow(l);\r\n            int left = l[0],\r\n                    top = l[1],\r\n                    bottom = top + v.getHeight(),\r\n                    right = left + v.getWidth();\r\n            if (event.getX() > left && event.getX() < right\r\n                    && event.getY() > top && event.getY() < bottom) {\r\n                // 点击EditText的事件，忽略它。\r\n                return false;\r\n            } else {\r\n                return true;\r\n            }\r\n        }\r\n        // 如果焦点不是EditText则忽略，这个发生在视图刚绘制完，第一个焦点不在EditText上，和用户用轨迹球选择其他的焦点\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 获取InputMethodManager，隐藏软键盘\r\n     * @param token\r\n     */\r\n    private void hideKeyboard(IBinder token) {\r\n        if (token != null) {\r\n            InputMethodManager im = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\r\n            im.hideSoftInputFromWindow(token, InputMethodManager.HIDE_NOT_ALWAYS);\r\n        }\r\n    }\r\n\r\n    private void setView() {\r\n        upSex = findViewById(R.id.edit_info_sex);\r\n        toolbar = findViewById(R.id.edit_toolbar);\r\n        toolbar.setNavigationOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                EditInfo.this.finish();\r\n            }\r\n        });\r\n        upBrithday = findViewById(R.id.upBrithday);\r\n        upName = findViewById(R.id.upName);\r\n        upPhoto = findViewById(R.id.upPhoto);\r\n        etInput = findViewById(R.id.et_input);\r\n        tvInput = findViewById(R.id.tv_input);\r\n        cardItem.add(\"未知\");\r\n        cardItem.add(\"男\");\r\n        cardItem.add(\"女\");\r\n        //加载数据\r\n        upSex();\r\n        upBri();\r\n        countWords();\r\n\r\n\r\n\r\n    }\r\n\r\n    /**\r\n     * 记录字数和限制最大输入字数\r\n     */\r\n    private void countWords() {\r\n        etInput.addTextChangedListener(new TextWatcher() {\r\n            //记录输入的字数\r\n            private CharSequence wordNum;\r\n            private int selectionStart;\r\n            private int selectionEnd;\r\n            @Override\r\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n                //实时记录输入的字数\r\n                wordNum= s;\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable s) {\r\n\r\n                Cache.user.setUserAutograph(Cache.user.getUserAutograph() + s);\r\n                int number = num + s.length();\r\n                //TextView显示剩余字数\r\n                tvInput.setText(\"\" + number+\"/\" + mMaxNum);\r\n                selectionStart=etInput.getSelectionStart();\r\n                selectionEnd = etInput.getSelectionEnd();\r\n                //判断大于最大值\r\n                if (wordNum.length() > mMaxNum) {\r\n                    //删除多余输入的字（不会显示出来）\r\n                    s.delete(selectionStart - 1, selectionEnd);\r\n                    int tempSelection = selectionEnd;\r\n                    etInput.setText(s);\r\n                    etInput.setSelection(tempSelection);//设置光标在最后\r\n                    //吐司最多输入300字\r\n                    Toast.makeText(EditInfo.this, \"最多输入\"+mMaxNum+\"字\", Toast.LENGTH_SHORT).show();\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    private void upPic() {\r\n        //动态申请权限\r\n        verifyStoragePermissions(this);\r\n        PictureSelector.create(this)\r\n                .openGallery(PictureConfig.TYPE_IMAGE)\r\n                .imageEngine(GlideEngine.createGlideEngine())\r\n                .imageSpanCount(4)// 每行显示个数 int\r\n                .maxSelectNum(1)\r\n                .isWeChatStyle(true)\r\n                .selectionMode(PictureConfig.SINGLE)// 多选 or 单选 PictureConfig.MULTIPLE or PictureConfig.SINGLE\r\n                .isSingleDirectReturn(true)//PictureConfig.SINGLE模式下是否直接返回\r\n                .isPreviewImage(true)// 是否可预览图片 true or false\r\n                .isCamera(true)// 是否显示拍照按钮 true or false\r\n                .imageFormat(PictureMimeType.JPEG)// 拍照保存图片格式后缀,默认jpeg\r\n                .isZoomAnim(true)// 图片列表点击 缩放效果 默认true\r\n                .setOutputCameraPath(Const.getImgPath())// 自定义拍照保存路径,可不填\r\n                .isEnableCrop(true)// 是否裁剪 true or false\r\n                .isCompress(true)// 是否压缩 true or false\r\n                .compressSavePath(Const.getImgPath())//压缩图片保存地址\r\n                .freeStyleCropEnabled(true)// 裁剪框是否可拖拽 true or false\r\n                .showCropGrid(true)// 是否显示裁剪矩形网格 圆形裁剪时建议设为false    true or false\r\n                .forResult(PictureConfig.CHOOSE_REQUEST);//结果回调onActivityResult code\r\n    }\r\n\r\n    //接受回调\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (resultCode == -1 && data != null) {\r\n            switch (requestCode) {\r\n                case PictureConfig.CHOOSE_REQUEST:\r\n                    List<LocalMedia> selectList = PictureSelector.obtainMultipleResult(data);\r\n                    image_path = selectList.get(0).getCompressPath();\r\n                    upPhoto.setImageURI(Uri.parse(image_path));\r\n                    //上传图片\r\n                    Cache.user.setPicturePath(image_path);\r\n                    user.setPicturePath(image_path);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 上传图片\r\n     * 未测试\r\n     */\r\n    public void upPhoto(String path){\r\n        Cache.user.setUserName(upName.getText().toString());\r\n        Log.e(\"name\",upName.getText().toString());\r\n        Log.e(\"up\",\"1\");\r\n        File file = new File(path);\r\n        Log.e(\"up\",\"2\");\r\n        String url = Cache.MY_URL + \"UpdataUserInfoServlet\";\r\n        OkHttpClient okHttpClient = new OkHttpClient();\r\n        if(file != null && file.exists()){\r\n            RequestBody requestBody = new MultipartBody.Builder()\r\n                    .setType(MultipartBody.FORM)\r\n                    .addFormDataPart(\"file\",\r\n                            Cache.userPhone + \".jpg\",\r\n                            RequestBody.create(MediaType.parse(\"image/png\"),file))\r\n                    .addFormDataPart(\"phone\",Cache.userPhone)\r\n                    .build();\r\n            Request request = new Request.Builder()\r\n                    .url(url)\r\n                    .post(requestBody)\r\n                    .build();\r\n            Call call = okHttpClient.newCall(request);\r\n\r\n            Log.e(\"up\",\"3\");\r\n            call.enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Call call, IOException e) {\r\n                    //失败\r\n                    Log.e(\"up\",\"4b\");\r\n                    Message msg = new Message();\r\n                    msg.what = 2;\r\n                    msg.obj = 1;\r\n                    Log.e(\"up\",\"5b\");\r\n                    hd.sendMessage(msg);\r\n                    Log.e(\"up\",\"6b\");\r\n                    e.printStackTrace();\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Call call, Response response) throws IOException {\r\n                    //上传成功\r\n                    Log.e(\"up\",\"4a\");\r\n                    Message msg = new Message();\r\n                    String res = response.body().string();\r\n                    if(res.equals(\"true\")){\r\n                        msg.what = 1;\r\n                        msg.obj = 1;\r\n                        Log.e(\"updata\",res);\r\n                    }else {\r\n                        msg.what = 2;\r\n                        msg.obj = 1;\r\n                        Log.e(\"updata\",res);\r\n                    }\r\n                    hd.sendMessage(msg);\r\n\r\n                }\r\n            });\r\n\r\n        }else {\r\n            Toast.makeText(EditInfo.this,\"请添加头像\",Toast.LENGTH_SHORT);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 上传数据\r\n     */\r\n    public void upData(){\r\n        OkHttpClient okHttpClient = new OkHttpClient();\r\n        //创建请求体对象\r\n        user.setUserPhone(Cache.userPhone);\r\n        user.setUserName(upName.getText().toString());\r\n        user.setUserAutograph(etInput.getText().toString());\r\n        user.setPicturePath(Cache.userPhone + \".jpg\");\r\n        RequestBody requestBody = RequestBody.create(MediaType.parse(\r\n                \"text/plain;charset=UTF-8\"),new Gson().toJson(user));\r\n        //3.创建请求对象\r\n        Request request = new Request.Builder()\r\n                .post(requestBody)\r\n                .url(Cache.MY_URL + \"UpDataUserInfo2Servlet\")\r\n                .build();\r\n        //3.创建Call对象，发送请求，并接受响应\r\n        Call call = okHttpClient.newCall(request);\r\n        //异步网络请求（无需手动使用子线程）\r\n        call.enqueue(new Callback() {\r\n            @Override\r\n            public void onFailure(Call call, IOException e) {\r\n                //失败\r\n                Message msg = new Message();\r\n                msg.what = 4;\r\n                msg.obj = 3;\r\n                Log.e(\"up\",\"5b\");\r\n                hd.sendMessage(msg);\r\n                Log.e(\"up\",\"6b\");\r\n                e.printStackTrace();\r\n            }\r\n\r\n            @Override\r\n            public void onResponse(Call call, Response response) throws IOException {\r\n                //上传成功\r\n                Message msg = new Message();\r\n                String res = response.body().string();\r\n                if(res.equals(\"true\")){\r\n                    msg.what = 3;\r\n                    msg.obj = 1;\r\n                    Log.e(\"updata\",res);\r\n                }else {\r\n                    msg.what = 2;\r\n                    msg.obj = 1;\r\n                    Log.e(\"updata\",res);\r\n                }\r\n                hd.sendMessage(msg);\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    //然后通过一个函数来申请权限\r\n    public static void verifyStoragePermissions(Activity activity) {\r\n        try {\r\n            //检测是否有写的权限\r\n            int permission = ActivityCompat.checkSelfPermission(activity,\r\n                    \"android.permission.WRITE_EXTERNAL_STORAGE\");\r\n            if (permission != PackageManager.PERMISSION_GRANTED) {\r\n                // 没有写的权限，去申请写的权限，会弹出对话框\r\n                ActivityCompat.requestPermissions(activity, PERMISSIONS_STORAGE,REQUEST_EXTERNAL_STORAGE);\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/pet/my/editinfo/EditInfo.java	(revision 9034b7c01a04f8670c0d59fde2797698ed6a38db)
-+++ app/src/main/java/com/example/pet/my/editinfo/EditInfo.java	(date 1607347522782)
-@@ -56,6 +56,8 @@
- import java.io.File;
- import java.io.IOException;
- import java.io.InputStream;
-+import java.net.MalformedURLException;
-+import java.net.URL;
- import java.text.SimpleDateFormat;
- import java.util.ArrayList;
- import java.util.Calendar;
-@@ -131,6 +133,61 @@
- //        }
-         //设置控件内容
-         setView();
-+        initData();
-+        //加载数据
-+        upSex();
-+        upBri();
-+        countWords();
-+    }
-+
-+    private void initData() {
-+        cardItem.add("未知");
-+        cardItem.add("男");
-+        cardItem.add("女");
-+        if(Cache.user.getPicturePath() != null){
-+            URL url1 = null;
-+            try {
-+                url1 = new URL(Cache.MY_URL +"upload/" +user.getPicturePath());
-+                InputStream in1 = url1.openStream();
-+                Bitmap bitmap = BitmapFactory.decodeStream(in1);
-+                upPhoto.setImageBitmap(bitmap);
-+            } catch (MalformedURLException e) {
-+                e.printStackTrace();
-+            } catch (IOException e) {
-+                e.printStackTrace();
-+            }
-+        }
-+        if(Cache.user.getUserName() != null){
-+            upName.setText(Cache.user.getUserName());
-+        }
-+        if(Cache.user.getUserSex() != null){
-+            upSex.setText(Cache.user.getUserSex());
-+        }
-+        if(Cache.user.getUserBrithday() != null){
-+            upBrithday.setText(Cache.user.getUserBrithday());
-+        }
-+        if(Cache.user.getUserAutograph() != null){
-+            etInput.setText(Cache.user.getUserAutograph());
-+        }
-+    }
-+
-+    private void setView() {
-+        upSex = findViewById(R.id.edit_info_sex);
-+        toolbar = findViewById(R.id.edit_toolbar);
-+        toolbar.setNavigationOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                EditInfo.this.finish();
-+            }
-+        });
-+        upBrithday = findViewById(R.id.upBrithday);
-+        upName = findViewById(R.id.upName);
-+        upPhoto = findViewById(R.id.upPhoto);
-+        etInput = findViewById(R.id.et_input);
-+        tvInput = findViewById(R.id.tv_input);
-+
-+
-+
-     }
- 
-     public void onClicked(View view) {
-@@ -295,31 +352,7 @@
-         }
-     }
- 
--    private void setView() {
--        upSex = findViewById(R.id.edit_info_sex);
--        toolbar = findViewById(R.id.edit_toolbar);
--        toolbar.setNavigationOnClickListener(new View.OnClickListener() {
--            @Override
--            public void onClick(View v) {
--                EditInfo.this.finish();
--            }
--        });
--        upBrithday = findViewById(R.id.upBrithday);
--        upName = findViewById(R.id.upName);
--        upPhoto = findViewById(R.id.upPhoto);
--        etInput = findViewById(R.id.et_input);
--        tvInput = findViewById(R.id.tv_input);
--        cardItem.add("未知");
--        cardItem.add("男");
--        cardItem.add("女");
--        //加载数据
--        upSex();
--        upBri();
--        countWords();
--
- 
--
--    }
- 
-     /**
-      * 记录字数和限制最大输入字数
-@@ -541,7 +574,4 @@
-             e.printStackTrace();
-         }
-     }
--
--
--
- }
-\ No newline at end of file
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_5_14_54__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_5_14_54__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_3_10_09__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_3_10_09__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_2_11_10__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_2_11_10__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_3_9_09__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_3_9_09__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_3_10_15__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_3_10_15__Default_Changelist_.xml
Index: .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_9_8_06_[Default_Changelist]/shelved.patch
===================================================================
--- .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_9_8_06_[Default_Changelist]/shelved.patch	(revision 4b04f5bd4079bf12e67873d0392acd36473bc843)
+++ .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_9_8_06_[Default_Changelist]/shelved.patch	(revision 4b04f5bd4079bf12e67873d0392acd36473bc843)
@@ -1,910 +0,0 @@
-Index: app/src/main/java/com/example/pet/my/PageFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.pet.my;\r\n\r\nimport android.os.Bundle;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageView;\r\nimport android.widget.TextView;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.annotation.Nullable;\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.pet.R;\r\nimport com.example.pet.other.Cache;\r\n\r\npublic class PageFragment extends Fragment {\r\n\r\n    private ImageView petPhoto;\r\n    private EditText petName;\r\n    private EditText petType;\r\n    private EditText petAge;\r\n    private EditText petAutograph;\r\n    private Button btnUpdate;\r\n    private int index;\r\n\r\n    @Nullable\r\n    @Override\r\n    public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {\r\n        View view = inflater.inflate(R.layout.activity_pet, container, false);\r\n        Bundle bundle = getArguments();\r\n        index = bundle.getInt(\"index\");\r\n        //设置\r\n        petPhoto = view.findViewById(R.id.pet_photo);\r\n        petName = view.findViewById(R.id.pet_name);\r\n        petType = view.findViewById(R.id.pet_type);\r\n        petAge = view.findViewById(R.id.pet_age);\r\n        petAutograph = view.findViewById(R.id.pet_autograph);\r\n        btnUpdate = view.findViewById(R.id.pet_update);\r\n        btnUpdate.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n\r\n            }\r\n        });\r\n\r\n\r\n        setViewContent();\r\n        return view;\r\n    }\r\n\r\n    public void setViewContent() {\r\n        petAutograph.setText(Cache.myPetList.get(index).getPetAutograph(), TextView.BufferType.EDITABLE);\r\n        petPhoto.setImageBitmap(Cache.myPetList.get(index).getPicture());\r\n        petName.setText(Cache.myPetList.get(index).getPetName(), TextView.BufferType.EDITABLE);\r\n        petType.setText(Cache.myPetList.get(index).getPetType(), TextView.BufferType.EDITABLE);\r\n        petAge.setText(Cache.myPetList.get(index).getPetAge() + \"\", TextView.BufferType.EDITABLE);\r\n    }\r\n\r\n    @Override\r\n    public void onStart() {\r\n        super.onStart();\r\n        setViewContent();\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/pet/my/PageFragment.java	(revision fc94aa66c19eb94b63501defb53608a400cef2bc)
-+++ app/src/main/java/com/example/pet/my/PageFragment.java	(date 1607435885606)
-@@ -1,31 +1,73 @@
- package com.example.pet.my;
- 
-+import android.app.Activity;
-+import android.content.Intent;
-+import android.content.pm.PackageManager;
-+import android.net.Uri;
- import android.os.Bundle;
-+import android.text.Editable;
-+import android.text.TextWatcher;
-+import android.util.Log;
- import android.view.LayoutInflater;
- import android.view.View;
- import android.view.ViewGroup;
- import android.widget.Button;
- import android.widget.EditText;
- import android.widget.ImageView;
-+import android.widget.LinearLayout;
- import android.widget.TextView;
-+import android.widget.Toast;
- 
- import androidx.annotation.NonNull;
- import androidx.annotation.Nullable;
-+import androidx.core.app.ActivityCompat;
- import androidx.fragment.app.Fragment;
- 
-+import com.bigkoo.pickerview.builder.OptionsPickerBuilder;
-+import com.bigkoo.pickerview.listener.CustomListener;
-+import com.bigkoo.pickerview.listener.OnOptionsSelectListener;
-+import com.bigkoo.pickerview.view.OptionsPickerView;
- import com.example.pet.R;
-+import com.example.pet.my.editinfo.Const;
-+import com.example.pet.my.editinfo.EditInfo;
-+import com.example.pet.my.editinfo.GlideEngine;
- import com.example.pet.other.Cache;
-+import com.luck.picture.lib.PictureSelector;
-+import com.luck.picture.lib.config.PictureConfig;
-+import com.luck.picture.lib.config.PictureMimeType;
-+import com.luck.picture.lib.entity.LocalMedia;
-+
-+import java.util.ArrayList;
-+import java.util.List;
- 
- public class PageFragment extends Fragment {
- 
-     private ImageView petPhoto;
-     private EditText petName;
--    private EditText petType;
--    private EditText petAge;
-+    private TextView petType;
-+    private TextView petAge;
-     private EditText petAutograph;
-     private Button btnUpdate;
-+    private TextView tvNum;
-     private int index;
- 
-+
-+    private OptionsPickerView pvAgeOptions;
-+    private OptionsPickerView pvTypeOptions;
-+    private ArrayList<String> ageItem = new ArrayList<>();
-+    private ArrayList<String> typeItem = new ArrayList<>();
-+    //输入框初始值
-+    private int num = 0;
-+    //输入框最大值
-+    public int mMaxNum=200;
-+    private String image_path;
-+    private static final int REQUEST_EXTERNAL_STORAGE = 1;
-+    private static String[] PERMISSIONS_STORAGE = {
-+            "android.permission.READ_EXTERNAL_STORAGE",
-+            "android.permission.WRITE_EXTERNAL_STORAGE",
-+            "android.permission.CAMER"};
-+
-+
-     @Nullable
-     @Override
-     public View onCreateView(@NonNull LayoutInflater inflater, @Nullable ViewGroup container, @Nullable Bundle savedInstanceState) {
-@@ -33,12 +75,22 @@
-         Bundle bundle = getArguments();
-         index = bundle.getInt("index");
-         //设置
-+        initAge();
-+        initType();
-+        MyListener myListener = new MyListener();
-+        LinearLayout llAge = view.findViewById(R.id.ll_pet_age);
-+        llAge.setOnClickListener(myListener);
-+        LinearLayout llType = view.findViewById(R.id.ll_pet_type);
-+        llType.setOnClickListener(myListener);
-+        Log.e("upAge","绑定成功");
-         petPhoto = view.findViewById(R.id.pet_photo);
-+        petPhoto.setOnClickListener(myListener);
-         petName = view.findViewById(R.id.pet_name);
-         petType = view.findViewById(R.id.pet_type);
-         petAge = view.findViewById(R.id.pet_age);
-         petAutograph = view.findViewById(R.id.pet_autograph);
-         btnUpdate = view.findViewById(R.id.pet_update);
-+        tvNum = view.findViewById(R.id.tv_input);
-         btnUpdate.setOnClickListener(new View.OnClickListener() {
-             @Override
-             public void onClick(View v) {
-@@ -59,9 +111,237 @@
-         petAge.setText(Cache.myPetList.get(index).getPetAge() + "", TextView.BufferType.EDITABLE);
-     }
- 
-+    public class MyListener implements View.OnClickListener {
-+
-+        @Override
-+        public void onClick(View v) {
-+            switch (v.getId()){
-+                case R.id.ll_pet_type:
-+                    pvTypeOptions.show();
-+                    break;
-+                case R.id.ll_pet_age:
-+                    pvAgeOptions.show();
-+                    Log.e("upAge","over");
-+                    break;
-+                case R.id.pet_photo:
-+                    upPic();
-+                    break;
-+            }
-+        }
-+    }
-+
-+    private void upType() {
-+        // 注意：自定义布局中，id为 optionspicker 或者 timepicker 的布局以及其子控件必须要有，否则会报空指针
-+        // 具体可参考demo 里面的两个自定义布局
-+        Log.e("upAge","start");
-+        pvTypeOptions = new OptionsPickerBuilder(getActivity(), new OnOptionsSelectListener() {
-+            @Override
-+            public void onOptionsSelect(int options1, int options2, int options3, View v) {
-+                //返回的分别是三个级别的选中位置
-+                String tx = typeItem.get(options1);
-+                petType.setText(tx);
-+            }
-+        })
-+                .setLayoutRes(R.layout.picker_sex_bg, new CustomListener() {
-+                    @Override
-+                    public void customLayout(View v) {
-+                        //自定义布局中的控件初始化及事件处理
-+                        final TextView tvSubmit = v.findViewById(R.id.tv_finish);
-+                        TextView tvCancel = v.findViewById(R.id.tv_cancel);
-+                        TextView tyTitle = v.findViewById(R.id.tv_title);
-+                        tyTitle.setText("宠物年龄");
-+                        tvSubmit.setOnClickListener(new View.OnClickListener() {
-+                            @Override
-+                            public void onClick(View v) {
-+                                pvTypeOptions.returnData();
-+                                pvTypeOptions.dismiss();
-+                            }
-+                        });
-+                        tvCancel.setOnClickListener(new View.OnClickListener() {
-+                            @Override
-+                            public void onClick(View v) {
-+                                pvTypeOptions.dismiss();
-+                            }
-+                        });
-+
-+                    }
-+                })
-+                .setLineSpacingMultiplier(1.5f)//滚轮字体间距
-+                .setContentTextSize(22)//字体大小
-+                .setOutSideCancelable(true)
-+                .build();
-+        pvTypeOptions.setPicker(typeItem);//添加数据
-+    }
-+
-+    private void upAge() {
-+        // 注意：自定义布局中，id为 optionspicker 或者 timepicker 的布局以及其子控件必须要有，否则会报空指针
-+        // 具体可参考demo 里面的两个自定义布局
-+        Log.e("upAge","start");
-+        pvAgeOptions = new OptionsPickerBuilder(getActivity(), new OnOptionsSelectListener() {
-+            @Override
-+            public void onOptionsSelect(int options1, int options2, int options3, View v) {
-+                //返回的分别是三个级别的选中位置
-+                String tx = ageItem.get(options1);
-+                petAge.setText(tx);
-+            }
-+        })
-+                .setLayoutRes(R.layout.picker_sex_bg, new CustomListener() {
-+                    @Override
-+                    public void customLayout(View v) {
-+                        //自定义布局中的控件初始化及事件处理
-+                        final TextView tvSubmit = v.findViewById(R.id.tv_finish);
-+                        TextView tvCancel = v.findViewById(R.id.tv_cancel);
-+                        TextView tyTitle = v.findViewById(R.id.tv_title);
-+                        tyTitle.setText("宠物年龄");
-+                        tvSubmit.setOnClickListener(new View.OnClickListener() {
-+                            @Override
-+                            public void onClick(View v) {
-+                                pvAgeOptions.returnData();
-+                                pvAgeOptions.dismiss();
-+                            }
-+                        });
-+                        tvCancel.setOnClickListener(new View.OnClickListener() {
-+                            @Override
-+                            public void onClick(View v) {
-+                                pvAgeOptions.dismiss();
-+                            }
-+                        });
-+
-+                    }
-+                })
-+                .setLineSpacingMultiplier(1.5f)//滚轮字体间距
-+                .setContentTextSize(22)//字体大小
-+                .setOutSideCancelable(true)
-+                .build();
-+        pvAgeOptions.setPicker(ageItem);//添加数据
-+    }
-+
-+    public void initAge(){
-+        for(int i = 1;i < 30;i++){
-+            ageItem.add(i + "岁");
-+        }
-+    }
-+    public void initType(){
-+        typeItem.add("哈士奇");
-+        typeItem.add("兔子");
-+        typeItem.add("加菲猫");
-+        typeItem.add("小白鼠");
-+        typeItem.add("无皮猫");
-+        typeItem.add("土狗");
-+        typeItem.add("仓鼠");
-+    }
-+    /**
-+     * 记录字数和限制最大输入字数
-+     */
-+    private void countWords() {
-+        petAutograph.addTextChangedListener(new TextWatcher() {
-+            //记录输入的字数
-+            private CharSequence wordNum;
-+            private int selectionStart;
-+            private int selectionEnd;
-+            @Override
-+            public void beforeTextChanged(CharSequence s, int start, int count, int after) {
-+
-+            }
-+
-+            @Override
-+            public void onTextChanged(CharSequence s, int start, int before, int count) {
-+                //实时记录输入的字数
-+                wordNum= s;
-+            }
-+
-+            @Override
-+            public void afterTextChanged(Editable s) {
-+
-+                Cache.user.setUserAutograph(Cache.user.getUserAutograph() + s);
-+                int number = num + s.length();
-+                //TextView显示剩余字数
-+                petAutograph.setText("" + number+"/" + mMaxNum);
-+                selectionStart=tvNum.getSelectionStart();
-+                selectionEnd = tvNum.getSelectionEnd();
-+                //判断大于最大值
-+                if (wordNum.length() > mMaxNum) {
-+                    //删除多余输入的字（不会显示出来）
-+                    s.delete(selectionStart - 1, selectionEnd);
-+                    int tempSelection = selectionEnd;
-+                    petAutograph.setText(s);
-+                    petAutograph.setSelection(tempSelection);//设置光标在最后
-+                    //吐司最多输入300字
-+                    Toast.makeText(getContext(), "最多输入"+mMaxNum+"字", Toast.LENGTH_SHORT).show();
-+
-+                }
-+            }
-+        });
-+    }
-+
-+    /**
-+     * 添加相片
-+     */
-+    private void upPic() {
-+        //动态申请权限
-+        verifyStoragePermissions(getActivity());
-+        PictureSelector.create(this)
-+                .openGallery(PictureConfig.TYPE_IMAGE)
-+                .imageEngine(GlideEngine.createGlideEngine())
-+                .imageSpanCount(4)// 每行显示个数 int
-+                .maxSelectNum(1)
-+                .isWeChatStyle(true)
-+                .selectionMode(PictureConfig.SINGLE)// 多选 or 单选 PictureConfig.MULTIPLE or PictureConfig.SINGLE
-+                .isSingleDirectReturn(true)//PictureConfig.SINGLE模式下是否直接返回
-+                .isPreviewImage(true)// 是否可预览图片 true or false
-+                .isCamera(true)// 是否显示拍照按钮 true or false
-+                .imageFormat(PictureMimeType.JPEG)// 拍照保存图片格式后缀,默认jpeg
-+                .isZoomAnim(true)// 图片列表点击 缩放效果 默认true
-+                .setOutputCameraPath(Const.getImgPath())// 自定义拍照保存路径,可不填
-+                .isEnableCrop(true)// 是否裁剪 true or false
-+                .isCompress(true)// 是否压缩 true or false
-+                .compressSavePath(Const.getImgPath())//压缩图片保存地址
-+                .freeStyleCropEnabled(true)// 裁剪框是否可拖拽 true or false
-+                .showCropGrid(true)// 是否显示裁剪矩形网格 圆形裁剪时建议设为false    true or false
-+                .forResult(PictureConfig.CHOOSE_REQUEST);//结果回调onActivityResult code
-+    }
-+
-+    //接受回调
-+    @Override
-+    public void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {
-+        super.onActivityResult(requestCode, resultCode, data);
-+        if (resultCode == -1 && data != null) {
-+            switch (requestCode) {
-+                case PictureConfig.CHOOSE_REQUEST:
-+                    List<LocalMedia> selectList = PictureSelector.obtainMultipleResult(data);
-+                    image_path = selectList.get(0).getCompressPath();
-+                    petPhoto.setImageURI(Uri.parse(image_path));
-+                    //上传图片
-+                    Cache.user.setPicturePath(image_path);
-+                    break;
-+            }
-+        }
-+    }
-+
-+    //然后通过一个函数来申请权限
-+    public static void verifyStoragePermissions(Activity activity) {
-+        try {
-+            //检测是否有写的权限
-+            int permission = ActivityCompat.checkSelfPermission(activity,
-+                    "android.permission.WRITE_EXTERNAL_STORAGE");
-+            if (permission != PackageManager.PERMISSION_GRANTED) {
-+                // 没有写的权限，去申请写的权限，会弹出对话框
-+                ActivityCompat.requestPermissions(activity, PERMISSIONS_STORAGE,REQUEST_EXTERNAL_STORAGE);
-+            }
-+        } catch (Exception e) {
-+            e.printStackTrace();
-+        }
-+    }
-     @Override
-     public void onStart() {
-         super.onStart();
-         setViewContent();
-     }
-+
-+    @Override
-+    public void onResume() {
-+        super.onResume();
-+        upAge();
-+        upType();
-+    }
- }
-Index: app/src/main/res/layout/activity_pet.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<ScrollView\r\n    xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\">\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\">\r\n    <!--顶栏-->\r\n    <LinearLayout\r\n\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:layout_marginLeft=\"25dp\"\r\n        android:layout_marginRight=\"25dp\">\r\n\r\n        <LinearLayout\r\n\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:orientation=\"vertical\">\r\n\r\n            <ImageView\r\n                android:id=\"@+id/pet_photo\"\r\n                android:layout_width=\"200dp\"\r\n                android:layout_height=\"200dp\"\r\n                android:layout_gravity=\"center\"\r\n                android:layout_marginTop=\"21dp\"\r\n                android:background=\"@drawable/hashiqi\" />\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\"\r\n                android:layout_marginTop=\"50dp\"\r\n               >\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginRight=\"25sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:text=\"爱称\"\r\n                    android:textColor=\"#000\"\r\n                    android:textSize=\"12sp\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:background=\"@drawable/bg_myinfo\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/pet_name\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:background=\"@null\"\r\n                        android:gravity=\"center_vertical\"\r\n                        android:onClick=\"onClicked\"\r\n                        android:text=\"有光\"\r\n                        android:textSize=\"12sp\" />\r\n                </LinearLayout>\r\n\r\n\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\"\r\n               >\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginRight=\"25sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:text=\"种类\"\r\n                    android:textColor=\"#000\"\r\n                    android:textSize=\"12sp\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:background=\"@drawable/bg_myinfo\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/pet_type\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:background=\"@null\"\r\n                        android:gravity=\"center_vertical\"\r\n                        android:onClick=\"onClicked\"\r\n                        android:text=\"哈士奇\"\r\n                        android:textColor=\"@color/black\"\r\n                        android:textSize=\"12sp\" />\r\n                </LinearLayout>\r\n\r\n\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\"\r\n               >\r\n\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:layout_marginRight=\"25sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:text=\"年龄\"\r\n                    android:textColor=\"#000\"\r\n                    android:textSize=\"12sp\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:background=\"@drawable/bg_myinfo\"\r\n                    android:orientation=\"vertical\">\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/pet_age\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:background=\"@null\"\r\n                        android:gravity=\"center_vertical\"\r\n                        android:onClick=\"onClicked\"\r\n                        android:text=\"4岁\"\r\n                        android:textColor=\"@color/black\"\r\n                        android:textSize=\"12sp\" />\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n\r\n            <LinearLayout\r\n\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n\r\n                android:orientation=\"vertical\">\r\n\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:layout_marginTop=\"25sp\"\r\n                    android:layout_marginBottom=\"20dp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:text=\"宠物简介\"\r\n                    android:textColor=\"#000\"\r\n                    android:textSize=\"12sp\" />\r\n\r\n                <LinearLayout\r\n                    android:layout_marginBottom=\"30dp\"\r\n                  android:background=\"@drawable/bg_myinfo\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"100dp\">\r\n\r\n                    <EditText\r\n                        android:id=\"@+id/pet_autograph\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"100dp\"\r\n                        android:background=\"@null\"\r\n                        android:enabled=\"true\"\r\n                        android:gravity=\"start\"\r\n                        android:hint=\"阿巴阿巴阿巴\"\r\n                        android:inputType=\"textMultiLine\"\r\n                        android:maxLines=\"6\"\r\n                        android:minLines=\"6\"\r\n                        android:scrollbars=\"vertical\"\r\n                        android:textSize=\"12sp\" />\r\n                </LinearLayout>\r\n                <Button\r\n                    android:textColor=\"@color/red\"\r\n                    android:id=\"@+id/pet_update\"\r\n                    android:background=\"@drawable/edit\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"修改\" />\r\n            </LinearLayout>\r\n        </LinearLayout>\r\n    </LinearLayout>\r\n\r\n\r\n</LinearLayout>\r\n</ScrollView>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_pet.xml	(revision fc94aa66c19eb94b63501defb53608a400cef2bc)
-+++ app/src/main/res/layout/activity_pet.xml	(date 1607432352630)
-@@ -1,12 +1,13 @@
- <?xml version="1.0" encoding="utf-8"?>
--<ScrollView
--    xmlns:android="http://schemas.android.com/apk/res/android"
--    android:layout_width="match_parent"
--    android:layout_height="match_parent">
-+<!--<ScrollView-->
-+<!--    xmlns:android="http://schemas.android.com/apk/res/android"-->
-+<!--    android:layout_width="match_parent"-->
-+<!--    android:layout_height="match_parent">-->
- <LinearLayout xmlns:android="http://schemas.android.com/apk/res/android"
-     android:layout_width="match_parent"
-     android:layout_height="match_parent"
--    android:orientation="vertical">
-+    android:orientation="vertical"
-+    android:background="#fff">
-     <!--顶栏-->
-     <LinearLayout
- 
-@@ -23,7 +24,7 @@
- 
-             <ImageView
-                 android:id="@+id/pet_photo"
--                android:layout_width="200dp"
-+                android:layout_width="250dp"
-                 android:layout_height="200dp"
-                 android:layout_gravity="center"
-                 android:layout_marginTop="21dp"
-@@ -33,6 +34,7 @@
-                 android:layout_width="match_parent"
-                 android:layout_height="50dp"
-                 android:layout_marginTop="50dp"
-+                android:background="#fff"
-                >
- 
-                 <TextView
-@@ -67,6 +69,7 @@
-             <LinearLayout
-                 android:layout_width="match_parent"
-                 android:layout_height="50dp"
-+                android:background="#fff"
-                >
- 
-                 <TextView
-@@ -79,18 +82,18 @@
-                     android:textSize="12sp" />
- 
-                 <LinearLayout
-+                    android:id="@+id/ll_pet_type"
-                     android:layout_width="match_parent"
-                     android:layout_height="match_parent"
-                     android:background="@drawable/bg_myinfo"
-                     android:orientation="vertical">
- 
--                    <EditText
-+                    <TextView
-                         android:id="@+id/pet_type"
-                         android:layout_width="wrap_content"
-                         android:layout_height="match_parent"
-                         android:background="@null"
-                         android:gravity="center_vertical"
--                        android:onClick="onClicked"
-                         android:text="哈士奇"
-                         android:textColor="@color/black"
-                         android:textSize="12sp" />
-@@ -102,6 +105,7 @@
-             <LinearLayout
-                 android:layout_width="match_parent"
-                 android:layout_height="50dp"
-+                android:background="#fff"
-                >
- 
-                 <TextView
-@@ -114,6 +118,7 @@
-                     android:textSize="12sp" />
- 
-                 <LinearLayout
-+                    android:id="@+id/ll_pet_age"
-                     android:layout_width="match_parent"
-                     android:layout_height="match_parent"
-                     android:background="@drawable/bg_myinfo"
-@@ -125,7 +130,6 @@
-                         android:layout_height="match_parent"
-                         android:background="@null"
-                         android:gravity="center_vertical"
--                        android:onClick="onClicked"
-                         android:text="4岁"
-                         android:textColor="@color/black"
-                         android:textSize="12sp" />
-@@ -136,7 +140,7 @@
- 
-                 android:layout_width="match_parent"
-                 android:layout_height="wrap_content"
--
-+                android:background="@drawable/bg_myinfo"
-                 android:orientation="vertical">
- 
-                 <TextView
-@@ -149,7 +153,7 @@
-                     android:textColor="#000"
-                     android:textSize="12sp" />
- 
--                <LinearLayout
-+                <RelativeLayout
-                     android:layout_marginBottom="30dp"
-                   android:background="@drawable/bg_myinfo"
-                     android:layout_width="match_parent"
-@@ -168,7 +172,15 @@
-                         android:minLines="6"
-                         android:scrollbars="vertical"
-                         android:textSize="12sp" />
--                </LinearLayout>
-+                    <TextView
-+                        android:id="@+id/tv_input"
-+                        android:layout_width="wrap_content"
-+                        android:layout_height="wrap_content"
-+                        android:layout_alignParentBottom="true"
-+                        android:layout_alignParentRight="true"
-+                        android:layout_marginRight="10dp"
-+                        android:text="0/200"/>
-+                </RelativeLayout>
-                 <Button
-                     android:textColor="@color/red"
-                     android:id="@+id/pet_update"
-@@ -182,4 +194,4 @@
- 
- 
- </LinearLayout>
--</ScrollView>
-\ No newline at end of file
-+<!--</ScrollView>-->
-\ No newline at end of file
-Index: app/src/main/java/com/example/pet/my/NewPet.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.pet.my;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.fragment.app.Fragment;\r\nimport androidx.fragment.app.FragmentPagerAdapter;\r\nimport androidx.viewpager.widget.ViewPager;\r\n\r\nimport android.content.Intent;\r\nimport android.os.Bundle;\r\nimport android.view.View;\r\nimport android.widget.TextView;\r\n\r\nimport com.example.pet.R;\r\nimport com.example.pet.other.Cache;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class NewPet extends AppCompatActivity {\r\n\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_new_pet);\r\n        setView();\r\n\r\n    }\r\n\r\n    private void setView() {\r\n        TextView addPet= findViewById(R.id.add_new_pet);\r\n        addPet.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent =new Intent(NewPet.this,Pet.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        ViewPager pager = findViewById(R.id.pet_pager);\r\n        Toolbar toolbar = findViewById(R.id.pet_toolbar);\r\n        toolbar.setNavigationOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                NewPet.this.finish();\r\n            }\r\n        });\r\n        List<PageFragment> list = new ArrayList<>();\r\n        for(int i=0;i< Cache.myPetList.size();i++){\r\n            PageFragment fragment = new PageFragment();\r\n            Bundle bundle = new Bundle();\r\n            bundle.putInt(\"index\",i);\r\n            fragment.setArguments(bundle);\r\n            list.add(fragment);\r\n        }\r\n        pager.setAdapter(new FragmentPagerAdapter(getSupportFragmentManager()) {\r\n            @NonNull\r\n            @Override\r\n            public Fragment getItem(int position) {\r\n                return list.get(position);\r\n            }\r\n\r\n            @Override\r\n            public int getCount() {\r\n                return list.size();\r\n            }\r\n        });\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/pet/my/NewPet.java	(revision fc94aa66c19eb94b63501defb53608a400cef2bc)
-+++ app/src/main/java/com/example/pet/my/NewPet.java	(date 1607435476687)
-@@ -7,9 +7,14 @@
- import androidx.fragment.app.FragmentPagerAdapter;
- import androidx.viewpager.widget.ViewPager;
- 
-+import android.content.Context;
- import android.content.Intent;
- import android.os.Bundle;
-+import android.os.IBinder;
-+import android.view.MotionEvent;
- import android.view.View;
-+import android.view.inputmethod.InputMethodManager;
-+import android.widget.EditText;
- import android.widget.TextView;
- 
- import com.example.pet.R;
-@@ -66,4 +71,60 @@
-             }
-         });
-     }
-+
-+
-+    /**
-+     * 隐藏键盘
-+     * @param ev
-+     * @return
-+     */
-+    @Override
-+    public boolean dispatchTouchEvent(MotionEvent ev) {
-+        if (ev.getAction() == MotionEvent.ACTION_DOWN) {
-+            View v = getCurrentFocus();
-+            if (isShouldHideKeyboard(v, ev)) {
-+                hideKeyboard(v.getWindowToken());
-+            }
-+        }
-+        return super.dispatchTouchEvent(ev);
-+    }
-+
-+    /**
-+     * 根据EditText所在坐标和用户点击的坐标相对比，来判断是否隐藏键盘，因为当用户点击EditText时则不能隐藏
-+     *
-+     * @param v
-+     * @param event
-+     * @return
-+     */
-+    private boolean isShouldHideKeyboard(View v, MotionEvent event) {
-+        if (v != null && (v instanceof EditText)) {
-+            int[] l = {0, 0};
-+            v.getLocationInWindow(l);
-+            int left = l[0],
-+                    top = l[1],
-+                    bottom = top + v.getHeight(),
-+                    right = left + v.getWidth();
-+            if (event.getX() > left && event.getX() < right
-+                    && event.getY() > top && event.getY() < bottom) {
-+                // 点击EditText的事件，忽略它。
-+                return false;
-+            } else {
-+                return true;
-+            }
-+        }
-+        // 如果焦点不是EditText则忽略，这个发生在视图刚绘制完，第一个焦点不在EditText上，和用户用轨迹球选择其他的焦点
-+        return false;
-+    }
-+
-+    /**
-+     * 获取InputMethodManager，隐藏软键盘
-+     * @param token
-+     */
-+    private void hideKeyboard(IBinder token) {
-+        if (token != null) {
-+            InputMethodManager im = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);
-+            im.hideSoftInputFromWindow(token, InputMethodManager.HIDE_NOT_ALWAYS);
-+        }
-+    }
-+
- }
-\ No newline at end of file
-Index: app/src/main/java/com/example/pet/other/Cache.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.pet.other;\r\n\r\nimport com.example.pet.other.entity.Order;\r\nimport com.example.pet.other.entity.Pet;\r\nimport com.example.pet.other.entity.Tips;\r\nimport com.example.pet.other.entity.User;\r\n\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\npublic class Cache {\r\n    /**\r\n     * 存储一些全局信息\r\n     */\r\npublic static User user;\r\npublic static String userPhone;\r\npublic static final String MY_URL=\"http://10.7.86.136:8080/ChongBaoService/\";//我的URL\r\npublic static String url = \"http://10.7.89.96:8080/ChongBao_war_exploded/\";\r\n\r\npublic static int user_id = 1;\r\n\r\npublic static List<Order> myOrderList ;//我的订单数据\r\npublic static List<Pet> myPetList;//我的宠物数据\r\n    public static ArrayList<Tips> myPostList ;\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/pet/other/Cache.java	(revision fc94aa66c19eb94b63501defb53608a400cef2bc)
-+++ app/src/main/java/com/example/pet/other/Cache.java	(date 1607425944356)
-@@ -14,7 +14,7 @@
-      */
- public static User user;
- public static String userPhone;
--public static final String MY_URL="http://10.7.86.136:8080/ChongBaoService/";//我的URL
-+public static final String MY_URL="http://10.7.90.171:8080/";//我的URL
- public static String url = "http://10.7.89.96:8080/ChongBao_war_exploded/";
- 
- public static int user_id = 1;
-Index: app/src/main/res/layout/activity_edit_info.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    xmlns:app=\"http://schemas.android.com/apk/res-auto\"\r\n    android:id=\"@+id/edit_info_root\"\r\n    android:layout_width=\"match_parent\"\r\n    android:layout_height=\"match_parent\"\r\n    android:orientation=\"vertical\">\r\n    <androidx.appcompat.widget.Toolbar\r\n       android:id=\"@+id/edit_toolbar\"\r\n        android:onClick=\"onClicked\"\r\n        android:layout_marginTop=\"5dp\"\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        app:navigationIcon=\"@drawable/nav\">\r\n\r\n        <TextView\r\n            android:layout_width=\"240dp\"\r\n            android:layout_height=\"match_parent\"\r\n            android:gravity=\"center\"\r\n            android:textSize=\"18sp\"\r\n\r\n            android:text=\"个人信息\"\r\n\r\n            android:textColor=\"@color/black\"/>\r\n        <TextView\r\n            android:id=\"@+id/tv_save\"\r\n            android:onClick=\"onClicked\"\r\n            android:textColor=\"@color/colorTheme\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:gravity=\"center\"\r\n            android:text=\"保存\"\r\n            android:layout_marginRight=\"15dp\"/>\r\n    </androidx.appcompat.widget.Toolbar>\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"match_parent\">\r\n\r\n        <Button\r\n            android:id=\"@+id/btn_toMy\"\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:text=\"查看我的个人主页\"\r\n            android:layout_alignParentBottom=\"true\"\r\n            android:background=\"@color/white\"/>\r\n        <LinearLayout\r\n            android:layout_width=\"match_parent\"\r\n            android:layout_height=\"match_parent\"\r\n            android:orientation=\"vertical\"\r\n            android:paddingLeft=\"15dp\"\r\n            android:paddingRight=\"15dp\"\r\n            android:background=\"@drawable/bg_myinfo\"\r\n            android:layout_above=\"@id/btn_toMy\">\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:paddingTop=\"20dp\"\r\n                android:paddingBottom=\"10dp\">\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:text=\"头像\"\r\n                    android:textSize=\"14sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:layout_marginRight=\"25sp\"\r\n                    android:textColor=\"#000\"/>\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:orientation=\"vertical\">\r\n                    <de.hdodenhof.circleimageview.CircleImageView\r\n                        android:id=\"@+id/upPhoto\"\r\n                        android:onClick=\"onClicked\"\r\n                        android:layout_width=\"50dp\"\r\n                        android:layout_height=\"50dp\"\r\n                        android:src=\"@drawable/addimage\"/>\r\n                </LinearLayout>\r\n\r\n\r\n            </LinearLayout>\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\">\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:text=\"昵称\"\r\n                    android:textSize=\"14sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:layout_marginRight=\"25sp\"\r\n                    android:textColor=\"#000\"/>\r\n                <LinearLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:orientation=\"vertical\"\r\n                    android:background=\"@drawable/bg_myinfo\">\r\n                    <EditText\r\n                        android:id=\"@+id/upName\"\r\n                        android:onClick=\"onClicked\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:hint=\"有光\"\r\n                        android:textSize=\"14sp\"\r\n                        android:background=\"@null\"\r\n                        android:gravity=\"center_vertical\"/>\r\n                </LinearLayout>\r\n\r\n\r\n            </LinearLayout>\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\">\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:text=\"性别\"\r\n                    android:textSize=\"14sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:layout_marginRight=\"25sp\"\r\n                    android:textColor=\"#000\"/>\r\n                <LinearLayout\r\n                    android:id=\"@+id/ll_upSex\"\r\n                    android:onClick=\"onClicked\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:orientation=\"vertical\"\r\n                    android:background=\"@drawable/bg_myinfo\">\r\n                    <TextView\r\n                        android:id=\"@+id/edit_info_sex\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:text=\"完善性别信息\"\r\n                        android:textSize=\"14sp\"\r\n                        android:gravity=\"center_vertical\"/>\r\n                </LinearLayout>\r\n\r\n\r\n            </LinearLayout>\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"50dp\">\r\n                <TextView\r\n                    android:layout_width=\"wrap_content\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:text=\"生日\"\r\n                    android:textSize=\"14sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:layout_marginRight=\"25sp\"\r\n                    android:textColor=\"#000\"/>\r\n                <LinearLayout\r\n                    android:id=\"@+id/ll_upBrithday\"\r\n                    android:onClick=\"onClicked\"\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"match_parent\"\r\n                    android:orientation=\"vertical\"\r\n                    android:background=\"@drawable/bg_myinfo\">\r\n                    <TextView\r\n                        android:id=\"@+id/upBrithday\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"match_parent\"\r\n                        android:text=\"完善生日信息\"\r\n                        android:textSize=\"14sp\"\r\n                        android:gravity=\"center_vertical\"/>\r\n                </LinearLayout>\r\n            </LinearLayout>\r\n            <LinearLayout\r\n                android:layout_width=\"match_parent\"\r\n                android:layout_height=\"wrap_content\"\r\n                android:background=\"@drawable/bg_myinfo\"\r\n                android:orientation=\"vertical\">\r\n                <TextView\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"wrap_content\"\r\n                    android:text=\"个人简介\"\r\n                    android:textSize=\"14sp\"\r\n                    android:gravity=\"center_vertical\"\r\n                    android:layout_marginTop=\"25sp\"\r\n                    android:textColor=\"#000\"\r\n                    android:layout_marginBottom=\"20dp\"/>\r\n\r\n                <RelativeLayout\r\n                    android:layout_width=\"match_parent\"\r\n                    android:layout_height=\"100dp\">\r\n                    <EditText\r\n                        android:id=\"@+id/et_input\"\r\n                        android:layout_width=\"match_parent\"\r\n                        android:layout_height=\"100dp\"\r\n                        android:enabled=\"true\"\r\n                        android:gravity=\"start\"\r\n                        android:inputType=\"textMultiLine\"\r\n                        android:minLines=\"6\"\r\n                        android:maxLines=\"6\"\r\n                        android:scrollbars=\"vertical\"\r\n                        android:hint=\"还差一句简介，有趣的灵魂就会被发现呦~\"\r\n                        android:textSize=\"14sp\"\r\n                        android:background=\"@null\"\r\n                        />\r\n                    <TextView\r\n                        android:id=\"@+id/tv_input\"\r\n                        android:layout_width=\"wrap_content\"\r\n                        android:layout_height=\"wrap_content\"\r\n                        android:layout_alignParentBottom=\"true\"\r\n                        android:layout_alignParentRight=\"true\"\r\n                        android:layout_marginRight=\"10dp\"\r\n                        android:text=\"0/200\"/>\r\n                </RelativeLayout>\r\n\r\n\r\n            </LinearLayout>\r\n        </LinearLayout>\r\n    </RelativeLayout>\r\n\r\n\r\n</LinearLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/activity_edit_info.xml	(revision fc94aa66c19eb94b63501defb53608a400cef2bc)
-+++ app/src/main/res/layout/activity_edit_info.xml	(date 1607428792284)
-@@ -130,7 +130,7 @@
-                         android:id="@+id/edit_info_sex"
-                         android:layout_width="match_parent"
-                         android:layout_height="match_parent"
--                        android:text="完善性别信息"
-+                        android:hint="完善性别信息"
-                         android:textSize="14sp"
-                         android:gravity="center_vertical"/>
-                 </LinearLayout>
-@@ -159,7 +159,7 @@
-                         android:id="@+id/upBrithday"
-                         android:layout_width="wrap_content"
-                         android:layout_height="match_parent"
--                        android:text="完善生日信息"
-+                        android:hint="完善生日信息"
-                         android:textSize="14sp"
-                         android:gravity="center_vertical"/>
-                 </LinearLayout>
-Index: app/src/main/java/com/example/pet/my/MyFragment.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.pet.my;\r\n\r\nimport android.content.Intent;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.provider.MediaStore;\r\nimport android.util.Log;\r\nimport android.view.LayoutInflater;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.widget.AdapterView;\r\nimport android.widget.EditText;\r\nimport android.widget.ImageButton;\r\nimport android.widget.ImageView;\r\nimport android.widget.ListView;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport androidx.fragment.app.Fragment;\r\n\r\nimport com.example.pet.R;\r\nimport com.example.pet.my.editinfo.EditInfo;\r\nimport com.example.pet.my.order.MyOrderActivity;\r\nimport com.example.pet.other.Cache;\r\n\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.util.ArrayList;\r\nimport java.util.List;\r\n\r\nimport cn.smssdk.ui.companent.CircleImageView;\r\n\r\npublic class MyFragment extends Fragment {\r\n    private View view;\r\n    private TextView login;\r\n    private TextView count;\r\n    private CircleImageView photo;\r\n    private List<My> myList1 = new ArrayList<>();\r\n    private List<My> myList2 = new ArrayList<>();\r\n    private List<My> myList3 = new ArrayList<>();\r\n\r\n    @Override\r\n    public View onCreateView(final LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\r\n        view = inflater.inflate(R.layout.fragment_my, container, false);\r\n        login = view.findViewById(R.id.fragment_login);\r\n        count = view.findViewById(R.id.fragment_count);\r\nphoto = view.findViewById(R.id.user_photo);\r\n        login.setOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                Intent intent = new Intent(getContext(), Login.class);\r\n                startActivity(intent);\r\n            }\r\n        });\r\n        //适配第一个listView\r\n        MyAdapter myAdapter1 = new MyAdapter(view.getContext(), R.layout.my_listview, myList1);\r\n        ListView listView1 = (ListView) view.findViewById(R.id.my_listview1);\r\n        listView1.setAdapter(myAdapter1);\r\n        //适配第二个listView\r\n        MyAdapter myAdapter2 = new MyAdapter(view.getContext(), R.layout.my_listview, myList2);\r\n        ListView listView2 = (ListView) view.findViewById(R.id.my_listview2);\r\n        listView2.setAdapter(myAdapter2);\r\n        //适配第三个listView\r\n        MyAdapter myAdapter3 = new MyAdapter(view.getContext(), R.layout.my_listview, myList3);\r\n        ListView listView3 = (ListView) view.findViewById(R.id.my_listview3);\r\n        listView3.setAdapter(myAdapter3);\r\n        listView1.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                /**\r\n                 * 暂时修改\r\n                 */\r\n                if (Cache.user != null) {\r\n                    switch (position) {\r\n                        case 0:\r\n                            Intent intent2 = new Intent(getContext(), EditInfo.class);\r\n                            startActivity(intent2);\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                } else {\r\n                    showLoginToast();\r\n                }\r\n            }\r\n        });\r\n        listView2.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                if (Cache.user != null) {\r\n                    switch (position) {\r\n                        case 0:\r\n                            Intent intent = new Intent(getContext(), Post.class);\r\n                            startActivity(intent);\r\n                            break;\r\n                        case 1:\r\n                            Intent intent1 = new Intent(getContext(), MyOrderActivity.class);\r\n                            startActivity(intent1);\r\n                            break;\r\n                        case 2:\r\n                            Intent intent3 = new Intent(getContext(), History.class);\r\n                            startActivity(intent3);\r\n                            break;\r\n                        case 3:\r\n                            Intent intent4 = new Intent(getContext(), NewPet.class);\r\n                            startActivity(intent4);\r\n                            break;\r\n                        default:\r\n                            break;\r\n                    }\r\n                } else {\r\n                    showLoginToast();\r\n                }\r\n            }\r\n        });\r\n        listView3.setOnItemClickListener(new AdapterView.OnItemClickListener() {\r\n            @Override\r\n            public void onItemClick(AdapterView<?> parent, View view, int position, long id) {\r\n                switch (position) {\r\n                    case 0:\r\n                        if (Cache.user != null) {\r\n                            Intent intent = new Intent(getContext(), Setting.class);\r\n                            startActivity(intent);\r\n                        }else {\r\n                            showLoginToast();\r\n                        }\r\n                        break;\r\n                    case 1:\r\n                        Intent intent1 = new Intent(getContext(), AboutUs.class);\r\n                        startActivity(intent1);\r\n                        break;\r\n                    default:\r\n                        break;\r\n                }\r\n                    if(Cache.user != null) {\r\n                        switch (position) {\r\n                            case 0:\r\n                                Intent intent = new Intent(getContext(), Setting.class);\r\n                                startActivity(intent);\r\n                                break;\r\n                            case 1:\r\n                                Intent intent1 = new Intent(getContext(), AboutUs.class);\r\n                                startActivity(intent1);\r\n                                break;\r\n                            default:\r\n                                break;\r\n                        }\r\n                    }\r\n                    else{\r\n                        switch (position) {\r\n                            case 1:\r\n                                Intent intent1 = new Intent(getContext(), AboutUs.class);\r\n                                startActivity(intent1);\r\n                                break;\r\n                            default:\r\n                                showLoginToast();\r\n                                break;\r\n                        }\r\n\r\n                    }\r\n                }\r\n        });\r\n        return view;\r\n    }\r\n\r\n    //初始化数据\r\n    private void init() {\r\n        My my1 = new My(R.drawable.bianji, \"修改信息\", R.drawable.next);\r\n        myList1.add(my1);\r\n        My my2 = new My(R.drawable.mytie, \"我的帖子\", R.drawable.next);\r\n        myList2.add(my2);\r\n        My my3 = new My(R.drawable.myorder, \"我的订单\", R.drawable.next);\r\n        myList2.add(my3);\r\n        My my4 = new My(R.drawable.liulan, \"浏览记录\", R.drawable.next);\r\n        myList2.add(my4);\r\n        My my5 = new My(R.drawable.petlogo, \"我的宠物\", R.drawable.next);\r\n        myList2.add(my5);\r\n        My my6 = new My(R.drawable.setting, \"个人设置\", R.drawable.next);\r\n        myList3.add(my6);\r\n        My my7 = new My(R.drawable.we, \"关于我们\", R.drawable.next);\r\n        myList3.add(my7);\r\n    }\r\n\r\n    //加载数据，根据生命周期\r\n    @Override\r\n    public void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        init();\r\n    }\r\n\r\n    //通过生命周期方法 获得当前用户数据\r\n    @Override\r\n    public void onStart() {\r\n        if (Cache.user != null) {\r\n            login.setText(Cache.user.getUserName());\r\n            count.setText(Cache.user.getUserPhone());\r\n            photo.setImageBitmap(Cache.user.getPhoto());\r\n        }\r\n        super.onStart();\r\n    }\r\n\r\n    public void showLoginToast() {\r\n        Toast.makeText(getContext(), \"请先登录\", Toast.LENGTH_LONG).show();\r\n    }\r\n}\r\n
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/pet/my/MyFragment.java	(revision fc94aa66c19eb94b63501defb53608a400cef2bc)
-+++ app/src/main/java/com/example/pet/my/MyFragment.java	(date 1607424531836)
-@@ -67,9 +67,7 @@
-         listView1.setOnItemClickListener(new AdapterView.OnItemClickListener() {
-             @Override
-             public void onItemClick(AdapterView<?> parent, View view, int position, long id) {
--                /**
--                 * 暂时修改
--                 */
-+
-                 if (Cache.user != null) {
-                     switch (position) {
-                         case 0:
-Index: app/src/main/res/layout/picker_sex_bg.xml
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+><?xml version=\"1.0\" encoding=\"utf-8\"?>\r\n<LinearLayout xmlns:android=\"http://schemas.android.com/apk/res/android\"\r\n    android:layout_width=\"wrap_content\"\r\n    android:layout_height=\"wrap_content\"\r\n    android:orientation=\"vertical\"\r\n    android:background=\"@drawable/shape_picker_bg\">\r\n\r\n    <RelativeLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"50dp\">\r\n\r\n        <TextView\r\n            android:id=\"@+id/tv_cancel\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_centerVertical=\"true\"\r\n            android:layout_marginLeft=\"17dp\"\r\n            android:padding=\"8dp\"\r\n            android:text=\"取消\"\r\n            android:textSize=\"18sp\"\r\n            android:textColor=\"@color/Blue\"/>\r\n        <TextView\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_centerVertical=\"true\"\r\n            android:layout_centerHorizontal=\"true\"\r\n            android:text=\"性别\"\r\n            android:textSize=\"18sp\"/>\r\n\r\n        <TextView\r\n            android:id=\"@+id/tv_finish\"\r\n            android:layout_width=\"wrap_content\"\r\n            android:layout_height=\"wrap_content\"\r\n            android:layout_alignParentRight=\"true\"\r\n            android:layout_centerVertical=\"true\"\r\n            android:layout_marginRight=\"17dp\"\r\n            android:padding=\"8dp\"\r\n            android:text=\"完成\"\r\n            android:textColor=\"@color/Blue\"\r\n            android:textSize=\"18sp\" />\r\n    </RelativeLayout>\r\n\r\n    <LinearLayout\r\n        android:layout_width=\"match_parent\"\r\n        android:layout_height=\"1dp\"\r\n        android:background=\"#EEEEEE\"/>\r\n    <!--此部分需要完整复制过去，删减或者更改ID会导致初始化找不到内容而报空-->\r\n    <LinearLayout\r\n        android:id=\"@+id/optionspicker\"\r\n        android:layout_width=\"fill_parent\"\r\n        android:layout_height=\"wrap_content\"\r\n        android:minHeight=\"150dp\"\r\n        android:gravity=\"center\"\r\n        android:background=\"@android:color/white\"\r\n        android:orientation=\"horizontal\">\r\n\r\n        <com.contrarywind.view.WheelView\r\n            android:id=\"@+id/options1\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"match_parent\"\r\n            android:layout_weight=\"1\" />\r\n\r\n        <com.contrarywind.view.WheelView\r\n            android:id=\"@+id/options2\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"match_parent\"\r\n            android:layout_weight=\"1\" />\r\n\r\n        <com.contrarywind.view.WheelView\r\n            android:id=\"@+id/options3\"\r\n            android:layout_width=\"0dp\"\r\n            android:layout_height=\"match_parent\"\r\n            android:layout_weight=\"1\" />\r\n    </LinearLayout>\r\n</LinearLayout>
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/res/layout/picker_sex_bg.xml	(revision fc94aa66c19eb94b63501defb53608a400cef2bc)
-+++ app/src/main/res/layout/picker_sex_bg.xml	(date 1607432645369)
-@@ -20,11 +20,11 @@
-             android:textSize="18sp"
-             android:textColor="@color/Blue"/>
-         <TextView
-+            android:id="@+id/tv_title"
-             android:layout_width="wrap_content"
-             android:layout_height="wrap_content"
-             android:layout_centerVertical="true"
-             android:layout_centerHorizontal="true"
--            android:text="性别"
-             android:textSize="18sp"/>
- 
-         <TextView
-Index: app/src/main/java/com/example/pet/my/editinfo/EditInfo.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.pet.my.editinfo;\r\n\r\nimport androidx.annotation.Nullable;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\nimport androidx.appcompat.widget.Toolbar;\r\nimport androidx.core.app.ActivityCompat;\r\n\r\nimport android.app.Activity;\r\nimport android.content.ContentResolver;\r\nimport android.content.Context;\r\nimport android.content.Intent;\r\nimport android.content.pm.PackageManager;\r\nimport android.graphics.Bitmap;\r\nimport android.graphics.BitmapFactory;\r\nimport android.graphics.Rect;\r\nimport android.net.Uri;\r\nimport android.os.Bundle;\r\nimport android.os.Environment;\r\nimport android.os.Handler;\r\nimport android.os.IBinder;\r\nimport android.os.Looper;\r\nimport android.os.Message;\r\nimport android.provider.MediaStore;\r\nimport android.text.Editable;\r\nimport android.text.TextWatcher;\r\nimport android.util.Log;\r\nimport android.view.Gravity;\r\nimport android.view.MotionEvent;\r\nimport android.view.View;\r\nimport android.view.inputmethod.InputMethodManager;\r\nimport android.widget.Button;\r\nimport android.widget.EditText;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.PopupWindow;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.bigkoo.pickerview.builder.OptionsPickerBuilder;\r\nimport com.bigkoo.pickerview.builder.TimePickerBuilder;\r\nimport com.bigkoo.pickerview.listener.CustomListener;\r\nimport com.bigkoo.pickerview.listener.OnOptionsSelectListener;\r\nimport com.bigkoo.pickerview.listener.OnTimeSelectListener;\r\nimport com.bigkoo.pickerview.view.OptionsPickerView;\r\nimport com.bigkoo.pickerview.view.TimePickerView;\r\nimport com.example.pet.R;\r\nimport com.example.pet.my.SetPassword;\r\nimport com.example.pet.other.Cache;\r\nimport com.example.pet.other.entity.User;\r\nimport com.google.gson.Gson;\r\nimport com.luck.picture.lib.PictureSelector;\r\nimport com.luck.picture.lib.config.PictureConfig;\r\nimport com.luck.picture.lib.config.PictureMimeType;\r\nimport com.luck.picture.lib.entity.LocalMedia;\r\n\r\nimport java.io.ByteArrayOutputStream;\r\nimport java.io.File;\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.text.SimpleDateFormat;\r\nimport java.util.ArrayList;\r\nimport java.util.Calendar;\r\nimport java.util.Date;\r\nimport java.util.List;\r\n\r\nimport cn.jiguang.net.HttpUtils;\r\nimport de.hdodenhof.circleimageview.CircleImageView;\r\nimport okhttp3.Call;\r\nimport okhttp3.Callback;\r\nimport okhttp3.MediaType;\r\nimport okhttp3.MultipartBody;\r\nimport okhttp3.OkHttpClient;\r\nimport okhttp3.Request;\r\nimport okhttp3.RequestBody;\r\nimport okhttp3.Response;\r\n\r\nimport static com.luck.picture.lib.config.PictureConfig.REQUEST_CAMERA;\r\n\r\npublic class EditInfo extends AppCompatActivity {\r\n    private User user = new User();\r\n    private TextView upSex;\r\n    private PopupWindow popupWindow;\r\n    private Toolbar toolbar;\r\n    private CircleImageView upPhoto;\r\n    private TextView upBrithday;\r\n    private EditText upName;\r\n    private TimePickerView pvTime;\r\n    private OptionsPickerView pvCustomOptions;\r\n    private ArrayList<String> cardItem = new ArrayList<>();\r\n    //输入框初始值\r\n    private int num = 0;\r\n    //输入框最大值\r\n    public int mMaxNum=200;\r\n    public EditText etInput;\r\n    private TextView tvInput;\r\n    private String image_path;\r\n    private static final int REQUEST_EXTERNAL_STORAGE = 1;\r\n    private static String[] PERMISSIONS_STORAGE = {\r\n            \"android.permission.READ_EXTERNAL_STORAGE\",\r\n            \"android.permission.WRITE_EXTERNAL_STORAGE\",\r\n            \"android.permission.CAMER\"};\r\n\r\n    Handler hd = new Handler() {\r\n        @Override\r\n        public void handleMessage(Message msg) {\r\n            if(msg.what == 1){\r\n                Toast.makeText(EditInfo.this,\"上传成功\",Toast.LENGTH_SHORT);\r\n                upData();\r\n            }else if(msg.what == 2){\r\n                Log.e(\"up\",\"6b\");\r\n                Toast.makeText(EditInfo.this,\"上传失败了\",Toast.LENGTH_SHORT);\r\n            }else if(msg.what == 3){\r\n                Toast.makeText(EditInfo.this,\"上传成功\",Toast.LENGTH_SHORT);\r\n                EditInfo.this.finish();\r\n            }else {\r\n                Log.e(\"up\",\"6b\");\r\n                Toast.makeText(EditInfo.this,\"上传失败了\",Toast.LENGTH_SHORT);\r\n            }\r\n        }\r\n    };\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_edit_info);\r\n//        if (Build.VERSION.SDK_INT >= 21) {   //只有5.0及以上系统才支持，因此这里先进行了一层if判断\r\n//            View decorView = getWindow().getDecorView();\r\n//            int option = View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\r\n//                    | View.SYSTEM_UI_FLAG_LAYOUT_STABLE    //设置为全屏显示，必须这两行代码一起才能生效\r\n//                    |View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR;  //因为背景为浅色，设置通知栏字体颜色为深色\r\n//            decorView.setSystemUiVisibility(option);\r\n//            getWindow().setStatusBarColor(Color.TRANSPARENT);//设置为透明\r\n//        }\r\n        //设置控件内容\r\n        setView();\r\n    }\r\n\r\n    public void onClicked(View view) {\r\n        switch(view.getId()){\r\n            case R.id.upPhoto:\r\n                //上传头像\r\n                upPic();\r\n                break;\r\n            case R.id.upName:\r\n                break;\r\n            case R.id.ll_upSex:\r\n                pvCustomOptions.show();\r\n                break;\r\n            case R.id.ll_upBrithday:\r\n                pvTime.show();\r\n                break;\r\n            case R.id.tv_save:\r\n                //保存信息\r\n                upPhoto(image_path);\r\n                break;\r\n        }\r\n    }\r\n\r\n    private void upSex() {\r\n        // 注意：自定义布局中，id为 optionspicker 或者 timepicker 的布局以及其子控件必须要有，否则会报空指针\r\n        // 具体可参考demo 里面的两个自定义布局\r\n        pvCustomOptions = new OptionsPickerBuilder(this, new OnOptionsSelectListener() {\r\n            @Override\r\n            public void onOptionsSelect(int options1, int options2, int options3, View v) {\r\n               //返回的分别是三个级别的选中位置\r\n                String tx = cardItem.get(options1);\r\n                upSex.setText(tx);\r\n                Cache.user.setUserSex(tx);\r\n                user.setUserSex(tx);\r\n            }\r\n        })\r\n                .setLayoutRes(R.layout.picker_sex_bg, new CustomListener() {\r\n                    @Override\r\n                    public void customLayout(View v) {\r\n                        //自定义布局中的控件初始化及事件处理\r\n                        final TextView tvSubmit = v.findViewById(R.id.tv_finish);\r\n                        TextView tvCancel = v.findViewById(R.id.tv_cancel);\r\n                        tvSubmit.setOnClickListener(new View.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(View v) {\r\n                                pvCustomOptions.returnData();\r\n                                pvCustomOptions.dismiss();\r\n                            }\r\n                        });\r\n                        tvCancel.setOnClickListener(new View.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(View v) {\r\n                                pvCustomOptions.dismiss();\r\n                            }\r\n                        });\r\n\r\n                    }\r\n                })\r\n                .setOutSideCancelable(true)\r\n                .build();\r\n        pvCustomOptions.setPicker(cardItem);//添加数据\r\n    }\r\n\r\n    private void upBri() {\r\n        Calendar selectedDate = Calendar.getInstance();//系统当前时间\r\n        Calendar startDate = Calendar.getInstance();\r\n        startDate.set(1900, 1, 1);\r\n        Calendar endDate = Calendar.getInstance();\r\n        pvTime = new TimePickerBuilder(this, new OnTimeSelectListener() {\r\n            @Override\r\n            public void onTimeSelect(Date date, View v) {\r\n                upBrithday.setText(getTimes(date));\r\n                Cache.user.setUserBrithday(getTimes(date));\r\n                user.setUserBrithday(getTimes(date));\r\n            }\r\n        })\r\n                .setDate(selectedDate)\r\n                .setRangDate(startDate,endDate)\r\n                .setLayoutRes(R.layout.picker_time_bg, new CustomListener() {\r\n                    @Override\r\n                    public void customLayout(View v) {\r\n                        TextView tvSubmit = v.findViewById(R.id.tv_finish);\r\n                        TextView tvCannel = v.findViewById(R.id.tv_cancel);\r\n                        tvSubmit.setOnClickListener(new View.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(View v) {\r\n                                pvTime.returnData();\r\n                                pvTime.dismiss();\r\n                            }\r\n                        });\r\n                        tvCannel.setOnClickListener(new View.OnClickListener() {\r\n                            @Override\r\n                            public void onClick(View v) {\r\n                                pvTime.dismiss();\r\n                            }\r\n                        });\r\n                    }\r\n                })\r\n                .setOutSideCancelable(true)\r\n                .setContentTextSize(18)\r\n                .setType(new boolean[]{true, true, true, false, false, false})\r\n                .setLabel(\"年\", \"月\", \"日\", \"时\", \"分\", \"秒\")\r\n                .setLineSpacingMultiplier(1.2f)\r\n                .setTextXOffset(0, 0, 0, 40, 0, -40)\r\n                .isCenterLabel(false) //是否只显示中间选中项的label文字，false则每项item全部都带有label。\r\n                .setDividerColor(0xFF24AD9D)\r\n                .build();\r\n    }\r\n\r\n    //格式化时间\r\n    private String getTimes(Date date) {\r\n        SimpleDateFormat format = new SimpleDateFormat(\"yyyy-MM-dd\");\r\n        return format.format(date);\r\n    }\r\n\r\n    @Override\r\n    public boolean dispatchTouchEvent(MotionEvent ev) {\r\n        if (ev.getAction() == MotionEvent.ACTION_DOWN) {\r\n            View v = getCurrentFocus();\r\n            if (isShouldHideKeyboard(v, ev)) {\r\n                hideKeyboard(v.getWindowToken());\r\n            }\r\n        }\r\n        return super.dispatchTouchEvent(ev);\r\n    }\r\n\r\n    /**\r\n     * 根据EditText所在坐标和用户点击的坐标相对比，来判断是否隐藏键盘，因为当用户点击EditText时则不能隐藏\r\n     *\r\n     * @param v\r\n     * @param event\r\n     * @return\r\n     */\r\n    private boolean isShouldHideKeyboard(View v, MotionEvent event) {\r\n        if (v != null && (v instanceof EditText)) {\r\n            int[] l = {0, 0};\r\n            v.getLocationInWindow(l);\r\n            int left = l[0],\r\n                    top = l[1],\r\n                    bottom = top + v.getHeight(),\r\n                    right = left + v.getWidth();\r\n            if (event.getX() > left && event.getX() < right\r\n                    && event.getY() > top && event.getY() < bottom) {\r\n                // 点击EditText的事件，忽略它。\r\n                return false;\r\n            } else {\r\n                return true;\r\n            }\r\n        }\r\n        // 如果焦点不是EditText则忽略，这个发生在视图刚绘制完，第一个焦点不在EditText上，和用户用轨迹球选择其他的焦点\r\n        return false;\r\n    }\r\n\r\n    /**\r\n     * 获取InputMethodManager，隐藏软键盘\r\n     * @param token\r\n     */\r\n    private void hideKeyboard(IBinder token) {\r\n        if (token != null) {\r\n            InputMethodManager im = (InputMethodManager) getSystemService(Context.INPUT_METHOD_SERVICE);\r\n            im.hideSoftInputFromWindow(token, InputMethodManager.HIDE_NOT_ALWAYS);\r\n        }\r\n    }\r\n\r\n    private void setView() {\r\n        upSex = findViewById(R.id.edit_info_sex);\r\n        toolbar = findViewById(R.id.edit_toolbar);\r\n        toolbar.setNavigationOnClickListener(new View.OnClickListener() {\r\n            @Override\r\n            public void onClick(View v) {\r\n                EditInfo.this.finish();\r\n            }\r\n        });\r\n        upBrithday = findViewById(R.id.upBrithday);\r\n        upName = findViewById(R.id.upName);\r\n        upPhoto = findViewById(R.id.upPhoto);\r\n        etInput = findViewById(R.id.et_input);\r\n        tvInput = findViewById(R.id.tv_input);\r\n        cardItem.add(\"未知\");\r\n        cardItem.add(\"男\");\r\n        cardItem.add(\"女\");\r\n        //加载数据\r\n        upSex();\r\n        upBri();\r\n        countWords();\r\n\r\n\r\n\r\n    }\r\n\r\n    /**\r\n     * 记录字数和限制最大输入字数\r\n     */\r\n    private void countWords() {\r\n        etInput.addTextChangedListener(new TextWatcher() {\r\n            //记录输入的字数\r\n            private CharSequence wordNum;\r\n            private int selectionStart;\r\n            private int selectionEnd;\r\n            @Override\r\n            public void beforeTextChanged(CharSequence s, int start, int count, int after) {\r\n\r\n            }\r\n\r\n            @Override\r\n            public void onTextChanged(CharSequence s, int start, int before, int count) {\r\n                //实时记录输入的字数\r\n                wordNum= s;\r\n            }\r\n\r\n            @Override\r\n            public void afterTextChanged(Editable s) {\r\n\r\n                Cache.user.setUserAutograph(Cache.user.getUserAutograph() + s);\r\n                int number = num + s.length();\r\n                //TextView显示剩余字数\r\n                tvInput.setText(\"\" + number+\"/\" + mMaxNum);\r\n                selectionStart=etInput.getSelectionStart();\r\n                selectionEnd = etInput.getSelectionEnd();\r\n                //判断大于最大值\r\n                if (wordNum.length() > mMaxNum) {\r\n                    //删除多余输入的字（不会显示出来）\r\n                    s.delete(selectionStart - 1, selectionEnd);\r\n                    int tempSelection = selectionEnd;\r\n                    etInput.setText(s);\r\n                    etInput.setSelection(tempSelection);//设置光标在最后\r\n                    //吐司最多输入300字\r\n                    Toast.makeText(EditInfo.this, \"最多输入\"+mMaxNum+\"字\", Toast.LENGTH_SHORT).show();\r\n\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n\r\n    private void upPic() {\r\n        //动态申请权限\r\n        verifyStoragePermissions(this);\r\n        PictureSelector.create(this)\r\n                .openGallery(PictureConfig.TYPE_IMAGE)\r\n                .imageEngine(GlideEngine.createGlideEngine())\r\n                .imageSpanCount(4)// 每行显示个数 int\r\n                .maxSelectNum(1)\r\n                .isWeChatStyle(true)\r\n                .selectionMode(PictureConfig.SINGLE)// 多选 or 单选 PictureConfig.MULTIPLE or PictureConfig.SINGLE\r\n                .isSingleDirectReturn(true)//PictureConfig.SINGLE模式下是否直接返回\r\n                .isPreviewImage(true)// 是否可预览图片 true or false\r\n                .isCamera(true)// 是否显示拍照按钮 true or false\r\n                .imageFormat(PictureMimeType.JPEG)// 拍照保存图片格式后缀,默认jpeg\r\n                .isZoomAnim(true)// 图片列表点击 缩放效果 默认true\r\n                .setOutputCameraPath(Const.getImgPath())// 自定义拍照保存路径,可不填\r\n                .isEnableCrop(true)// 是否裁剪 true or false\r\n                .isCompress(true)// 是否压缩 true or false\r\n                .compressSavePath(Const.getImgPath())//压缩图片保存地址\r\n                .freeStyleCropEnabled(true)// 裁剪框是否可拖拽 true or false\r\n                .showCropGrid(true)// 是否显示裁剪矩形网格 圆形裁剪时建议设为false    true or false\r\n                .forResult(PictureConfig.CHOOSE_REQUEST);//结果回调onActivityResult code\r\n    }\r\n\r\n    //接受回调\r\n    @Override\r\n    protected void onActivityResult(int requestCode, int resultCode, @Nullable Intent data) {\r\n        super.onActivityResult(requestCode, resultCode, data);\r\n        if (resultCode == -1 && data != null) {\r\n            switch (requestCode) {\r\n                case PictureConfig.CHOOSE_REQUEST:\r\n                    List<LocalMedia> selectList = PictureSelector.obtainMultipleResult(data);\r\n                    image_path = selectList.get(0).getCompressPath();\r\n                    upPhoto.setImageURI(Uri.parse(image_path));\r\n                    //上传图片\r\n                    Cache.user.setPicturePath(image_path);\r\n                    user.setPicturePath(image_path);\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 上传图片\r\n     * 未测试\r\n     */\r\n    public void upPhoto(String path){\r\n        Cache.user.setUserName(upName.getText().toString());\r\n        Log.e(\"name\",upName.getText().toString());\r\n        Log.e(\"up\",\"1\");\r\n        File file = new File(path);\r\n        Log.e(\"up\",\"2\");\r\n        String url = Cache.MY_URL + \"UpdataUserInfoServlet\";\r\n        OkHttpClient okHttpClient = new OkHttpClient();\r\n        if(file != null && file.exists()){\r\n            RequestBody requestBody = new MultipartBody.Builder()\r\n                    .setType(MultipartBody.FORM)\r\n                    .addFormDataPart(\"file\",\r\n                            Cache.userPhone + \".jpg\",\r\n                            RequestBody.create(MediaType.parse(\"image/png\"),file))\r\n                    .addFormDataPart(\"phone\",Cache.userPhone)\r\n                    .build();\r\n            Request request = new Request.Builder()\r\n                    .url(url)\r\n                    .post(requestBody)\r\n                    .build();\r\n            Call call = okHttpClient.newCall(request);\r\n\r\n            Log.e(\"up\",\"3\");\r\n            call.enqueue(new Callback() {\r\n                @Override\r\n                public void onFailure(Call call, IOException e) {\r\n                    //失败\r\n                    Log.e(\"up\",\"4b\");\r\n                    Message msg = new Message();\r\n                    msg.what = 2;\r\n                    msg.obj = 1;\r\n                    Log.e(\"up\",\"5b\");\r\n                    hd.sendMessage(msg);\r\n                    Log.e(\"up\",\"6b\");\r\n                    e.printStackTrace();\r\n                }\r\n\r\n                @Override\r\n                public void onResponse(Call call, Response response) throws IOException {\r\n                    //上传成功\r\n                    Log.e(\"up\",\"4a\");\r\n                    Message msg = new Message();\r\n                    String res = response.body().string();\r\n                    if(res.equals(\"true\")){\r\n                        msg.what = 1;\r\n                        msg.obj = 1;\r\n                        Log.e(\"updata\",res);\r\n                    }else {\r\n                        msg.what = 2;\r\n                        msg.obj = 1;\r\n                        Log.e(\"updata\",res);\r\n                    }\r\n                    hd.sendMessage(msg);\r\n\r\n                }\r\n            });\r\n\r\n        }else {\r\n            Toast.makeText(EditInfo.this,\"请添加头像\",Toast.LENGTH_SHORT);\r\n        }\r\n    }\r\n\r\n    /**\r\n     * 上传数据\r\n     */\r\n    public void upData(){\r\n        OkHttpClient okHttpClient = new OkHttpClient();\r\n        //创建请求体对象\r\n        user.setUserPhone(Cache.userPhone);\r\n        user.setUserName(upName.getText().toString());\r\n        user.setUserAutograph(etInput.getText().toString());\r\n        user.setPicturePath(Cache.userPhone + \".jpg\");\r\n        RequestBody requestBody = RequestBody.create(MediaType.parse(\r\n                \"text/plain;charset=UTF-8\"),new Gson().toJson(user));\r\n        //3.创建请求对象\r\n        Request request = new Request.Builder()\r\n                .post(requestBody)\r\n                .url(Cache.MY_URL + \"UpDataUserInfo2Servlet\")\r\n                .build();\r\n        //3.创建Call对象，发送请求，并接受响应\r\n        Call call = okHttpClient.newCall(request);\r\n        //异步网络请求（无需手动使用子线程）\r\n        call.enqueue(new Callback() {\r\n            @Override\r\n            public void onFailure(Call call, IOException e) {\r\n                //失败\r\n                Message msg = new Message();\r\n                msg.what = 4;\r\n                msg.obj = 3;\r\n                Log.e(\"up\",\"5b\");\r\n                hd.sendMessage(msg);\r\n                Log.e(\"up\",\"6b\");\r\n                e.printStackTrace();\r\n            }\r\n\r\n            @Override\r\n            public void onResponse(Call call, Response response) throws IOException {\r\n                //上传成功\r\n                Message msg = new Message();\r\n                String res = response.body().string();\r\n                if(res.equals(\"true\")){\r\n                    msg.what = 3;\r\n                    msg.obj = 1;\r\n                    Log.e(\"updata\",res);\r\n                }else {\r\n                    msg.what = 2;\r\n                    msg.obj = 1;\r\n                    Log.e(\"updata\",res);\r\n                }\r\n                hd.sendMessage(msg);\r\n\r\n            }\r\n        });\r\n    }\r\n\r\n    //然后通过一个函数来申请权限\r\n    public static void verifyStoragePermissions(Activity activity) {\r\n        try {\r\n            //检测是否有写的权限\r\n            int permission = ActivityCompat.checkSelfPermission(activity,\r\n                    \"android.permission.WRITE_EXTERNAL_STORAGE\");\r\n            if (permission != PackageManager.PERMISSION_GRANTED) {\r\n                // 没有写的权限，去申请写的权限，会弹出对话框\r\n                ActivityCompat.requestPermissions(activity, PERMISSIONS_STORAGE,REQUEST_EXTERNAL_STORAGE);\r\n            }\r\n        } catch (Exception e) {\r\n            e.printStackTrace();\r\n        }\r\n    }\r\n\r\n\r\n\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/pet/my/editinfo/EditInfo.java	(revision fc94aa66c19eb94b63501defb53608a400cef2bc)
-+++ app/src/main/java/com/example/pet/my/editinfo/EditInfo.java	(date 1607433298534)
-@@ -56,6 +56,8 @@
- import java.io.File;
- import java.io.IOException;
- import java.io.InputStream;
-+import java.net.MalformedURLException;
-+import java.net.URL;
- import java.text.SimpleDateFormat;
- import java.util.ArrayList;
- import java.util.Calendar;
-@@ -131,6 +133,53 @@
- //        }
-         //设置控件内容
-         setView();
-+        initData();
-+        //加载数据
-+        upSex();
-+        upBri();
-+        countWords();
-+    }
-+
-+    private void initData() {
-+        cardItem.add("未知");
-+        cardItem.add("男");
-+        cardItem.add("女");
-+        Log.e("initData","start");
-+        if(Cache.user.getPicturePath() != null){
-+            upPhoto.setImageBitmap(Cache.user.getPhoto());
-+        }
-+        if(Cache.user.getUserName() != null){
-+            upName.setText(Cache.user.getUserName());
-+        }
-+        if(Cache.user.getUserSex() != null){
-+            upSex.setText(Cache.user.getUserSex());
-+        }
-+        if(Cache.user.getUserBrithday() != null){
-+            upBrithday.setText(Cache.user.getUserBrithday());
-+        }
-+        if(Cache.user.getUserAutograph() != null){
-+            etInput.setText(Cache.user.getUserAutograph());
-+        }
-+        Log.e("initData","over");
-+    }
-+
-+    private void setView() {
-+        upSex = findViewById(R.id.edit_info_sex);
-+        toolbar = findViewById(R.id.edit_toolbar);
-+        toolbar.setNavigationOnClickListener(new View.OnClickListener() {
-+            @Override
-+            public void onClick(View v) {
-+                EditInfo.this.finish();
-+            }
-+        });
-+        upBrithday = findViewById(R.id.upBrithday);
-+        upName = findViewById(R.id.upName);
-+        upPhoto = findViewById(R.id.upPhoto);
-+        etInput = findViewById(R.id.et_input);
-+        tvInput = findViewById(R.id.tv_input);
-+
-+
-+
-     }
- 
-     public void onClicked(View view) {
-@@ -149,7 +198,11 @@
-                 break;
-             case R.id.tv_save:
-                 //保存信息
--                upPhoto(image_path);
-+                if(image_path == null){
-+                    upData();
-+                }else {
-+                    upPhoto(image_path);
-+                }
-                 break;
-         }
-     }
-@@ -173,6 +226,8 @@
-                         //自定义布局中的控件初始化及事件处理
-                         final TextView tvSubmit = v.findViewById(R.id.tv_finish);
-                         TextView tvCancel = v.findViewById(R.id.tv_cancel);
-+                        TextView tyTitle = v.findViewById(R.id.tv_title);
-+                        tyTitle.setText("性别");
-                         tvSubmit.setOnClickListener(new View.OnClickListener() {
-                             @Override
-                             public void onClick(View v) {
-@@ -189,6 +244,8 @@
- 
-                     }
-                 })
-+                .setLineSpacingMultiplier(1.5f)//滚轮字体间距
-+                .setContentTextSize(22)//字体大小
-                 .setOutSideCancelable(true)
-                 .build();
-         pvCustomOptions.setPicker(cardItem);//添加数据
-@@ -229,11 +286,11 @@
-                         });
-                     }
-                 })
-+                .setContentTextSize(22)//字体大小
-                 .setOutSideCancelable(true)
--                .setContentTextSize(18)
-                 .setType(new boolean[]{true, true, true, false, false, false})
-                 .setLabel("年", "月", "日", "时", "分", "秒")
--                .setLineSpacingMultiplier(1.2f)
-+                .setLineSpacingMultiplier(1.5f)
-                 .setTextXOffset(0, 0, 0, 40, 0, -40)
-                 .isCenterLabel(false) //是否只显示中间选中项的label文字，false则每项item全部都带有label。
-                 .setDividerColor(0xFF24AD9D)
-@@ -246,6 +303,11 @@
-         return format.format(date);
-     }
- 
-+    /**
-+     * 隐藏键盘
-+     * @param ev
-+     * @return
-+     */
-     @Override
-     public boolean dispatchTouchEvent(MotionEvent ev) {
-         if (ev.getAction() == MotionEvent.ACTION_DOWN) {
-@@ -295,31 +357,7 @@
-         }
-     }
- 
--    private void setView() {
--        upSex = findViewById(R.id.edit_info_sex);
--        toolbar = findViewById(R.id.edit_toolbar);
--        toolbar.setNavigationOnClickListener(new View.OnClickListener() {
--            @Override
--            public void onClick(View v) {
--                EditInfo.this.finish();
--            }
--        });
--        upBrithday = findViewById(R.id.upBrithday);
--        upName = findViewById(R.id.upName);
--        upPhoto = findViewById(R.id.upPhoto);
--        etInput = findViewById(R.id.et_input);
--        tvInput = findViewById(R.id.tv_input);
--        cardItem.add("未知");
--        cardItem.add("男");
--        cardItem.add("女");
--        //加载数据
--        upSex();
--        upBri();
--        countWords();
--
- 
--
--    }
- 
-     /**
-      * 记录字数和限制最大输入字数
-@@ -481,9 +519,38 @@
-         OkHttpClient okHttpClient = new OkHttpClient();
-         //创建请求体对象
-         user.setUserPhone(Cache.userPhone);
--        user.setUserName(upName.getText().toString());
--        user.setUserAutograph(etInput.getText().toString());
--        user.setPicturePath(Cache.userPhone + ".jpg");
-+        String name = upName.getText().toString();
-+        if(name == null){
-+            user.setUserName("");
-+        }else {
-+            user.setUserName(name);
-+        }
-+        String autograph = etInput.getText().toString();
-+        if(autograph == null){
-+            user.setUserAutograph("");
-+        }else {
-+            user.setUserAutograph(autograph);
-+        }
-+        String path = Cache.user.getPicturePath();
-+        if(path == null){
-+            user.setPicturePath("");
-+        }else {
-+            user.setPicturePath(path);
-+        }
-+        String sex = upSex.getText().toString();
-+        if(sex == null){
-+            user.setUserSex("未知");
-+        }else {
-+            user.setUserSex(sex);
-+        }
-+        String brithday = upBrithday.getText().toString();
-+        if(brithday == null){
-+            Calendar selectedDate = Calendar.getInstance();//系统当前时间
-+            user.setUserBrithday(getTimes(selectedDate.getTime()));
-+        }else {
-+            user.setUserBrithday(brithday);
-+        }
-+
-         RequestBody requestBody = RequestBody.create(MediaType.parse(
-                 "text/plain;charset=UTF-8"),new Gson().toJson(user));
-         //3.创建请求对象
-@@ -541,7 +608,4 @@
-             e.printStackTrace();
-         }
-     }
--
--
--
- }
-\ No newline at end of file
-Index: app/src/main/java/com/example/pet/my/Login.java
-IDEA additional info:
-Subsystem: com.intellij.openapi.diff.impl.patch.BaseRevisionTextPatchEP
-<+>package com.example.pet.my;\r\n\r\nimport androidx.annotation.NonNull;\r\nimport androidx.appcompat.app.AppCompatActivity;\r\n\r\nimport android.animation.Animator;\r\nimport android.animation.AnimatorSet;\r\nimport android.animation.ObjectAnimator;\r\nimport android.animation.PropertyValuesHolder;\r\nimport android.animation.ValueAnimator;\r\nimport android.content.Intent;\r\nimport android.graphics.Color;\r\nimport android.os.Build;\r\nimport android.os.Bundle;\r\nimport android.os.Handler;\r\nimport android.os.Message;\r\nimport android.util.Log;\r\nimport android.view.View;\r\nimport android.view.ViewGroup;\r\nimport android.view.animation.AccelerateDecelerateInterpolator;\r\nimport android.widget.EditText;\r\nimport android.widget.LinearLayout;\r\nimport android.widget.TextView;\r\nimport android.widget.Toast;\r\n\r\nimport com.example.pet.MainActivity;\r\nimport com.example.pet.R;\r\nimport com.example.pet.other.Cache;\r\n\r\nimport java.io.IOException;\r\nimport java.io.InputStream;\r\nimport java.net.MalformedURLException;\r\nimport java.net.URL;\r\n\r\npublic class Login extends AppCompatActivity {\r\n    private String phone ;\r\n    private View progress;\r\n    private View mInputLayout;\r\n    private TextView login;\r\n    private float mWidth, mHeight;\r\n    private LinearLayout mName, mPsw;\r\n    private EditText etName;\r\n    private EditText etPassword;\r\n    private Handler handler = new Handler( ){\r\n        @Override\r\n        public void handleMessage(@NonNull Message msg) {\r\n           switch (msg.what){\r\n               case 1:\r\n                   mName.setVisibility(View.INVISIBLE);\r\n                   mPsw.setVisibility(View.INVISIBLE);\r\n                   inputAnimator(mInputLayout, mWidth, mHeight);\r\n                    Cache.userPhone = phone;\r\n                    Log.e(\"Login\",\"登录成功\"+Cache.userPhone);\r\n                    Intent intent2 = new Intent(Login.this,MyUserService.class);\r\n                    startService(intent2);\r\n\r\n                   break;\r\n               case 0:\r\n                   Toast.makeText(Login.this,\"密码有误，请重试\",Toast.LENGTH_LONG).show();\r\n                   break;\r\n           }\r\n        }\r\n    };\r\n    @Override\r\n    protected void onCreate(Bundle savedInstanceState) {\r\n        super.onCreate(savedInstanceState);\r\n        setContentView(R.layout.activity_login);\r\n        if (Build.VERSION.SDK_INT >= 21) {   //只有5.0及以上系统才支持，因此这里先进行了一层if判断\r\n            View decorView = getWindow().getDecorView();\r\n            int option = View.SYSTEM_UI_FLAG_LAYOUT_FULLSCREEN\r\n                    | View.SYSTEM_UI_FLAG_LAYOUT_STABLE    //设置为全屏显示，必须这两行代码一起才能生效\r\n                    |View.SYSTEM_UI_FLAG_LIGHT_STATUS_BAR;  //因为背景为浅色，设置通知栏字体颜色为深色\r\n            decorView.setSystemUiVisibility(option);\r\n            getWindow().setStatusBarColor(Color.TRANSPARENT);//设置为透明\r\n        }\r\n        initView();\r\n    }\r\n\r\n    private void initView() {\r\n        login = (TextView) findViewById(R.id.login_btn);\r\n        progress = findViewById(R.id.layout_progress);\r\n        mInputLayout = findViewById(R.id.input_layout);\r\n        mName = (LinearLayout) findViewById(R.id.input_layout_name);\r\n        mPsw = (LinearLayout) findViewById(R.id.input_layout_psw);\r\n        etName = findViewById(R.id.login_et_username);\r\n        etPassword = findViewById(R.id.login_et_password);\r\n    }\r\n\r\n    public void onClicked(View view) {\r\n        switch (view.getId()){\r\n            case R.id.login_btn:\r\n                mWidth = login.getMeasuredWidth();\r\n                mHeight = login.getMeasuredHeight();\r\n                loginService();\r\n                break;\r\n            case R.id.login_register:\r\n                Intent intent = new Intent(this,Register.class);\r\n                startActivity(intent);\r\n                break;\r\n            case R.id.login_update:\r\n                Intent intent1 = new Intent(this,Update.class);\r\n                startActivity(intent1);\r\n                break;\r\n\r\n        }\r\n    }\r\n\r\n    private void loginService() {\r\n        phone = etName.getText().toString();\r\nCache.userPhone = etName.getText().toString();\r\n        final String pwd = etPassword.getText().toString();\r\n        if(phone.length() ==11 && pwd.length()!=0){\r\n            new Thread(){\r\n                @Override\r\n                public void run() {\r\n                    try {\r\n                        URL url = new URL(Cache.MY_URL+\"LoginServlet?num=\"+phone+\"&pwd=\"+pwd);\r\n                        InputStream in = url.openStream();\r\n                        int num = in.read();\r\n                        Message message = new Message();\r\n                        message.what = num;\r\n                        handler.sendMessage(message);\r\n                        in.close();\r\n                    } catch (MalformedURLException e) {\r\n                        e.printStackTrace();\r\n                    } catch (IOException e) {\r\n                        e.printStackTrace();\r\n                    }\r\n\r\n                }\r\n            }.start();\r\n        }else{\r\n            Toast.makeText(this,\"输入格式有误\",Toast.LENGTH_LONG).show();\r\n        }\r\n    }\r\n\r\n    private void inputAnimator(final View view, float w, float h) {\r\n        AnimatorSet set = new AnimatorSet();\r\n        ValueAnimator animator = ValueAnimator.ofFloat(0, w);\r\n        animator.addUpdateListener(new ValueAnimator.AnimatorUpdateListener() {\r\n            @Override\r\n            public void onAnimationUpdate(ValueAnimator animation) {\r\n                float value = (Float) animation.getAnimatedValue();\r\n                ViewGroup.MarginLayoutParams params = (ViewGroup.MarginLayoutParams) view\r\n                        .getLayoutParams();\r\n                params.leftMargin = (int) value;\r\n                params.rightMargin = (int) value;\r\n                view.setLayoutParams(params);\r\n            }\r\n        });\r\n        ObjectAnimator animator2 = ObjectAnimator.ofFloat(mInputLayout, \"scaleX\", 1f, 0.5f);\r\n        set.setDuration(1500);\r\n        set.setInterpolator(new AccelerateDecelerateInterpolator());\r\n        set.playTogether(animator, animator2);\r\n        set.start();\r\n        set.addListener(new Animator.AnimatorListener() {\r\n            @Override\r\n            public void onAnimationStart(Animator animation) {\r\n\r\n            }\r\n            @Override\r\n            public void onAnimationRepeat(Animator animation) {\r\n                // TODO Auto-generated method stub\r\n\r\n            }\r\n            @Override\r\n            public void onAnimationEnd(Animator animation) {\r\n                progress.setVisibility(View.VISIBLE);\r\n                progressAnimator(progress);\r\n                mInputLayout.setVisibility(View.INVISIBLE);\r\n                Intent intent1 = new Intent(Login.this,MyDataService.class);\r\n                startService(intent1);\r\n                Intent intent = new Intent(Login.this,MainActivity.class);\r\n                startActivity(intent);\r\n                Login.this.finish();\r\n            }\r\n            @Override\r\n            public void onAnimationCancel(Animator animation) {\r\n                // TODO Auto-generated method stub\r\n            }\r\n        });\r\n    }\r\n    private void progressAnimator(final View view) {\r\n        PropertyValuesHolder animator = PropertyValuesHolder.ofFloat(\"scaleX\", 0.5f, 1f);\r\n        PropertyValuesHolder animator2 = PropertyValuesHolder.ofFloat(\"scaleY\", 0.5f, 1f);\r\n        ObjectAnimator animator3 = ObjectAnimator.ofPropertyValuesHolder(view, animator, animator2);\r\n        animator3.setDuration(1500);\r\n        animator3.setInterpolator(new JellyInterpolator());\r\n        animator3.start();\r\n    }\r\n    public void back(View view) {\r\n        Intent intent = new Intent(Login.this,MainActivity.class);\r\n        startActivity(intent);\r\n        this.finish();\r\n    }\r\n}
-Subsystem: com.intellij.openapi.diff.impl.patch.CharsetEP
-<+>UTF-8
-===================================================================
---- app/src/main/java/com/example/pet/my/Login.java	(revision fc94aa66c19eb94b63501defb53608a400cef2bc)
-+++ app/src/main/java/com/example/pet/my/Login.java	(date 1607424531827)
-@@ -107,18 +107,22 @@
- 
-     private void loginService() {
-         phone = etName.getText().toString();
--Cache.userPhone = etName.getText().toString();
-+        Cache.userPhone = etName.getText().toString();
-         final String pwd = etPassword.getText().toString();
-+        Log.e(phone,pwd);
-+        Log.e("Login",""+Cache.userPhone+pwd);
-         if(phone.length() ==11 && pwd.length()!=0){
-             new Thread(){
-                 @Override
-                 public void run() {
-                     try {
-                         URL url = new URL(Cache.MY_URL+"LoginServlet?num="+phone+"&pwd="+pwd);
-+                        Log.e("链接","成功");
-                         InputStream in = url.openStream();
-                         int num = in.read();
-                         Message message = new Message();
-                         message.what = num;
-+                        Log.e("num",num + "");
-                         handler.sendMessage(message);
-                         in.close();
-                     } catch (MalformedURLException e) {
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_3_10_09__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_3_10_09__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_2_11_10__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_2_11_10__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_3_9_09__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_3_9_09__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_3_10_15__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_3_10_15__Default_Changelist_.xml
-diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_5_14_54__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_5_14_54__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_10_8_40__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_10_8_40__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_14_8_48__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_14_8_48__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_13_16_17__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_13_16_17__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_13_15_00__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_13_15_00__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_10_8_04__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_10_8_04__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_12_13_23__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_12_13_23__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_10_20_49__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_10_20_49__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_13_16_13__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_13_16_13__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_13_16_29__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_13_16_29__Default_Changelist_.xml
diff --git .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_14_9_53__Default_Changelist_.xml .idea/shelf/Uncommitted_changes_before_Update_at_2020_12_14_9_53__Default_Changelist_.xml
